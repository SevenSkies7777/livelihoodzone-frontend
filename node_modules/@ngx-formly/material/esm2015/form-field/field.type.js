/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { TemplateRef, ViewChild, Type } from '@angular/core';
import { FieldType as CoreFieldType, ɵdefineHiddenProp as defineHiddenProp } from '@ngx-formly/core';
import { Subject } from 'rxjs';
import { FormlyErrorStateMatcher } from './formly.error-state-matcher';
/**
 * @abstract
 * @template F
 */
import * as ɵngcc0 from '@angular/core';

const _c0 = ["matPrefix"];
const _c1 = ["matSuffix"];
export class FieldType extends CoreFieldType {
    constructor() {
        super(...arguments);
        this.errorStateMatcher = new FormlyErrorStateMatcher(this);
        this.stateChanges = new Subject();
        this._errorState = false;
    }
    /**
     * @return {?}
     */
    get formFieldControl() { return this._control || this; }
    /**
     * @param {?} control
     * @return {?}
     */
    set formFieldControl(control) {
        this._control = control;
        if (this.formField && control !== this.formField._control) {
            this.formField._control = control;
        }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        if (this.formField) {
            this.formField._control = this.formFieldControl;
        }
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        if (this.matPrefix || this.matSuffix) {
            setTimeout((/**
             * @return {?}
             */
            () => {
                defineHiddenProp(this.field, '_matprefix', this.matPrefix);
                defineHiddenProp(this.field, '_matsuffix', this.matSuffix);
                ((/** @type {?} */ (this.options)))._markForCheck(this.field);
            }));
        }
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        if (this.formField) {
            delete this.formField._control;
        }
        this.stateChanges.complete();
    }
    /**
     * @param {?} ids
     * @return {?}
     */
    setDescribedByIds(ids) { }
    /**
     * @param {?} event
     * @return {?}
     */
    onContainerClick(event) {
        this.field.focus = true;
        this.stateChanges.next();
    }
    /**
     * @return {?}
     */
    get errorState() {
        /** @type {?} */
        const showError = (/** @type {?} */ ((/** @type {?} */ (this.options)).showError))(this);
        if (showError !== this._errorState) {
            this._errorState = showError;
            this.stateChanges.next();
        }
        return showError;
    }
    /**
     * @return {?}
     */
    get controlType() {
        if (this.to.type) {
            return this.to.type;
        }
        if (((/** @type {?} */ (this.field.type))) instanceof Type) {
            return (/** @type {?} */ (this.field.type)).constructor.name;
        }
        return (/** @type {?} */ (this.field.type));
    }
    /**
     * @return {?}
     */
    get focused() { return !!this.field.focus && !this.disabled; }
    /**
     * @return {?}
     */
    get disabled() { return !!this.to.disabled; }
    /**
     * @return {?}
     */
    get required() { return !!this.to.required; }
    /**
     * @return {?}
     */
    get placeholder() { return this.to.placeholder || ''; }
    /**
     * @return {?}
     */
    get shouldPlaceholderFloat() { return this.shouldLabelFloat; }
    /**
     * @return {?}
     */
    get value() { return this.formControl.value; }
    /**
     * @param {?} value
     * @return {?}
     */
    set value(value) { this.formControl.patchValue(value); }
    /**
     * @return {?}
     */
    get ngControl() { return (/** @type {?} */ (this.formControl)); }
    /**
     * @return {?}
     */
    get empty() { return this.value === undefined || this.value === null || this.value === ''; }
    /**
     * @return {?}
     */
    get shouldLabelFloat() { return this.focused || !this.empty; }
    /**
     * @return {?}
     */
    get formField() { return this.field ? ((/** @type {?} */ (this.field)))['__formField__'] : null; }
}
FieldType.ɵfac = function FieldType_Factory(t) { return ɵFieldType_BaseFactory(t || FieldType); };
FieldType.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: FieldType, viewQuery: function FieldType_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵviewQuery(_c0, true);
        ɵngcc0.ɵɵviewQuery(_c1, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.matPrefix = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.matSuffix = _t.first);
    } }, features: [ɵngcc0.ɵɵInheritDefinitionFeature] });
FieldType.propDecorators = {
    matPrefix: [{ type: ViewChild, args: ['matPrefix',] }],
    matSuffix: [{ type: ViewChild, args: ['matSuffix',] }]
};
const ɵFieldType_BaseFactory = /*@__PURE__*/ ɵngcc0.ɵɵgetInheritedFactory(FieldType);
if (false) {
    /** @type {?} */
    FieldType.prototype.matPrefix;
    /** @type {?} */
    FieldType.prototype.matSuffix;
    /** @type {?} */
    FieldType.prototype.errorStateMatcher;
    /** @type {?} */
    FieldType.prototype.stateChanges;
    /** @type {?} */
    FieldType.prototype._errorState;
    /**
     * @type {?}
     * @private
     */
    FieldType.prototype._control;
}

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmllbGQudHlwZS5qcyIsInNvdXJjZXMiOlsiQG5neC1mb3JtbHkvbWF0ZXJpYWwvZm9ybS1maWVsZC9maWVsZC50eXBlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQW9DLFdBQVcsRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQy9GLE9BQU8sRUFBRSxTQUFTLElBQUksYUFBYSxFQUFFLGlCQUFpQixJQUFJLGdCQUFnQixFQUFxQixNQUFNLGtCQUFrQixDQUFDO0FBQ3hILE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFFL0IsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFDdkU7QUFDRztBQUFhO0FBQWU7Ozs7O0FBQS9CLE1BQU0sT0FBZ0IsU0FBMkQsU0FBUSxhQUFnQjtBQUFHLElBQTVHO0FBQWdCO0FBQTZCLFFBWTNDLHNCQUFpQixHQUFHLElBQUksdUJBQXVCLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDeEQsUUFBRSxpQkFBWSxHQUFHLElBQUksT0FBTyxFQUFRLENBQUM7QUFDckMsUUFBRSxnQkFBVyxHQUFHLEtBQUssQ0FBQztBQUN0QixJQStEQSxDQUFDO0FBQ0Q7QUFBUTtBQUFtQjtBQUFRLElBM0VqQyxJQUFJLGdCQUFnQixLQUFLLE9BQU8sSUFBSSxDQUFDLFFBQVEsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQzFEO0FBQVE7QUFBMEI7QUFBbUI7QUFDcEQsSUFEQyxJQUFJLGdCQUFnQixDQUFDLE9BQWlDO0FBQ3hELFFBQUksSUFBSSxDQUFDLFFBQVEsR0FBRyxPQUFPLENBQUM7QUFDNUIsUUFBSSxJQUFJLElBQUksQ0FBQyxTQUFTLElBQUksT0FBTyxLQUFLLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFO0FBQy9ELFlBQU0sSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDO0FBQ3hDLFNBQUs7QUFD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SUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDaEU7QUFBUTtBQUFtQjtBQUFRLElBQWpDLElBQUksU0FBUyxLQUFtQixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsbUJBQUssSUFBSSxDQUFDLEtBQUssRUFBQSxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7QUFDbEc7Ozs7Ozs7OzswREFBQztBQUNEO0FBQTZCLHdCQTlFMUIsU0FBUyxTQUFDLFdBQVc7QUFBTyx3QkFDNUIsU0FBUyxTQUFDLFdBQVc7QUFBTTtxRkFBRTtBQUFDO0FBQWE7QUFFcEMsSUFIUiw4QkFBcUQ7QUFDdkQ7QUFBcUIsSUFBbkIsOEJBQXFEO0FBQ3ZEO0FBQ29CLElBUWxCLHNDQUFzRDtBQUN4RDtBQUFxQixJQUFuQixpQ0FBbUM7QUFDckM7QUFBcUIsSUFBbkIsZ0NBQW9CO0FBQ3RCO0FBQVE7QUFBaUI7QUFBZ0I7QUFFeEMsSUFGQyw2QkFBNEM7QUFDOUM7QUFDQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9uSW5pdCwgT25EZXN0cm95LCBBZnRlclZpZXdJbml0LCBUZW1wbGF0ZVJlZiwgVmlld0NoaWxkLCBUeXBlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBGaWVsZFR5cGUgYXMgQ29yZUZpZWxkVHlwZSwgybVkZWZpbmVIaWRkZW5Qcm9wIGFzIGRlZmluZUhpZGRlblByb3AsIEZvcm1seUZpZWxkQ29uZmlnIH0gZnJvbSAnQG5neC1mb3JtbHkvY29yZSc7XG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBNYXRGb3JtRmllbGQsIE1hdEZvcm1GaWVsZENvbnRyb2wgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9mb3JtLWZpZWxkJztcbmltcG9ydCB7IEZvcm1seUVycm9yU3RhdGVNYXRjaGVyIH0gZnJvbSAnLi9mb3JtbHkuZXJyb3Itc3RhdGUtbWF0Y2hlcic7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBGaWVsZFR5cGU8RiBleHRlbmRzIEZvcm1seUZpZWxkQ29uZmlnID0gRm9ybWx5RmllbGRDb25maWc+IGV4dGVuZHMgQ29yZUZpZWxkVHlwZTxGPiBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95LCBNYXRGb3JtRmllbGRDb250cm9sPGFueT4ge1xuICBAVmlld0NoaWxkKCdtYXRQcmVmaXgnKSBtYXRQcmVmaXghOiBUZW1wbGF0ZVJlZjxhbnk+O1xuICBAVmlld0NoaWxkKCdtYXRTdWZmaXgnKSBtYXRTdWZmaXghOiBUZW1wbGF0ZVJlZjxhbnk+O1xuXG4gIGdldCBmb3JtRmllbGRDb250cm9sKCkgeyByZXR1cm4gdGhpcy5fY29udHJvbCB8fCB0aGlzOyB9XG4gIHNldCBmb3JtRmllbGRDb250cm9sKGNvbnRyb2w6IE1hdEZvcm1GaWVsZENvbnRyb2w8YW55Pikge1xuICAgIHRoaXMuX2NvbnRyb2wgPSBjb250cm9sO1xuICAgIGlmICh0aGlzLmZvcm1GaWVsZCAmJiBjb250cm9sICE9PSB0aGlzLmZvcm1GaWVsZC5fY29udHJvbCkge1xuICAgICAgdGhpcy5mb3JtRmllbGQuX2NvbnRyb2wgPSBjb250cm9sO1xuICAgIH1cbiAgfVxuXG4gIGVycm9yU3RhdGVNYXRjaGVyID0gbmV3IEZvcm1seUVycm9yU3RhdGVNYXRjaGVyKHRoaXMpO1xuICBzdGF0ZUNoYW5nZXMgPSBuZXcgU3ViamVjdDx2b2lkPigpO1xuICBfZXJyb3JTdGF0ZSA9IGZhbHNlO1xuICBwcml2YXRlIF9jb250cm9sITogTWF0Rm9ybUZpZWxkQ29udHJvbDxhbnk+O1xuXG4gIG5nT25Jbml0KCkge1xuICAgIGlmICh0aGlzLmZvcm1GaWVsZCkge1xuICAgICAgdGhpcy5mb3JtRmllbGQuX2NvbnRyb2wgPSB0aGlzLmZvcm1GaWVsZENvbnRyb2w7XG4gICAgfVxuICB9XG5cbiAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgIGlmICh0aGlzLm1hdFByZWZpeCB8fCB0aGlzLm1hdFN1ZmZpeCkge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGRlZmluZUhpZGRlblByb3AodGhpcy5maWVsZCwgJ19tYXRwcmVmaXgnLCB0aGlzLm1hdFByZWZpeCk7XG4gICAgICAgIGRlZmluZUhpZGRlblByb3AodGhpcy5maWVsZCwgJ19tYXRzdWZmaXgnLCB0aGlzLm1hdFN1ZmZpeCk7XG4gICAgICAgICg8YW55PiB0aGlzLm9wdGlvbnMpLl9tYXJrRm9yQ2hlY2sodGhpcy5maWVsZCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBuZ09uRGVzdHJveSgpIHtcbiAgICBpZiAodGhpcy5mb3JtRmllbGQpIHtcbiAgICAgIGRlbGV0ZSB0aGlzLmZvcm1GaWVsZC5fY29udHJvbDtcbiAgICB9XG4gICAgdGhpcy5zdGF0ZUNoYW5nZXMuY29tcGxldGUoKTtcbiAgfVxuXG4gIHNldERlc2NyaWJlZEJ5SWRzKGlkczogc3RyaW5nW10pOiB2b2lkIHsgfVxuICBvbkNvbnRhaW5lckNsaWNrKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy5maWVsZC5mb2N1cyA9IHRydWU7XG4gICAgdGhpcy5zdGF0ZUNoYW5nZXMubmV4dCgpO1xuICB9XG5cbiAgZ2V0IGVycm9yU3RhdGUoKSB7XG4gICAgY29uc3Qgc2hvd0Vycm9yID0gdGhpcy5vcHRpb25zIS5zaG93RXJyb3IhKHRoaXMpO1xuICAgIGlmIChzaG93RXJyb3IgIT09IHRoaXMuX2Vycm9yU3RhdGUpIHtcbiAgICAgIHRoaXMuX2Vycm9yU3RhdGUgPSBzaG93RXJyb3I7XG4gICAgICB0aGlzLnN0YXRlQ2hhbmdlcy5uZXh0KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNob3dFcnJvcjtcbiAgfVxuXG4gIGdldCBjb250cm9sVHlwZSgpIHtcbiAgICBpZiAodGhpcy50by50eXBlKSB7XG4gICAgICByZXR1cm4gdGhpcy50by50eXBlO1xuICAgIH1cblxuICAgIGlmICgoPGFueT4gdGhpcy5maWVsZC50eXBlKSBpbnN0YW5jZW9mIFR5cGUpIHtcbiAgICAgIHJldHVybiB0aGlzLmZpZWxkLnR5cGUhLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZmllbGQudHlwZSE7XG4gIH1cbiAgZ2V0IGZvY3VzZWQoKSB7IHJldHVybiAhIXRoaXMuZmllbGQuZm9jdXMgJiYgIXRoaXMuZGlzYWJsZWQ7IH1cbiAgZ2V0IGRpc2FibGVkKCkgeyByZXR1cm4gISF0aGlzLnRvLmRpc2FibGVkOyB9XG4gIGdldCByZXF1aXJlZCgpIHsgcmV0dXJuICEhdGhpcy50by5yZXF1aXJlZDsgfVxuICBnZXQgcGxhY2Vob2xkZXIoKSB7IHJldHVybiB0aGlzLnRvLnBsYWNlaG9sZGVyIHx8ICcnOyB9XG4gIGdldCBzaG91bGRQbGFjZWhvbGRlckZsb2F0KCkgeyByZXR1cm4gdGhpcy5zaG91bGRMYWJlbEZsb2F0OyB9XG4gIGdldCB2YWx1ZSgpIHsgcmV0dXJuIHRoaXMuZm9ybUNvbnRyb2wudmFsdWU7IH1cbiAgc2V0IHZhbHVlKHZhbHVlKSB7IHRoaXMuZm9ybUNvbnRyb2wucGF0Y2hWYWx1ZSh2YWx1ZSk7IH1cbiAgZ2V0IG5nQ29udHJvbCgpIHsgcmV0dXJuIHRoaXMuZm9ybUNvbnRyb2wgYXMgYW55OyB9XG4gIGdldCBlbXB0eSgpIHsgcmV0dXJuIHRoaXMudmFsdWUgPT09IHVuZGVmaW5lZCB8fCB0aGlzLnZhbHVlID09PSBudWxsIHx8IHRoaXMudmFsdWUgPT09ICcnOyB9XG4gIGdldCBzaG91bGRMYWJlbEZsb2F0KCkgeyByZXR1cm4gdGhpcy5mb2N1c2VkIHx8ICF0aGlzLmVtcHR5OyB9XG4gIGdldCBmb3JtRmllbGQoKTogTWF0Rm9ybUZpZWxkIHsgcmV0dXJuIHRoaXMuZmllbGQgPyAoPGFueT50aGlzLmZpZWxkKVsnX19mb3JtRmllbGRfXyddIDogbnVsbDsgfVxufVxuIl19