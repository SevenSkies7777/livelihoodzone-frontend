/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, ViewChild, Renderer2, ElementRef, ViewContainerRef } from '@angular/core';
import { FieldWrapper, ɵdefineHiddenProp as defineHiddenProp, FormlyConfig } from '@ngx-formly/core';
import { MatFormField } from '@angular/material/form-field';
import { MatFormFieldControl } from '@angular/material/form-field';
import { Subject } from 'rxjs';
import { FocusMonitor } from '@angular/cdk/a11y';
import { FieldType } from './field.type';
/**
 * @record
 */
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@ngx-formly/core';
import * as ɵngcc2 from '@angular/cdk/a11y';
import * as ɵngcc3 from '@angular/material/form-field';
import * as ɵngcc4 from '@angular/common';

var _c0 = ["fieldComponent"];
function FormlyWrapperFormField_mat_label_3_span_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "span", 8);
    ɵngcc0.ɵɵtext(1, "*");
    ɵngcc0.ɵɵelementEnd();
} }
function FormlyWrapperFormField_mat_label_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-label");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵtemplate(2, FormlyWrapperFormField_mat_label_3_span_2_Template, 2, 0, "span", 7);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ctx_r1.to.label, " ");
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r1.to.required && ctx_r1.to.hideRequiredMarker !== true);
} }
function FormlyWrapperFormField_ng_container_4_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainer(0);
} }
function FormlyWrapperFormField_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0, 9);
    ɵngcc0.ɵɵtemplate(1, FormlyWrapperFormField_ng_container_4_ng_container_1_Template, 1, 0, "ng-container", 10);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    var ctx_r2 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngTemplateOutlet", ctx_r2.to.prefix ? ctx_r2.to.prefix : ctx_r2.formlyField._matprefix);
} }
function FormlyWrapperFormField_ng_container_5_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainer(0);
} }
function FormlyWrapperFormField_ng_container_5_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0, 11);
    ɵngcc0.ɵɵtemplate(1, FormlyWrapperFormField_ng_container_5_ng_container_1_Template, 1, 0, "ng-container", 10);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    var ctx_r3 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngTemplateOutlet", ctx_r3.to.suffix ? ctx_r3.to.suffix : ctx_r3.formlyField._matsuffix);
} }
function FormlyWrapperFormField_mat_hint_8_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "mat-hint", 12);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r4 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("id", null);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ctx_r4.to.description);
} }
function MatFormlyFieldConfig() { }
if (false) {
    /** @type {?} */
    MatFormlyFieldConfig.prototype._matprefix;
    /** @type {?} */
    MatFormlyFieldConfig.prototype._matsuffix;
    /** @type {?} */
    MatFormlyFieldConfig.prototype.__formField__;
}
var FormlyWrapperFormField = /** @class */ (function (_super) {
    tslib_1.__extends(FormlyWrapperFormField, _super);
    function FormlyWrapperFormField(config, renderer, elementRef, focusMonitor) {
        var _this = _super.call(this) || this;
        _this.config = config;
        _this.renderer = renderer;
        _this.elementRef = elementRef;
        _this.focusMonitor = focusMonitor;
        _this.stateChanges = new Subject();
        _this._errorState = false;
        _this.initialGapCalculated = false;
        return _this;
    }
    /**
     * @return {?}
     */
    FormlyWrapperFormField.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.formField._control = this;
        defineHiddenProp(this.field, '__formField__', this.formField);
        /** @type {?} */
        var ref = this.config.resolveFieldTypeRef(this.formlyField);
        if (ref && !(ref.instance instanceof FieldType)) {
            console.warn("Component '" + ref.componentType.name + "' must extend 'FieldType' from '@ngx-formly/material/form-field'.");
        }
        // fix for https://github.com/angular/material2/issues/11437
        if (this.formlyField.hide && (/** @type {?} */ (this.formlyField.templateOptions)).appearance === 'outline') {
            this.initialGapCalculated = true;
        }
        this.focusMonitor.monitor(this.elementRef, true).subscribe((/**
         * @param {?} origin
         * @return {?}
         */
        function (origin) {
            if (!origin && _this.field.focus) {
                _this.field.focus = false;
            }
            _this.stateChanges.next();
        }));
    };
    /**
     * @return {?}
     */
    FormlyWrapperFormField.prototype.ngAfterContentChecked = /**
     * @return {?}
     */
    function () {
        if (!this.initialGapCalculated || this.formlyField.hide) {
            return;
        }
        this.formField.updateOutlineGap();
        this.initialGapCalculated = true;
    };
    /**
     * @return {?}
     */
    FormlyWrapperFormField.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        // temporary fix for https://github.com/angular/material2/issues/7891
        if (this.formField.appearance !== 'outline' && this.to.hideFieldUnderline === true) {
            /** @type {?} */
            var underlineElement = this.formField._elementRef.nativeElement.querySelector('.mat-form-field-underline');
            underlineElement && this.renderer.removeChild(underlineElement.parentNode, underlineElement);
        }
    };
    /**
     * @return {?}
     */
    FormlyWrapperFormField.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        delete this.formlyField.__formField__;
        this.stateChanges.complete();
        this.focusMonitor.stopMonitoring(this.elementRef);
    };
    /**
     * @param {?} ids
     * @return {?}
     */
    FormlyWrapperFormField.prototype.setDescribedByIds = /**
     * @param {?} ids
     * @return {?}
     */
    function (ids) { };
    /**
     * @param {?} event
     * @return {?}
     */
    FormlyWrapperFormField.prototype.onContainerClick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.formlyField.focus = true;
        this.stateChanges.next();
    };
    Object.defineProperty(FormlyWrapperFormField.prototype, "errorState", {
        get: /**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var showError = (/** @type {?} */ ((/** @type {?} */ (this.options)).showError))(this);
            if (showError !== this._errorState) {
                this._errorState = showError;
                this.stateChanges.next();
            }
            return showError;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormlyWrapperFormField.prototype, "controlType", {
        get: /**
         * @return {?}
         */
        function () { return this.to.type; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormlyWrapperFormField.prototype, "focused", {
        get: /**
         * @return {?}
         */
        function () { return !!this.formlyField.focus && !this.disabled; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormlyWrapperFormField.prototype, "disabled", {
        get: /**
         * @return {?}
         */
        function () { return !!this.to.disabled; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormlyWrapperFormField.prototype, "required", {
        get: /**
         * @return {?}
         */
        function () { return !!this.to.required; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormlyWrapperFormField.prototype, "placeholder", {
        get: /**
         * @return {?}
         */
        function () { return this.to.placeholder || ''; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormlyWrapperFormField.prototype, "shouldPlaceholderFloat", {
        get: /**
         * @return {?}
         */
        function () { return this.shouldLabelFloat; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormlyWrapperFormField.prototype, "value", {
        get: /**
         * @return {?}
         */
        function () { return this.formControl.value; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormlyWrapperFormField.prototype, "ngControl", {
        get: /**
         * @return {?}
         */
        function () { return (/** @type {?} */ (this.formControl)); },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormlyWrapperFormField.prototype, "empty", {
        get: /**
         * @return {?}
         */
        function () { return !this.formControl.value; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormlyWrapperFormField.prototype, "shouldLabelFloat", {
        get: /**
         * @return {?}
         */
        function () { return this.focused || !this.empty; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormlyWrapperFormField.prototype, "formlyField", {
        get: /**
         * @return {?}
         */
        function () { return (/** @type {?} */ (this.field)); },
        enumerable: true,
        configurable: true
    });
    /** @nocollapse */
    FormlyWrapperFormField.ctorParameters = function () { return [
        { type: FormlyConfig },
        { type: Renderer2 },
        { type: ElementRef },
        { type: FocusMonitor }
    ]; };
    FormlyWrapperFormField.propDecorators = {
        fieldComponent: [{ type: ViewChild, args: ['fieldComponent', (/** @type {?} */ ({ read: ViewContainerRef, static: true })),] }],
        formField: [{ type: ViewChild, args: [MatFormField, (/** @type {?} */ ({ static: true })),] }]
    };
FormlyWrapperFormField.ɵfac = function FormlyWrapperFormField_Factory(t) { return new (t || FormlyWrapperFormField)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.FormlyConfig), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.FocusMonitor)); };
FormlyWrapperFormField.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: FormlyWrapperFormField, selectors: [["formly-wrapper-mat-form-field"]], viewQuery: function FormlyWrapperFormField_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵstaticViewQuery(_c0, true, ViewContainerRef);
        ɵngcc0.ɵɵstaticViewQuery(MatFormField, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.fieldComponent = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.formField = _t.first);
    } }, features: [ɵngcc0.ɵɵProvidersFeature([{ provide: MatFormFieldControl, useExisting: FormlyWrapperFormField }]), ɵngcc0.ɵɵInheritDefinitionFeature], decls: 9, vars: 11, consts: [[3, "hideRequiredMarker", "floatLabel", "appearance", "color"], ["fieldComponent", ""], [4, "ngIf"], ["matPrefix", "", 4, "ngIf"], ["matSuffix", "", 4, "ngIf"], [3, "field"], [3, "id", 4, "ngIf"], ["class", "mat-form-field-required-marker", 4, "ngIf"], [1, "mat-form-field-required-marker"], ["matPrefix", ""], [4, "ngTemplateOutlet"], ["matSuffix", ""], [3, "id"]], template: function FormlyWrapperFormField_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "mat-form-field", 0);
        ɵngcc0.ɵɵelementContainer(1, null, 1);
        ɵngcc0.ɵɵtemplate(3, FormlyWrapperFormField_mat_label_3_Template, 3, 2, "mat-label", 2);
        ɵngcc0.ɵɵtemplate(4, FormlyWrapperFormField_ng_container_4_Template, 2, 1, "ng-container", 3);
        ɵngcc0.ɵɵtemplate(5, FormlyWrapperFormField_ng_container_5_Template, 2, 1, "ng-container", 4);
        ɵngcc0.ɵɵelementStart(6, "mat-error");
        ɵngcc0.ɵɵelement(7, "formly-validation-message", 5);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(8, FormlyWrapperFormField_mat_hint_8_Template, 2, 2, "mat-hint", 6);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵstyleProp("width", "100%");
        ɵngcc0.ɵɵproperty("hideRequiredMarker", true)("floatLabel", ctx.to.floatLabel)("appearance", ctx.to.appearance)("color", ctx.to.color);
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵproperty("ngIf", ctx.to.label && ctx.to.hideLabel !== true);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.to.prefix || ctx.formlyField._matprefix);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.to.suffix || ctx.formlyField._matsuffix);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("field", ctx.field);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.to.description);
    } }, directives: [ɵngcc3.MatFormField, ɵngcc4.NgIf, ɵngcc3.MatError, ɵngcc1.ɵc, ɵngcc3.MatLabel, ɵngcc3.MatPrefix, ɵngcc4.NgTemplateOutlet, ɵngcc3.MatSuffix, ɵngcc3.MatHint], encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(FormlyWrapperFormField, [{
        type: Component,
        args: [{
                selector: 'formly-wrapper-mat-form-field',
                template: "\n    <!-- fix https://github.com/angular/material2/pull/7083 by setting width to 100% -->\n    <mat-form-field\n      [hideRequiredMarker]=\"true\"\n      [floatLabel]=\"to.floatLabel\"\n      [appearance]=\"to.appearance\"\n      [color]=\"to.color\"\n      [style.width]=\"'100%'\">\n      <ng-container #fieldComponent></ng-container>\n      <mat-label *ngIf=\"to.label && to.hideLabel !== true\">\n        {{ to.label }}\n        <span *ngIf=\"to.required && to.hideRequiredMarker !== true\" class=\"mat-form-field-required-marker\">*</span>\n      </mat-label>\n\n      <ng-container matPrefix *ngIf=\"to.prefix || formlyField._matprefix\">\n        <ng-container *ngTemplateOutlet=\"to.prefix ? to.prefix : formlyField._matprefix\"></ng-container>\n      </ng-container>\n\n      <ng-container matSuffix *ngIf=\"to.suffix || formlyField._matsuffix\">\n        <ng-container *ngTemplateOutlet=\"to.suffix ? to.suffix : formlyField._matsuffix\"></ng-container>\n      </ng-container>\n\n      <mat-error>\n        <formly-validation-message [field]=\"field\"></formly-validation-message>\n      </mat-error>\n      <!-- fix https://github.com/angular/material2/issues/7737 by setting id to null  -->\n      <mat-hint *ngIf=\"to.description\" [id]=\"null\">{{ to.description }}</mat-hint>\n    </mat-form-field>\n  ",
                providers: [{ provide: MatFormFieldControl, useExisting: FormlyWrapperFormField }]
            }]
    }], function () { return [{ type: ɵngcc1.FormlyConfig }, { type: ɵngcc0.Renderer2 }, { type: ɵngcc0.ElementRef }, { type: ɵngcc2.FocusMonitor }]; }, { fieldComponent: [{
            type: ViewChild,
            args: ['fieldComponent', ( /** @type {?} */({ read: ViewContainerRef, static: true }))]
        }], formField: [{
            type: ViewChild,
            args: [MatFormField, ( /** @type {?} */({ static: true }))]
        }] }); })();
    return FormlyWrapperFormField;
}(FieldWrapper));
export { FormlyWrapperFormField };
if (false) {
    /** @type {?} */
    FormlyWrapperFormField.prototype.fieldComponent;
    /** @type {?} */
    FormlyWrapperFormField.prototype.formField;
    /** @type {?} */
    FormlyWrapperFormField.prototype.stateChanges;
    /** @type {?} */
    FormlyWrapperFormField.prototype._errorState;
    /**
     * @type {?}
     * @private
     */
    FormlyWrapperFormField.prototype.initialGapCalculated;
    /**
     * @type {?}
     * @private
     */
    FormlyWrapperFormField.prototype.config;
    /**
     * @type {?}
     * @private
     */
    FormlyWrapperFormField.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    FormlyWrapperFormField.prototype.elementRef;
    /**
     * @type {?}
     * @private
     */
    FormlyWrapperFormField.prototype.focusMonitor;
}

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybS1maWVsZC53cmFwcGVyLmpzIiwic291cmNlcyI6WyJAbmd4LWZvcm1seS9tYXRlcmlhbC9mb3JtLWZpZWxkL2Zvcm0tZmllbGQud3JhcHBlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFxQixTQUFTLEVBQW1ELFVBQVUsRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNsSyxPQUFPLEVBQUUsWUFBWSxFQUFFLGlCQUFpQixJQUFJLGdCQUFnQixFQUFxQixZQUFZLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUN4SCxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFDNUQsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFDbkUsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUMvQixPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDakQsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGNBQWMsQ0FBQztBQUN6QztBQUNHO0FBQVc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWQsbUNBSUM7QUFDRDtBQUNZO0FBQ1EsSUFObEIsMENBQTZCO0FBQy9CO0FBQXFCLElBQW5CLDBDQUE2QjtBQUMvQjtBQUFxQixJQUFuQiw2Q0FBc0M7QUFDeEM7QUFFQTtBQUVNLElBK0JzQyxrREFBa0M7QUFBQyxJQVc3RSxnQ0FDVSxNQUFvQixFQUNwQixRQUFtQixFQUNuQixVQUFzQixFQUN0QixZQUEwQjtBQUNwQyxRQUxBLFlBTUUsaUJBQU8sU0FDUjtBQUNILFFBUFksWUFBTSxHQUFOLE1BQU0sQ0FBYztBQUFDLFFBQ3JCLGNBQVEsR0FBUixRQUFRLENBQVc7QUFBQyxRQUNwQixnQkFBVSxHQUFWLFVBQVUsQ0FBWTtBQUFDLFFBQ3ZCLGtC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Ozs7Ozs7b0JBTTREO0FBQUMsSUF3RjlELDZCQUFDO0FBQ0EsQ0FEQSxBQTlIRCxDQWlDNEMsWUFBWSxHQTZGdkQ7QUFDRCxTQTlGYSxzQkFBc0I7QUFBSTtBQUFhO0FBQXFCLElBRXZFLGdEQUE4RztBQUNoSDtBQUNvQixJQUNsQiwyQ0FBMEU7QUFDNUU7QUFDb0IsSUFBbEIsOENBQW1DO0FBQ3JDO0FBQXFCLElBQW5CLDZDQUFvQjtBQUN0QjtBQUFRO0FBQWlCO0FBRXpCO0FBQVEsSUFGTixzREFBcUM7QUFDdkM7QUFDTztBQUNFO0FBQWdCO0FBQVEsSUFBN0Isd0NBQTRCO0FBQUM7QUFDMUI7QUFBaUI7QUFDakI7QUFBUSxJQURYLDBDQUEyQjtBQUFDO0FBQ3pCO0FBQWlCO0FBQ3BCO0FBQVEsSUFEUiw0Q0FBOEI7QUFBQztBQUM1QjtBQUFpQjtBQUN4QjtBQUNFLElBRkUsOENBQWtDO0FBQUM7QUFDdEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIFZpZXdDaGlsZCwgT25Jbml0LCBPbkRlc3Ryb3ksIFJlbmRlcmVyMiwgQWZ0ZXJWaWV3SW5pdCwgQWZ0ZXJDb250ZW50Q2hlY2tlZCwgVGVtcGxhdGVSZWYsIEVsZW1lbnRSZWYsIFZpZXdDb250YWluZXJSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEZpZWxkV3JhcHBlciwgybVkZWZpbmVIaWRkZW5Qcm9wIGFzIGRlZmluZUhpZGRlblByb3AsIEZvcm1seUZpZWxkQ29uZmlnLCBGb3JtbHlDb25maWcgfSBmcm9tICdAbmd4LWZvcm1seS9jb3JlJztcbmltcG9ydCB7IE1hdEZvcm1GaWVsZCB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2Zvcm0tZmllbGQnO1xuaW1wb3J0IHsgTWF0Rm9ybUZpZWxkQ29udHJvbCB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2Zvcm0tZmllbGQnO1xuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgRm9jdXNNb25pdG9yIH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2ExMXknO1xuaW1wb3J0IHsgRmllbGRUeXBlIH0gZnJvbSAnLi9maWVsZC50eXBlJztcblxuaW50ZXJmYWNlIE1hdEZvcm1seUZpZWxkQ29uZmlnIGV4dGVuZHMgRm9ybWx5RmllbGRDb25maWcge1xuICBfbWF0cHJlZml4OiBUZW1wbGF0ZVJlZjxhbnk+O1xuICBfbWF0c3VmZml4OiBUZW1wbGF0ZVJlZjxhbnk+O1xuICBfX2Zvcm1GaWVsZF9fOiBGb3JtbHlXcmFwcGVyRm9ybUZpZWxkO1xufVxuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdmb3JtbHktd3JhcHBlci1tYXQtZm9ybS1maWVsZCcsXG4gIHRlbXBsYXRlOiBgXG4gICAgPCEtLSBmaXggaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvbWF0ZXJpYWwyL3B1bGwvNzA4MyBieSBzZXR0aW5nIHdpZHRoIHRvIDEwMCUgLS0+XG4gICAgPG1hdC1mb3JtLWZpZWxkXG4gICAgICBbaGlkZVJlcXVpcmVkTWFya2VyXT1cInRydWVcIlxuICAgICAgW2Zsb2F0TGFiZWxdPVwidG8uZmxvYXRMYWJlbFwiXG4gICAgICBbYXBwZWFyYW5jZV09XCJ0by5hcHBlYXJhbmNlXCJcbiAgICAgIFtjb2xvcl09XCJ0by5jb2xvclwiXG4gICAgICBbc3R5bGUud2lkdGhdPVwiJzEwMCUnXCI+XG4gICAgICA8bmctY29udGFpbmVyICNmaWVsZENvbXBvbmVudD48L25nLWNvbnRhaW5lcj5cbiAgICAgIDxtYXQtbGFiZWwgKm5nSWY9XCJ0by5sYWJlbCAmJiB0by5oaWRlTGFiZWwgIT09IHRydWVcIj5cbiAgICAgICAge3sgdG8ubGFiZWwgfX1cbiAgICAgICAgPHNwYW4gKm5nSWY9XCJ0by5yZXF1aXJlZCAmJiB0by5oaWRlUmVxdWlyZWRNYXJrZXIgIT09IHRydWVcIiBjbGFzcz1cIm1hdC1mb3JtLWZpZWxkLXJlcXVpcmVkLW1hcmtlclwiPio8L3NwYW4+XG4gICAgICA8L21hdC1sYWJlbD5cblxuICAgICAgPG5nLWNvbnRhaW5lciBtYXRQcmVmaXggKm5nSWY9XCJ0by5wcmVmaXggfHwgZm9ybWx5RmllbGQuX21hdHByZWZpeFwiPlxuICAgICAgICA8bmctY29udGFpbmVyICpuZ1RlbXBsYXRlT3V0bGV0PVwidG8ucHJlZml4ID8gdG8ucHJlZml4IDogZm9ybWx5RmllbGQuX21hdHByZWZpeFwiPjwvbmctY29udGFpbmVyPlxuICAgICAgPC9uZy1jb250YWluZXI+XG5cbiAgICAgIDxuZy1jb250YWluZXIgbWF0U3VmZml4ICpuZ0lmPVwidG8uc3VmZml4IHx8IGZvcm1seUZpZWxkLl9tYXRzdWZmaXhcIj5cbiAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cInRvLnN1ZmZpeCA/IHRvLnN1ZmZpeCA6IGZvcm1seUZpZWxkLl9tYXRzdWZmaXhcIj48L25nLWNvbnRhaW5lcj5cbiAgICAgIDwvbmctY29udGFpbmVyPlxuXG4gICAgICA8bWF0LWVycm9yPlxuICAgICAgICA8Zm9ybWx5LXZhbGlkYXRpb24tbWVzc2FnZSBbZmllbGRdPVwiZmllbGRcIj48L2Zvcm1seS12YWxpZGF0aW9uLW1lc3NhZ2U+XG4gICAgICA8L21hdC1lcnJvcj5cbiAgICAgIDwhLS0gZml4IGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL21hdGVyaWFsMi9pc3N1ZXMvNzczNyBieSBzZXR0aW5nIGlkIHRvIG51bGwgIC0tPlxuICAgICAgPG1hdC1oaW50ICpuZ0lmPVwidG8uZGVzY3JpcHRpb25cIiBbaWRdPVwibnVsbFwiPnt7IHRvLmRlc2NyaXB0aW9uIH19PC9tYXQtaGludD5cbiAgICA8L21hdC1mb3JtLWZpZWxkPlxuICBgLFxuICBwcm92aWRlcnM6IFt7IHByb3ZpZGU6IE1hdEZvcm1GaWVsZENvbnRyb2wsIHVzZUV4aXN0aW5nOiBGb3JtbHlXcmFwcGVyRm9ybUZpZWxkIH1dLFxufSlcbmV4cG9ydCBjbGFzcyBGb3JtbHlXcmFwcGVyRm9ybUZpZWxkIGV4dGVuZHMgRmllbGRXcmFwcGVyPE1hdEZvcm1seUZpZWxkQ29uZmlnPiBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95LCBNYXRGb3JtRmllbGRDb250cm9sPGFueT4sIEFmdGVyVmlld0luaXQsIEFmdGVyQ29udGVudENoZWNrZWQge1xuICAvLyBUT0RPOiByZW1vdmUgYGFueWAsIG9uY2UgZHJvcHBpbmcgYW5ndWxhciBgVjdgIHN1cHBvcnQuXG4gIEBWaWV3Q2hpbGQoJ2ZpZWxkQ29tcG9uZW50JywgPGFueT57IHJlYWQ6IFZpZXdDb250YWluZXJSZWYsIHN0YXRpYzogdHJ1ZSB9KSBmaWVsZENvbXBvbmVudCE6IFZpZXdDb250YWluZXJSZWY7XG5cbiAgLy8gVE9ETzogcmVtb3ZlIGBhbnlgLCBvbmNlIGRyb3BwaW5nIGFuZ3VsYXIgYFY3YCBzdXBwb3J0LlxuICBAVmlld0NoaWxkKE1hdEZvcm1GaWVsZCwgPGFueT4geyBzdGF0aWM6IHRydWUgfSkgZm9ybUZpZWxkITogTWF0Rm9ybUZpZWxkO1xuXG4gIHN0YXRlQ2hhbmdlcyA9IG5ldyBTdWJqZWN0PHZvaWQ+KCk7XG4gIF9lcnJvclN0YXRlID0gZmFsc2U7XG4gIHByaXZhdGUgaW5pdGlhbEdhcENhbGN1bGF0ZWQgPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGNvbmZpZzogRm9ybWx5Q29uZmlnLFxuICAgIHByaXZhdGUgcmVuZGVyZXI6IFJlbmRlcmVyMixcbiAgICBwcml2YXRlIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYsXG4gICAgcHJpdmF0ZSBmb2N1c01vbml0b3I6IEZvY3VzTW9uaXRvcixcbiAgKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMuZm9ybUZpZWxkLl9jb250cm9sID0gdGhpcztcbiAgICBkZWZpbmVIaWRkZW5Qcm9wKHRoaXMuZmllbGQsICdfX2Zvcm1GaWVsZF9fJywgdGhpcy5mb3JtRmllbGQpO1xuXG4gICAgY29uc3QgcmVmID0gdGhpcy5jb25maWcucmVzb2x2ZUZpZWxkVHlwZVJlZih0aGlzLmZvcm1seUZpZWxkKTtcbiAgICBpZiAocmVmICYmICEocmVmLmluc3RhbmNlIGluc3RhbmNlb2YgRmllbGRUeXBlKSkge1xuICAgICAgY29uc29sZS53YXJuKGBDb21wb25lbnQgJyR7cmVmLmNvbXBvbmVudFR5cGUubmFtZX0nIG11c3QgZXh0ZW5kICdGaWVsZFR5cGUnIGZyb20gJ0BuZ3gtZm9ybWx5L21hdGVyaWFsL2Zvcm0tZmllbGQnLmApO1xuICAgIH1cblxuICAgIC8vIGZpeCBmb3IgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvbWF0ZXJpYWwyL2lzc3Vlcy8xMTQzN1xuICAgIGlmICh0aGlzLmZvcm1seUZpZWxkLmhpZGUgJiYgdGhpcy5mb3JtbHlGaWVsZC50ZW1wbGF0ZU9wdGlvbnMhLmFwcGVhcmFuY2UgPT09ICdvdXRsaW5lJykge1xuICAgICAgdGhpcy5pbml0aWFsR2FwQ2FsY3VsYXRlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgdGhpcy5mb2N1c01vbml0b3IubW9uaXRvcih0aGlzLmVsZW1lbnRSZWYsIHRydWUpLnN1YnNjcmliZShvcmlnaW4gPT4ge1xuICAgICAgaWYgKCFvcmlnaW4gJiYgdGhpcy5maWVsZC5mb2N1cykge1xuICAgICAgICB0aGlzLmZpZWxkLmZvY3VzID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc3RhdGVDaGFuZ2VzLm5leHQoKTtcbiAgICB9KTtcbiAgfVxuXG4gIG5nQWZ0ZXJDb250ZW50Q2hlY2tlZCgpIHtcbiAgICBpZiAoIXRoaXMuaW5pdGlhbEdhcENhbGN1bGF0ZWQgfHwgdGhpcy5mb3JtbHlGaWVsZC5oaWRlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5mb3JtRmllbGQudXBkYXRlT3V0bGluZUdhcCgpO1xuICAgIHRoaXMuaW5pdGlhbEdhcENhbGN1bGF0ZWQgPSB0cnVlO1xuICB9XG5cbiAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgIC8vIHRlbXBvcmFyeSBmaXggZm9yIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL21hdGVyaWFsMi9pc3N1ZXMvNzg5MVxuICAgIGlmICh0aGlzLmZvcm1GaWVsZC5hcHBlYXJhbmNlICE9PSAnb3V0bGluZScgJiYgdGhpcy50by5oaWRlRmllbGRVbmRlcmxpbmUgPT09IHRydWUpIHtcbiAgICAgIGNvbnN0IHVuZGVybGluZUVsZW1lbnQgPSB0aGlzLmZvcm1GaWVsZC5fZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYXQtZm9ybS1maWVsZC11bmRlcmxpbmUnKTtcbiAgICAgIHVuZGVybGluZUVsZW1lbnQgJiYgdGhpcy5yZW5kZXJlci5yZW1vdmVDaGlsZCh1bmRlcmxpbmVFbGVtZW50LnBhcmVudE5vZGUsIHVuZGVybGluZUVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICAgIGRlbGV0ZSB0aGlzLmZvcm1seUZpZWxkLl9fZm9ybUZpZWxkX187XG4gICAgdGhpcy5zdGF0ZUNoYW5nZXMuY29tcGxldGUoKTtcbiAgICB0aGlzLmZvY3VzTW9uaXRvci5zdG9wTW9uaXRvcmluZyh0aGlzLmVsZW1lbnRSZWYpO1xuICB9XG5cbiAgc2V0RGVzY3JpYmVkQnlJZHMoaWRzOiBzdHJpbmdbXSk6IHZvaWQgeyB9XG4gIG9uQ29udGFpbmVyQ2xpY2soZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLmZvcm1seUZpZWxkLmZvY3VzID0gdHJ1ZTtcbiAgICB0aGlzLnN0YXRlQ2hhbmdlcy5uZXh0KCk7XG4gIH1cblxuICBnZXQgZXJyb3JTdGF0ZSgpIHtcbiAgICBjb25zdCBzaG93RXJyb3IgPSB0aGlzLm9wdGlvbnMhLnNob3dFcnJvciEodGhpcyk7XG4gICAgaWYgKHNob3dFcnJvciAhPT0gdGhpcy5fZXJyb3JTdGF0ZSkge1xuICAgICAgdGhpcy5fZXJyb3JTdGF0ZSA9IHNob3dFcnJvcjtcbiAgICAgIHRoaXMuc3RhdGVDaGFuZ2VzLm5leHQoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2hvd0Vycm9yO1xuICB9XG4gIGdldCBjb250cm9sVHlwZSgpIHsgcmV0dXJuIHRoaXMudG8udHlwZTsgfVxuICBnZXQgZm9jdXNlZCgpIHsgcmV0dXJuICEhdGhpcy5mb3JtbHlGaWVsZC5mb2N1cyAmJiAhdGhpcy5kaXNhYmxlZDsgfVxuICBnZXQgZGlzYWJsZWQoKSB7IHJldHVybiAhIXRoaXMudG8uZGlzYWJsZWQ7IH1cbiAgZ2V0IHJlcXVpcmVkKCkgeyByZXR1cm4gISF0aGlzLnRvLnJlcXVpcmVkOyB9XG4gIGdldCBwbGFjZWhvbGRlcigpIHsgcmV0dXJuIHRoaXMudG8ucGxhY2Vob2xkZXIgfHwgJyc7IH1cbiAgZ2V0IHNob3VsZFBsYWNlaG9sZGVyRmxvYXQoKSB7IHJldHVybiB0aGlzLnNob3VsZExhYmVsRmxvYXQ7IH1cbiAgZ2V0IHZhbHVlKCkgeyByZXR1cm4gdGhpcy5mb3JtQ29udHJvbC52YWx1ZTsgfVxuICBnZXQgbmdDb250cm9sKCkgeyByZXR1cm4gdGhpcy5mb3JtQ29udHJvbCBhcyBhbnk7IH1cbiAgZ2V0IGVtcHR5KCkgeyByZXR1cm4gIXRoaXMuZm9ybUNvbnRyb2wudmFsdWU7IH1cbiAgZ2V0IHNob3VsZExhYmVsRmxvYXQoKSB7IHJldHVybiB0aGlzLmZvY3VzZWQgfHwgIXRoaXMuZW1wdHk7IH1cblxuICBnZXQgZm9ybWx5RmllbGQoKSB7IHJldHVybiB0aGlzLmZpZWxkIGFzIE1hdEZvcm1seUZpZWxkQ29uZmlnOyB9XG59XG4iXX0=