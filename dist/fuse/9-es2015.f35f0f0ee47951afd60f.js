(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{QPPP:function(t,e,i){"use strict";i.r(e),i.d(e,"OrganizationModule",(function(){return cs}));var n=i("iInd"),a=i("5HBU"),o=i("RT2w"),s=i("s7LF"),c=i("SVse"),r=i("Tj54"),l=i("PDjf"),b=i("Dxy4"),d=i("rJgo"),p=i("e6WT"),g=i("pu8Q"),m=i("HNXS"),u=i("2l/B"),h=i("LvDl");const f=[{key:"application",context:"Application",steps:[{count:1,label:"Basic Details",shortLabel:"Basic",help_text:"Step 1",icon:"work",template:"one",formConf:{store:"applications",cancelTxt:"CANCEL",nextTxt:"NEXT",addStore:"auto-create-application",editStore:"applications",getStore:"applications"},active:!1},{count:2,label:"Application Billabe Items",shortLabel:"Items",help_text:"Step 2",icon:"list_alt",template:"two",inlineConf:{store:"visit",cancelTxt:"BACK",nextTxt:"COMPLETE",editStore:"visits",getStore:"visits"},active:!1,modelKey:"application",listParams:{member_null:!0},gridConf:{store:"applications",modelKey:"application",listParams:{member_null:!0},getStore:"application-items",editStore:"application-items",topActions:[{btnText:"ADD BILLABLE ITEM",status:"info",icon:"true",action:"inline",conf:{context:"BILLABLE ITEM",store:"application-items",btnText:"SAVE"}}],rows:[{key:"item",type:"compact-line",context:"billable-item",fieldType:"nested_string",primaryField:"item_data.name"},{key:"item",type:"compact-line",context:"billable-item",fieldType:"activity_details",primaryField:"item_data.name"},{key:"item",type:"compact-line",context:"billable-item",fieldType:"nested_status_total",primaryField:"item_data.name"},{key:"item",type:"compact-line",context:"billable-item",fieldType:"nested_totals",primaryField:"item_data.name"}],headers:[{title:"Item"},{title:"Activity Item"},{title:"Total"},{title:"Approved Totals"},{title:"Actions",oderable:!1,searchable:!1}],actions:[{btnText:"EDIT",status:"info",icon:!1,disableStatus:"FINISHED",action:"inline",modalConf:{store:"application-items",titleKey:"item",context:"Billable Item",btnText:"SAVE"}}]}},{count:3,label:"Event Attendees",shortLabel:"Attendees",help_text:"Step 3",icon:"people",template:"two",inlineConf:{store:"visit",cancelTxt:"BACK",nextTxt:"COMPLETE",editStore:"visits",getStore:"visits"},active:!1,gridConf:{store:"applications",modelKey:"application",listParams:{member_null:!1},getStore:"application-attendees",editStore:"application-attendees",topActions:[{btnText:"ADD ATTENDEE",status:"info",icon:"true",action:"inline",conf:{context:"ATTENDEE",store:"application-attendees",btnText:"SAVE"}}],rows:[{key:"item",type:"compact-line",context:"attendees",fieldType:"nested_string",primaryField:"item_data.name"},{key:"item",type:"compact-line",context:"billable-item",fieldType:"activity_details",primaryField:"item_data.name"},{key:"item",type:"compact-line",context:"billable-item",fieldType:"nested_status_total",primaryField:"item_data.name"},{key:"item",type:"compact-line",context:"billable-item",fieldType:"nested_totals",primaryField:"item_data.name"}],headers:[{title:"Member"},{title:"Activity Details"},{title:"Totals"},{title:"Approved Totals"},{title:"Actions",oderable:!1,searchable:!1}],actions:[{btnText:"EDIT",status:"info",icon:!1,disableStatus:"FINISHED",action:"inline",modalConf:{store:"application-attendees",titleKey:"item",context:"Attendee",btnText:"SAVE"}}]}},{count:4,label:"Event Allowances",shortLabel:"Allowances",help_text:"Step 4",icon:"account_balance_wallet",template:"five",inlineConf:{store:"visit",cancelTxt:"BACK",nextTxt:"COMPLETE",editStore:"visits",getStore:"visits"},active:!1,gridConf:{store:"applications",modelKey:"application",getStore:"application-allowances",editStore:"application-allowances",topActions:[{btnText:"ADD ALLOWANCE",status:"info",icon:"true",action:"inline",conf:{context:"ALLOWANCES",store:"application-allowances",btnText:"SAVE"}}],rows:[{key:"item",type:"compact-line",context:"allowances",fieldType:"nested_member",primaryField:"item_data.name"},{key:"item",type:"compact-line",context:"billable-item",fieldType:"nested_status_total",primaryField:"item_data.name"},{key:"item",type:"compact-line",context:"billable-item",fieldType:"nested_totals",primaryField:"item_data.name"}],headers:[{title:"Allowance"},{title:"Totals"},{title:"Approved Totals"},{title:"Actions",oderable:!1,searchable:!1}],actions:[{btnText:"EDIT",status:"info",icon:"edit",disableStatus:"FINISHED",action:"inline",modalConf:{store:"application-allowances",titleKey:"item",context:"Allowance",btnText:"SAVE"}},{btnText:"Rationalize",status:"draft",icon:"compare_arrows",disableStatus:"FINISHED",class:"text-success",action:"modal",modalConf:{store:"application-items",titleKey:"item",context:"rationalize",btnText:"SAVE",width:"50%"}},{btnText:"Approve",status:"rationalized",icon:"check",class:"text-success",disableStatus:"FINISHED",action:"modal",modalConf:{store:"application-items",titleKey:"item",context:"approve",btnText:"SAVE",width:"50%"}},{btnText:"Reject",status:"rationalize",icon:"close",class:"text-danger",disableStatus:"FINISHED",action:"modal",modalConf:{store:"application-items",titleKey:"item",context:"reject",btnText:"SAVE",width:"50%"}}]}},{count:5,label:"Application Attachments",shortLabel:"Attachments",help_text:"Step 5",icon:"attach_file",template:"three",inlineConf:{store:"visit",cancelTxt:"BACK",nextTxt:"COMPLETE",editStore:"visits",getStore:"visits"},active:!1,gridConf:{store:"applications",getStore:"application-attachments",editStore:"application-attachments",topActions:[{btnText:"ADD ACTIVITY",status:"info",icon:"true",action:"inline",conf:{context:"BRANCH",store:"branches",btnText:"SAVE"}}],rows:[{key:"amount",type:"string"},{key:"financial_year",type:"string"},{key:"status",type:"string"}],headers:[{title:"Amount"},{title:"Financial Year"},{title:"Status"},{title:"Actions",oderable:!1,searchable:!1}],actions:[{btnText:"EDIT",status:"info",icon:!1,disableStatus:"FINISHED",action:"inline",modalConf:{store:"organization-budgets",titleKey:"name",context:"Organization Budget",btnText:"SAVE"}}]}},{count:6,label:"Alternative Fundings",shortLabel:"Other Funds",help_text:"Step 6",icon:"attach_money",template:"two",inlineConf:{store:"visit",cancelTxt:"BACK",nextTxt:"COMPLETE",editStore:"visits",getStore:"visits"},active:!1,gridConf:{store:"applications",modelKey:"application",getStore:"application-alternate-funding-sources",editStore:"application-alternate-funding-sources",topActions:[{btnText:"ADD ALTERNATIVE FUND",status:"info",icon:"true",action:"inline",conf:{context:"ALTERNATIVE FUNDING",store:"application-alternate-funding-sources",btnText:"SAVE"}}],rows:[{key:"entity_name",type:"string"},{key:"estimated_amount",type:"currency"},{key:"description",type:"string"}],headers:[{title:"Entity Name"},{title:"Estimated Amount"},{title:"Description"},{title:"Actions",oderable:!1,searchable:!1}],actions:[{btnText:"EDIT",status:"info",icon:!1,disableStatus:"FINISHED",action:"inline",modalConf:{store:"application-alternate-funding-sources",titleKey:"entity_name",context:"Alternative Funding",btnText:"SAVE"}}]}}]},{key:"organization",context:"Organization",steps:[{count:1,label:"Basic Details",shortLabel:"Basic",help_text:"Step 1",icon:"work",template:"one",formConf:{store:"organizations",cancelTxt:"CANCEL",nextTxt:"MEMBERS",addStore:"organizations",editStore:"organizations",getStore:"organizations"},active:!1},{count:2,label:"Athletes & Officials",shortLabel:"Members",help_text:"Step 2",icon:"group",template:"two",inlineConf:{store:"visit",cancelTxt:"BACK",nextTxt:"COMPLETE",editStore:"visits",getStore:"visits"},active:!1,gridConf:{store:"organizations",getStore:"organization-members",editStore:"organization-members",modelKey:"organization",topActions:[{btnText:"ADD MEMBER",status:"info",icon:"true",action:"inline",conf:{context:"MEMBER",store:"organization-members",btnText:"SAVE"}}],rows:[{key:"federation_number",fieldType:"nested_string",type:"nested",primaryField:"user.federation_number"},{key:"user.first_name",fieldType:"nested_multistrings",type:"nested",primaryField:"user.first_name",secondaryField:"user.last_name"},{key:"user.dob",fieldType:"nested_string",type:"nested",primaryField:"user.dob"},{key:"user.email",fieldType:"nested_string",type:"nested",primaryField:"user.email"},{key:"user.phone_number",fieldType:"nested_string",type:"nested",primaryField:"user.phone_number"},{key:"sports_category",type:"string"}],headers:[{title:"Federation #"},{title:"Names"},{title:"Date of Birth"},{title:"Email"},{title:"Phone #"},{title:"Sports Category"},{title:"Actions",oderable:!1,searchable:!1}],actions:[{btnText:"EDIT",status:"info",icon:!1,disableStatus:"FINISHED",action:"inline",modalConf:{store:"organization-members",titleKey:"first_name",context:"Member",btnText:"SAVE"}}]}},{count:3,label:"Bank Account",shortLabel:"Account",help_text:"Step 3",icon:"account_balance",template:"four",inlineConf:{store:"visit",cancelTxt:"BACK",nextTxt:"COMPLETE",editStore:"visits",getStore:"visits"},active:!1,gridConf:{store:"organizations",modelKey:"organization",getStore:"organization-bank-accounts",editStore:"organization-bank-accounts",topActions:[{btnText:"ADD BANK ACCOUNT",status:"info",icon:"true",action:"inline",conf:{context:"BRANCH",store:"branches",btnText:"SAVE"}}],rows:[{key:"amount",type:"string"},{key:"financial_year",type:"string"},{key:"status",type:"string"}],headers:[{title:"Amount"},{title:"Financial Year"},{title:"Status"},{title:"Actions",oderable:!1,searchable:!1}],actions:[{btnText:"EDIT",status:"info",icon:!1,disableStatus:"FINISHED",action:"inline",modalConf:{store:"organization-budgets",titleKey:"name",context:"Organization Budget",btnText:"SAVE"}}]}}]},{key:"budget",context:"Calendar of Events",steps:[{count:1,label:"Basic Details",shortLabel:"Basic",help_text:"Step 1",icon:"work",template:"one",formConf:{store:"organization-budgets",cancelTxt:"CANCEL",nextTxt:"NEXT",addStore:"organization-budgets",editStore:"organization-budgets",getStore:"organization-budgets"},active:!1},{count:2,label:"Budgeted Activities",shortLabel:"Activities",help_text:"Step 2",icon:"directions_run",template:"six",inlineConf:{store:"visit",cancelTxt:"BACK",nextTxt:"COMPLETE",editStore:"visits",getStore:"visits"},active:!1,gridConf:{store:"organization-budgets",modelKey:"org_budget",getStore:"organization-budget-activities",editStore:"organization-budget-activities",topActions:[{btnText:"ADD ACTIVITY",status:"info",icon:"true",action:"inline",conf:{context:"Budget Activity",store:"organization-budget-activities",btnText:"SAVE"}}],rows:[{key:"title",type:"string"},{key:"activity_date",type:"date"},{key:"estimated_amount",type:"currency"},{key:"status",type:"status"}],headers:[{title:"Title"},{title:"Activity Date"},{title:"Estimated Amount"},{title:"Status"},{title:"Actions",oderable:!1,searchable:!1}],actions:[{btnText:"EDIT",status:"info",icon:!1,disableStatus:"FINISHED",action:"inline",modalConf:{store:"organization-budget-activities",titleKey:"name",context:"Budget Activity",btnText:"SAVE"}}]}},{count:3,label:"Statutory Attachments",shortLabel:"Attachments",help_text:"Step 3",icon:"attach_file",template:"three",inlineConf:{store:"visit",cancelTxt:"BACK",nextTxt:"COMPLETE",editStore:"visits",getStore:"visits"},active:!1,gridConf:{store:"applications",getStore:"application-attachments",editStore:"application-attachments",topActions:[{btnText:"ADD ACTIVITY",status:"info",icon:"true",action:"inline",conf:{context:"BRANCH",store:"branches",btnText:"SAVE"}}],rows:[{key:"amount",type:"string"},{key:"financial_year",type:"string"},{key:"status",type:"string"}],headers:[{title:"Amount"},{title:"Financial Year"},{title:"Status"},{title:"Actions",oderable:!1,searchable:!1}],actions:[{btnText:"EDIT",status:"info",icon:!1,disableStatus:"FINISHED",action:"inline",modalConf:{store:"organization-budgets",titleKey:"name",context:"Organization Budget",btnText:"SAVE"}}]}},{count:4,label:"Additional Attachments",shortLabel:"Documents",help_text:"Step 4",icon:"insert_drive_file",template:"three",inlineConf:{store:"visit",cancelTxt:"BACK",nextTxt:"COMPLETE",editStore:"visits",getStore:"visits"},active:!1,gridConf:{store:"organization-budgets",getStore:"organization-budgets",editStore:"organization-budgets",attachmentStore:"organization-budget-attachments",headerAction:!0,topActions:[{btnText:"ADD ACTIVITY",status:"info",icon:"true",action:"inline",conf:{context:"BRANCH",store:"branches",btnText:"SAVE"}}],rows:[{key:"amount",type:"string"},{key:"financial_year",type:"string"},{key:"status",type:"string"}],headers:[{title:"Amount"},{title:"Financial Year"},{title:"Status"},{title:"Actions",oderable:!1,searchable:!1}],actions:[{btnText:"EDIT",status:"info",icon:!1,disableStatus:"FINISHED",action:"inline",modalConf:{store:"organization-budgets",titleKey:"name",context:"Organization Budget",btnText:"SAVE"}}]}}]}];var T=i("8Y7J");let v=(()=>{class t{constructor(){this.stepsArray=f}getSteps(t){return h.get(h.find(this.stepsArray,{key:t}),"steps",[])}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=T.Kb({token:t,factory:t.\u0275fac}),t})();var y=i("YEUz"),_=i("9b/N"),x=i("1z/I"),U=i("UhP/"),O=i("omvX"),w=i("XNiG"),C=i("quSY"),A=i("VRyK"),I=i("xgIS"),L=i("LRne"),S=i("PqYM"),k=i("GS7A"),z=i("JX91"),B=i("/uUt"),P=i("1G5W"),E=i("8LU1"),M=i("SCoL"),D=i("Ht+U"),F=i("9gLZ"),N=i("7KAL");function j(t,e){1&t&&T.kc(0)}const R=["*"];function J(t,e){}const V=function(t){return{animationDuration:t}},K=function(t,e){return{value:t,params:e}},H=["tabBodyWrapper"],$=["tabHeader"];function G(t,e){}function q(t,e){if(1&t&&T.Jc(0,G,0,0,"ng-template",9),2&t){const t=T.gc().$implicit;T.mc("cdkPortalOutlet",t.templateLabel)}}function W(t,e){if(1&t&&T.Lc(0),2&t){const t=T.gc().$implicit;T.Mc(t.textLabel)}}function Y(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div",6),T.cc("click",(function(){T.zc(t);const i=e.$implicit,n=e.index,a=T.gc(),o=T.vc(1);return a._handleClick(i,o,n)})),T.Ub(1,"div",7),T.Jc(2,q,1,1,"ng-template",8),T.Jc(3,W,1,1,"ng-template",8),T.Tb(),T.Tb()}if(2&t){const t=e.$implicit,i=e.index,n=T.gc();T.Gb("mat-tab-label-active",n.selectedIndex==i),T.mc("id",n._getTabLabelId(i))("disabled",t.disabled)("matRippleDisabled",t.disabled||n.disableRipple),T.Cb("tabIndex",n._getTabIndex(t,i))("aria-posinset",i+1)("aria-setsize",n._tabs.length)("aria-controls",n._getTabContentId(i))("aria-selected",n.selectedIndex==i)("aria-label",t.ariaLabel||null)("aria-labelledby",!t.ariaLabel&&t.ariaLabelledby?t.ariaLabelledby:null),T.Bb(2),T.mc("ngIf",t.templateLabel),T.Bb(1),T.mc("ngIf",!t.templateLabel)}}function Z(t,e){if(1&t){const t=T.Vb();T.Ub(0,"mat-tab-body",10),T.cc("_onCentered",(function(){return T.zc(t),T.gc()._removeTabBodyWrapperHeight()}))("_onCentering",(function(e){return T.zc(t),T.gc()._setTabBodyWrapperHeight(e)})),T.Tb()}if(2&t){const t=e.$implicit,i=e.index,n=T.gc();T.Gb("mat-tab-body-active",n.selectedIndex==i),T.mc("id",n._getTabContentId(i))("content",t.content)("position",t.position)("origin",t.origin)("animationDuration",n.animationDuration),T.Cb("aria-labelledby",n._getTabLabelId(i))}}const Q=["tabListContainer"],X=["tabList"],tt=["nextPaginator"],et=["previousPaginator"],it=new T.r("MatInkBarPositioner",{providedIn:"root",factory:function(){return t=>({left:t?(t.offsetLeft||0)+"px":"0",width:t?(t.offsetWidth||0)+"px":"0"})}});let nt=(()=>{class t{constructor(t,e,i,n){this._elementRef=t,this._ngZone=e,this._inkBarPositioner=i,this._animationMode=n}alignToElement(t){this.show(),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._setStyles(t))}):this._setStyles(t)}show(){this._elementRef.nativeElement.style.visibility="visible"}hide(){this._elementRef.nativeElement.style.visibility="hidden"}_setStyles(t){const e=this._inkBarPositioner(t),i=this._elementRef.nativeElement;i.style.left=e.left,i.style.width=e.width}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(T.l),T.Ob(T.A),T.Ob(it),T.Ob(O.a,8))},t.\u0275dir=T.Jb({type:t,selectors:[["mat-ink-bar"]],hostAttrs:[1,"mat-ink-bar"],hostVars:2,hostBindings:function(t,e){2&t&&T.Gb("_mat-animation-noopable","NoopAnimations"===e._animationMode)}}),t})();const at=new T.r("MatTabContent"),ot=new T.r("MatTabLabel");let st=(()=>{class t extends x.b{}return t.\u0275fac=function(e){return ct(e||t)},t.\u0275dir=T.Jb({type:t,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],features:[T.Ab([{provide:ot,useExisting:t}]),T.yb]}),t})();const ct=T.Wb(st);class rt{}const lt=Object(U.x)(rt),bt=new T.r("MAT_TAB_GROUP");let dt=(()=>{class t extends lt{constructor(t,e){super(),this._viewContainerRef=t,this._closestTabGroup=e,this.textLabel="",this._contentPortal=null,this._stateChanges=new w.a,this.position=null,this.origin=null,this.isActive=!1}get templateLabel(){return this._templateLabel}set templateLabel(t){this._setTemplateLabelInput(t)}get content(){return this._contentPortal}ngOnChanges(t){(t.hasOwnProperty("textLabel")||t.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new x.h(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(t){t&&(this._templateLabel=t)}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(T.Q),T.Ob(bt,8))},t.\u0275cmp=T.Ib({type:t,selectors:[["mat-tab"]],contentQueries:function(t,e,i){var n;1&t&&(T.Hb(i,ot,!0),T.Ec(i,at,!0,T.M)),2&t&&(T.uc(n=T.dc())&&(e.templateLabel=n.first),T.uc(n=T.dc())&&(e._explicitContent=n.first))},viewQuery:function(t,e){var i;1&t&&T.Fc(T.M,!0),2&t&&T.uc(i=T.dc())&&(e._implicitContent=i.first)},inputs:{disabled:"disabled",textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"]},exportAs:["matTab"],features:[T.yb,T.zb],ngContentSelectors:R,decls:1,vars:0,template:function(t,e){1&t&&(T.lc(),T.Jc(0,j,1,0,"ng-template"))},encapsulation:2}),t})();const pt={translateTab:Object(k.p)("translateTab",[Object(k.m)("center, void, left-origin-center, right-origin-center",Object(k.n)({transform:"none"})),Object(k.m)("left",Object(k.n)({transform:"translate3d(-100%, 0, 0)",minHeight:"1px"})),Object(k.m)("right",Object(k.n)({transform:"translate3d(100%, 0, 0)",minHeight:"1px"})),Object(k.o)("* => left, * => right, left => center, right => center",Object(k.e)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),Object(k.o)("void => left-origin-center",[Object(k.n)({transform:"translate3d(-100%, 0, 0)"}),Object(k.e)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),Object(k.o)("void => right-origin-center",[Object(k.n)({transform:"translate3d(100%, 0, 0)"}),Object(k.e)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let gt=(()=>{class t extends x.c{constructor(t,e,i,n){super(t,e,n),this._host=i,this._centeringSub=C.a.EMPTY,this._leavingSub=C.a.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(Object(z.a)(this._host._isCenterPosition(this._host._position))).subscribe(t=>{t&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(T.j),T.Ob(T.Q),T.Ob(Object(T.V)(()=>ut)),T.Ob(c.e))},t.\u0275dir=T.Jb({type:t,selectors:[["","matTabBodyHost",""]],features:[T.yb]}),t})(),mt=(()=>{class t{constructor(t,e,i){this._elementRef=t,this._dir=e,this._dirChangeSubscription=C.a.EMPTY,this._translateTabComplete=new w.a,this._onCentering=new T.n,this._beforeCentering=new T.n,this._afterLeavingCenter=new T.n,this._onCentered=new T.n(!0),this.animationDuration="500ms",e&&(this._dirChangeSubscription=e.change.subscribe(t=>{this._computePositionAnimationState(t),i.markForCheck()})),this._translateTabComplete.pipe(Object(B.a)((t,e)=>t.fromState===e.fromState&&t.toState===e.toState)).subscribe(t=>{this._isCenterPosition(t.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(t.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}set position(t){this._positionIndex=t,this._computePositionAnimationState()}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(t){const e=this._isCenterPosition(t.toState);this._beforeCentering.emit(e),e&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(t){return"center"==t||"left-origin-center"==t||"right-origin-center"==t}_computePositionAnimationState(t=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==t?"left":"right":this._positionIndex>0?"ltr"==t?"right":"left":"center"}_computePositionFromOrigin(t){const e=this._getLayoutDirection();return"ltr"==e&&t<=0||"rtl"==e&&t>0?"left-origin-center":"right-origin-center"}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(T.l),T.Ob(F.c,8),T.Ob(T.h))},t.\u0275dir=T.Jb({type:t,inputs:{animationDuration:"animationDuration",position:"position",_content:["content","_content"],origin:"origin"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"}}),t})(),ut=(()=>{class t extends mt{constructor(t,e,i){super(t,e,i)}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(T.l),T.Ob(F.c,8),T.Ob(T.h))},t.\u0275cmp=T.Ib({type:t,selectors:[["mat-tab-body"]],viewQuery:function(t,e){var i;1&t&&T.Qc(x.f,!0),2&t&&T.uc(i=T.dc())&&(e._portalHost=i.first)},hostAttrs:[1,"mat-tab-body"],features:[T.yb],decls:3,vars:6,consts:[[1,"mat-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(t,e){1&t&&(T.Ub(0,"div",0,1),T.cc("@translateTab.start",(function(t){return e._onTranslateTabStarted(t)}))("@translateTab.done",(function(t){return e._translateTabComplete.next(t)})),T.Jc(2,J,0,0,"ng-template",2),T.Tb()),2&t&&T.mc("@translateTab",T.qc(3,K,e._position,T.pc(1,V,e.animationDuration)))},directives:[gt],styles:[".mat-tab-body-content{height:100%;overflow:auto}.mat-tab-group-dynamic-height .mat-tab-body-content{overflow:hidden}\n"],encapsulation:2,data:{animation:[pt.translateTab]}}),t})();const ht=new T.r("MAT_TABS_CONFIG");let ft=0;class Tt{}class vt{constructor(t){this._elementRef=t}}const yt=Object(U.v)(Object(U.w)(vt),"primary");let _t=(()=>{class t extends yt{constructor(t,e,i,n){super(t),this._changeDetectorRef=e,this._animationMode=n,this._tabs=new T.E,this._indexToSelect=0,this._tabBodyWrapperHeight=0,this._tabsSubscription=C.a.EMPTY,this._tabLabelSubscription=C.a.EMPTY,this._dynamicHeight=!1,this._selectedIndex=null,this.headerPosition="above",this.selectedIndexChange=new T.n,this.focusChange=new T.n,this.animationDone=new T.n,this.selectedTabChange=new T.n(!0),this._groupId=ft++,this.animationDuration=i&&i.animationDuration?i.animationDuration:"500ms",this.disablePagination=!(!i||null==i.disablePagination)&&i.disablePagination}get dynamicHeight(){return this._dynamicHeight}set dynamicHeight(t){this._dynamicHeight=Object(E.b)(t)}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){this._indexToSelect=Object(E.e)(t,null)}get animationDuration(){return this._animationDuration}set animationDuration(t){this._animationDuration=/^\d+$/.test(t)?t+"ms":t}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){const e=this._elementRef.nativeElement;e.classList.remove("mat-background-"+this.backgroundColor),t&&e.classList.add("mat-background-"+t),this._backgroundColor=t}ngAfterContentChecked(){const t=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=t){const e=null==this._selectedIndex;e||this.selectedTabChange.emit(this._createChangeEvent(t)),Promise.resolve().then(()=>{this._tabs.forEach((e,i)=>e.isActive=i===t),e||this.selectedIndexChange.emit(t)})}this._tabs.forEach((e,i)=>{e.position=i-t,null==this._selectedIndex||0!=e.position||e.origin||(e.origin=t-this._selectedIndex)}),this._selectedIndex!==t&&(this._selectedIndex=t,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{if(this._clampTabIndex(this._indexToSelect)===this._selectedIndex){const t=this._tabs.toArray();for(let e=0;e<t.length;e++)if(t[e].isActive){this._indexToSelect=this._selectedIndex=e;break}}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(Object(z.a)(this._allTabs)).subscribe(t=>{this._tabs.reset(t.filter(t=>!t._closestTabGroup||t._closestTabGroup===this)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}_focusChanged(t){this.focusChange.emit(this._createChangeEvent(t))}_createChangeEvent(t){const e=new Tt;return e.index=t,this._tabs&&this._tabs.length&&(e.tab=this._tabs.toArray()[t]),e}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=Object(A.a)(...this._tabs.map(t=>t._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(t){return Math.min(this._tabs.length-1,Math.max(t||0,0))}_getTabLabelId(t){return`mat-tab-label-${this._groupId}-${t}`}_getTabContentId(t){return`mat-tab-content-${this._groupId}-${t}`}_setTabBodyWrapperHeight(t){if(!this._dynamicHeight||!this._tabBodyWrapperHeight)return;const e=this._tabBodyWrapper.nativeElement;e.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(e.style.height=t+"px")}_removeTabBodyWrapperHeight(){const t=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=t.clientHeight,t.style.height="",this.animationDone.emit()}_handleClick(t,e,i){t.disabled||(this.selectedIndex=e.focusIndex=i)}_getTabIndex(t,e){return t.disabled?null:this.selectedIndex===e?0:-1}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(T.l),T.Ob(T.h),T.Ob(ht,8),T.Ob(O.a,8))},t.\u0275dir=T.Jb({type:t,inputs:{headerPosition:"headerPosition",animationDuration:"animationDuration",disablePagination:"disablePagination",dynamicHeight:"dynamicHeight",selectedIndex:"selectedIndex",backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},features:[T.yb]}),t})(),xt=(()=>{class t extends _t{constructor(t,e,i,n){super(t,e,i,n)}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(T.l),T.Ob(T.h),T.Ob(ht,8),T.Ob(O.a,8))},t.\u0275cmp=T.Ib({type:t,selectors:[["mat-tab-group"]],contentQueries:function(t,e,i){var n;1&t&&T.Hb(i,dt,!0),2&t&&T.uc(n=T.dc())&&(e._allTabs=n)},viewQuery:function(t,e){var i;1&t&&(T.Qc(H,!0),T.Qc($,!0)),2&t&&(T.uc(i=T.dc())&&(e._tabBodyWrapper=i.first),T.uc(i=T.dc())&&(e._tabHeader=i.first))},hostAttrs:[1,"mat-tab-group"],hostVars:4,hostBindings:function(t,e){2&t&&T.Gb("mat-tab-group-dynamic-height",e.dynamicHeight)("mat-tab-group-inverted-header","below"===e.headerPosition)},inputs:{color:"color",disableRipple:"disableRipple"},exportAs:["matTabGroup"],features:[T.Ab([{provide:bt,useExisting:t}]),T.yb],decls:6,vars:7,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],["class","mat-tab-label mat-focus-indicator","role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",3,"id","mat-tab-label-active","disabled","matRippleDisabled","click",4,"ngFor","ngForOf"],[1,"mat-tab-body-wrapper"],["tabBodyWrapper",""],["role","tabpanel",3,"id","mat-tab-body-active","content","position","origin","animationDuration","_onCentered","_onCentering",4,"ngFor","ngForOf"],["role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",1,"mat-tab-label","mat-focus-indicator",3,"id","disabled","matRippleDisabled","click"],[1,"mat-tab-label-content"],[3,"ngIf"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","content","position","origin","animationDuration","_onCentered","_onCentering"]],template:function(t,e){1&t&&(T.Ub(0,"mat-tab-header",0,1),T.cc("indexFocused",(function(t){return e._focusChanged(t)}))("selectFocusedIndex",(function(t){return e.selectedIndex=t})),T.Jc(2,Y,4,14,"div",2),T.Tb(),T.Ub(3,"div",3,4),T.Jc(5,Z,1,8,"mat-tab-body",5),T.Tb()),2&t&&(T.mc("selectedIndex",e.selectedIndex||0)("disableRipple",e.disableRipple)("disablePagination",e.disablePagination),T.Bb(2),T.mc("ngForOf",e._tabs),T.Bb(1),T.Gb("_mat-animation-noopable","NoopAnimations"===e._animationMode),T.Bb(2),T.mc("ngForOf",e._tabs))},directives:function(){return[Lt,c.s,wt,U.q,y.e,c.t,x.c,ut]},styles:[".mat-tab-group{display:flex;flex-direction:column}.mat-tab-group.mat-tab-group-inverted-header{flex-direction:column-reverse}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{padding:0 12px}}@media(max-width: 959px){.mat-tab-label{padding:0 12px}}.mat-tab-group[mat-stretch-tabs]>.mat-tab-header .mat-tab-label{flex-basis:0;flex-grow:1}.mat-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-tab-body-wrapper{transition:none;animation:none}.mat-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;flex-basis:100%}.mat-tab-body.mat-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-tab-group.mat-tab-group-dynamic-height .mat-tab-body.mat-tab-body-active{overflow-y:hidden}\n"],encapsulation:2}),t})();class Ut{}const Ot=Object(U.x)(Ut);let wt=(()=>{class t extends Ot{constructor(t){super(),this.elementRef=t}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(T.l))},t.\u0275dir=T.Jb({type:t,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(t,e){2&t&&(T.Cb("aria-disabled",!!e.disabled),T.Gb("mat-tab-disabled",e.disabled))},inputs:{disabled:"disabled"},features:[T.yb]}),t})();const Ct=Object(M.f)({passive:!0});let At=(()=>{class t{constructor(t,e,i,n,a,o,s){this._elementRef=t,this._changeDetectorRef=e,this._viewportRuler=i,this._dir=n,this._ngZone=a,this._platform=o,this._animationMode=s,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new w.a,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new w.a,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new T.n,this.indexFocused=new T.n,a.runOutsideAngular(()=>{Object(I.a)(t.nativeElement,"mouseleave").pipe(Object(P.a)(this._destroyed)).subscribe(()=>{this._stopInterval()})})}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){t=Object(E.e)(t),this._selectedIndex!=t&&(this._selectedIndexChanged=!0,this._selectedIndex=t,this._keyManager&&this._keyManager.updateActiveItem(t))}ngAfterViewInit(){Object(I.a)(this._previousPaginator.nativeElement,"touchstart",Ct).pipe(Object(P.a)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),Object(I.a)(this._nextPaginator.nativeElement,"touchstart",Ct).pipe(Object(P.a)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const t=this._dir?this._dir.change:Object(L.a)(null),e=this._viewportRuler.change(150),i=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new y.g(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap(),this._keyManager.updateActiveItem(this._selectedIndex),"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(i):i(),Object(A.a)(t,e,this._items.changes).pipe(Object(P.a)(this._destroyed)).subscribe(()=>{Promise.resolve().then(i),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.pipe(Object(P.a)(this._destroyed)).subscribe(t=>{this.indexFocused.emit(t),this._setTabFocus(t)})}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(t){if(!Object(D.r)(t))switch(t.keyCode){case D.e:case D.m:this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(t));break;default:this._keyManager.onKeydown(t)}}_onContentChanges(){const t=this._elementRef.nativeElement.textContent;t!==this._currentTextContent&&(this._currentTextContent=t||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(t){this._isValidIndex(t)&&this.focusIndex!==t&&this._keyManager&&this._keyManager.setActiveItem(t)}_isValidIndex(t){if(!this._items)return!0;const e=this._items?this._items.toArray()[t]:null;return!!e&&!e.disabled}_setTabFocus(t){if(this._showPaginationControls&&this._scrollToLabel(t),this._items&&this._items.length){this._items.toArray()[t].focus();const e=this._tabListContainer.nativeElement,i=this._getLayoutDirection();e.scrollLeft="ltr"==i?0:e.scrollWidth-e.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const t=this.scrollDistance,e=this._platform,i="ltr"===this._getLayoutDirection()?-t:t;this._tabList.nativeElement.style.transform=`translateX(${Math.round(i)}px)`,e&&(e.TRIDENT||e.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(t){this._scrollTo(t)}_scrollHeader(t){return this._scrollTo(this._scrollDistance+("before"==t?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(t){this._stopInterval(),this._scrollHeader(t)}_scrollToLabel(t){if(this.disablePagination)return;const e=this._items?this._items.toArray()[t]:null;if(!e)return;const i=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:n,offsetWidth:a}=e.elementRef.nativeElement;let o,s;"ltr"==this._getLayoutDirection()?(o=n,s=o+a):(s=this._tabList.nativeElement.offsetWidth-n,o=s-a);const c=this.scrollDistance,r=this.scrollDistance+i;o<c?this.scrollDistance-=c-o+60:s>r&&(this.scrollDistance+=s-r+60)}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const t=this._tabList.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;t||(this.scrollDistance=0),t!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=t}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabList.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const t=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,e=t?t.elementRef.nativeElement:null;e?this._inkBar.alignToElement(e):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(t,e){e&&null!=e.button&&0!==e.button||(this._stopInterval(),Object(S.a)(650,100).pipe(Object(P.a)(Object(A.a)(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:e,distance:i}=this._scrollHeader(t);(0===i||i>=e)&&this._stopInterval()}))}_scrollTo(t){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const e=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(e,t)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:e,distance:this._scrollDistance}}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(T.l),T.Ob(T.h),T.Ob(N.e),T.Ob(F.c,8),T.Ob(T.A),T.Ob(M.a),T.Ob(O.a,8))},t.\u0275dir=T.Jb({type:t,inputs:{disablePagination:"disablePagination"}}),t})(),It=(()=>{class t extends At{constructor(t,e,i,n,a,o,s){super(t,e,i,n,a,o,s),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Object(E.b)(t)}_itemSelected(t){t.preventDefault()}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(T.l),T.Ob(T.h),T.Ob(N.e),T.Ob(F.c,8),T.Ob(T.A),T.Ob(M.a),T.Ob(O.a,8))},t.\u0275dir=T.Jb({type:t,inputs:{disableRipple:"disableRipple"},features:[T.yb]}),t})(),Lt=(()=>{class t extends It{constructor(t,e,i,n,a,o,s){super(t,e,i,n,a,o,s)}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(T.l),T.Ob(T.h),T.Ob(N.e),T.Ob(F.c,8),T.Ob(T.A),T.Ob(M.a),T.Ob(O.a,8))},t.\u0275cmp=T.Ib({type:t,selectors:[["mat-tab-header"]],contentQueries:function(t,e,i){var n;1&t&&T.Hb(i,wt,!1),2&t&&T.uc(n=T.dc())&&(e._items=n)},viewQuery:function(t,e){var i;1&t&&(T.Fc(nt,!0),T.Fc(Q,!0),T.Fc(X,!0),T.Qc(tt,!0),T.Qc(et,!0)),2&t&&(T.uc(i=T.dc())&&(e._inkBar=i.first),T.uc(i=T.dc())&&(e._tabListContainer=i.first),T.uc(i=T.dc())&&(e._tabList=i.first),T.uc(i=T.dc())&&(e._nextPaginator=i.first),T.uc(i=T.dc())&&(e._previousPaginator=i.first))},hostAttrs:[1,"mat-tab-header"],hostVars:4,hostBindings:function(t,e){2&t&&T.Gb("mat-tab-header-pagination-controls-enabled",e._showPaginationControls)("mat-tab-header-rtl","rtl"==e._getLayoutDirection())},inputs:{selectedIndex:"selectedIndex"},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[T.yb],ngContentSelectors:R,decls:13,vars:8,consts:[["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-before","mat-elevation-z4",3,"matRippleDisabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-tab-header-pagination-chevron"],[1,"mat-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-tab-labels"],["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-after","mat-elevation-z4",3,"matRippleDisabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(t,e){1&t&&(T.lc(),T.Ub(0,"div",0,1),T.cc("click",(function(){return e._handlePaginatorClick("before")}))("mousedown",(function(t){return e._handlePaginatorPress("before",t)}))("touchend",(function(){return e._stopInterval()})),T.Pb(2,"div",2),T.Tb(),T.Ub(3,"div",3,4),T.cc("keydown",(function(t){return e._handleKeydown(t)})),T.Ub(5,"div",5,6),T.cc("cdkObserveContent",(function(){return e._onContentChanges()})),T.Ub(7,"div",7),T.kc(8),T.Tb(),T.Pb(9,"mat-ink-bar"),T.Tb(),T.Tb(),T.Ub(10,"div",8,9),T.cc("mousedown",(function(t){return e._handlePaginatorPress("after",t)}))("click",(function(){return e._handlePaginatorClick("after")}))("touchend",(function(){return e._stopInterval()})),T.Pb(12,"div",2),T.Tb()),2&t&&(T.Gb("mat-tab-header-pagination-disabled",e._disableScrollBefore),T.mc("matRippleDisabled",e._disableScrollBefore||e.disableRipple),T.Bb(5),T.Gb("_mat-animation-noopable","NoopAnimations"===e._animationMode),T.Bb(5),T.Gb("mat-tab-header-pagination-disabled",e._disableScrollAfter),T.mc("matRippleDisabled",e._disableScrollAfter||e.disableRipple))},directives:[U.q,_.a,nt],styles:['.mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-header-pagination{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:transparent;touch-action:none}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-rtl .mat-tab-header-pagination-before,.mat-tab-header-pagination-after{padding-right:4px}.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;content:"";height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-ink-bar{transition:none;animation:none}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}.cdk-high-contrast-active .mat-ink-bar{outline:solid 2px;height:0}.mat-tab-labels{display:flex}[mat-align-tabs=center]>.mat-tab-header .mat-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-tab-header .mat-tab-labels{justify-content:flex-end}.mat-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}._mat-animation-noopable.mat-tab-list{transition:none;animation:none}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{min-width:72px}}\n'],encapsulation:2}),t})(),St=(()=>{class t{}return t.\u0275mod=T.Mb({type:t}),t.\u0275inj=T.Lb({factory:function(e){return new(e||t)},imports:[[c.c,U.i,x.g,U.r,_.c,y.a],U.i]}),t})();var kt=i("iELJ"),zt=i("SqCe"),Bt=i("Q2Ze"),Pt=i("zHaW"),Et=i("CtHx");let Mt=0;const Dt=new T.r("CdkAccordion");let Ft=(()=>{class t{constructor(){this._stateChanges=new w.a,this._openCloseAllActions=new w.a,this.id="cdk-accordion-"+Mt++,this._multi=!1}get multi(){return this._multi}set multi(t){this._multi=Object(E.b)(t)}openAll(){this._openCloseAll(!0)}closeAll(){this._openCloseAll(!1)}ngOnChanges(t){this._stateChanges.next(t)}ngOnDestroy(){this._stateChanges.complete()}_openCloseAll(t){this.multi&&this._openCloseAllActions.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=T.Jb({type:t,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[T.Ab([{provide:Dt,useExisting:t}]),T.zb]}),t})(),Nt=0,jt=(()=>{class t{constructor(t,e,i){this.accordion=t,this._changeDetectorRef=e,this._expansionDispatcher=i,this._openCloseAllSubscription=C.a.EMPTY,this.closed=new T.n,this.opened=new T.n,this.destroyed=new T.n,this.expandedChange=new T.n,this.id="cdk-accordion-child-"+Nt++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=i.listen((t,e)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===e&&this.id!==t&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(t){t=Object(E.b)(t),this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){this._disabled=Object(E.b)(t)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(Dt,12),T.Ob(T.h),T.Ob(Et.c))},t.\u0275dir=T.Jb({type:t,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[T.Ab([{provide:Dt,useValue:void 0}])]}),t})(),Rt=(()=>{class t{}return t.\u0275mod=T.Mb({type:t}),t.\u0275inj=T.Lb({factory:function(e){return new(e||t)}}),t})();var Jt=i("pLZG"),Vt=i("IzEk"),Kt=i("EY2u");const Ht=["body"];function $t(t,e){}const Gt=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],qt=["mat-expansion-panel-header","*","mat-action-row"];function Wt(t,e){if(1&t&&T.Pb(0,"span",2),2&t){const t=T.gc();T.mc("@indicatorRotate",t._getExpandedState())}}const Yt=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],Zt=["mat-panel-title","mat-panel-description","*"],Qt=new T.r("MAT_ACCORDION"),Xt={indicatorRotate:Object(k.p)("indicatorRotate",[Object(k.m)("collapsed, void",Object(k.n)({transform:"rotate(0deg)"})),Object(k.m)("expanded",Object(k.n)({transform:"rotate(180deg)"})),Object(k.o)("expanded <=> collapsed, void => collapsed",Object(k.e)("225ms cubic-bezier(0.4,0.0,0.2,1)"))]),bodyExpansion:Object(k.p)("bodyExpansion",[Object(k.m)("collapsed, void",Object(k.n)({height:"0px",visibility:"hidden"})),Object(k.m)("expanded",Object(k.n)({height:"*",visibility:"visible"})),Object(k.o)("expanded <=> collapsed, void => collapsed",Object(k.e)("225ms cubic-bezier(0.4,0.0,0.2,1)"))])};let te=(()=>{class t{constructor(t){this._template=t}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(T.M))},t.\u0275dir=T.Jb({type:t,selectors:[["ng-template","matExpansionPanelContent",""]]}),t})(),ee=0;const ie=new T.r("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let ne=(()=>{class t extends jt{constructor(t,e,i,n,a,o,s){super(t,e,i),this._viewContainerRef=n,this._animationMode=o,this._hideToggle=!1,this.afterExpand=new T.n,this.afterCollapse=new T.n,this._inputChanges=new w.a,this._headerId="mat-expansion-panel-header-"+ee++,this._bodyAnimationDone=new w.a,this.accordion=t,this._document=a,this._bodyAnimationDone.pipe(Object(B.a)((t,e)=>t.fromState===e.fromState&&t.toState===e.toState)).subscribe(t=>{"void"!==t.fromState&&("expanded"===t.toState?this.afterExpand.emit():"collapsed"===t.toState&&this.afterCollapse.emit())}),s&&(this.hideToggle=s.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=Object(E.b)(t)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe(Object(z.a)(null),Object(Jt.a)(()=>this.expanded&&!this._portal),Object(Vt.a)(1)).subscribe(()=>{this._portal=new x.h(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,e=this._body.nativeElement;return t===e||e.contains(t)}return!1}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(Qt,12),T.Ob(T.h),T.Ob(Et.c),T.Ob(T.Q),T.Ob(c.e),T.Ob(O.a,8),T.Ob(ie,8))},t.\u0275cmp=T.Ib({type:t,selectors:[["mat-expansion-panel"]],contentQueries:function(t,e,i){var n;1&t&&T.Hb(i,te,!0),2&t&&T.uc(n=T.dc())&&(e._lazyContent=n.first)},viewQuery:function(t,e){var i;1&t&&T.Qc(Ht,!0),2&t&&T.uc(i=T.dc())&&(e._body=i.first)},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(t,e){2&t&&T.Gb("mat-expanded",e.expanded)("_mat-animation-noopable","NoopAnimations"===e._animationMode)("mat-expansion-panel-spacing",e._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[T.Ab([{provide:Qt,useValue:void 0}]),T.yb,T.zb],ngContentSelectors:qt,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(t,e){1&t&&(T.lc(Gt),T.kc(0),T.Ub(1,"div",0,1),T.cc("@bodyExpansion.done",(function(t){return e._bodyAnimationDone.next(t)})),T.Ub(3,"div",2),T.kc(4,1),T.Jc(5,$t,0,0,"ng-template",3),T.Tb(),T.kc(6,2),T.Tb()),2&t&&(T.Bb(1),T.mc("@bodyExpansion",e._getExpandedState())("id",e.id),T.Cb("aria-labelledby",e._headerId),T.Bb(4),T.mc("cdkPortalOutlet",e._portal))},directives:[x.c],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[Xt.bodyExpansion]},changeDetection:0}),t})(),ae=(()=>{class t{constructor(t,e,i,n,a,o){this.panel=t,this._element=e,this._focusMonitor=i,this._changeDetectorRef=n,this._animationMode=o,this._parentChangeSubscription=C.a.EMPTY;const s=t.accordion?t.accordion._stateChanges.pipe(Object(Jt.a)(t=>!(!t.hideToggle&&!t.togglePosition))):Kt.a;this._parentChangeSubscription=Object(A.a)(t.opened,t.closed,s,t._inputChanges.pipe(Object(Jt.a)(t=>!!(t.hideToggle||t.disabled||t.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(Object(Jt.a)(()=>t._containsFocus())).subscribe(()=>i.focusVia(e,"program")),a&&(this.expandedHeight=a.expandedHeight,this.collapsedHeight=a.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case D.m:case D.e:Object(D.r)(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}focus(t="program",e){this._focusMonitor.focusVia(this._element,t,e)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(ne,1),T.Ob(T.l),T.Ob(y.h),T.Ob(T.h),T.Ob(ie,8),T.Ob(O.a,8))},t.\u0275cmp=T.Ib({type:t,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(t,e){1&t&&T.cc("click",(function(){return e._toggle()}))("keydown",(function(t){return e._keydown(t)})),2&t&&(T.Cb("id",e.panel._headerId)("tabindex",e.disabled?-1:0)("aria-controls",e._getPanelId())("aria-expanded",e._isExpanded())("aria-disabled",e.panel.disabled),T.Gc("height",e._getHeaderHeight()),T.Gb("mat-expanded",e._isExpanded())("mat-expansion-toggle-indicator-after","after"===e._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===e._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===e._animationMode))},inputs:{expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},ngContentSelectors:Zt,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(t,e){1&t&&(T.lc(Yt),T.Ub(0,"span",0),T.kc(1),T.kc(2,1),T.kc(3,2),T.Tb(),T.Jc(4,Wt,1,1,"span",1)),2&t&&(T.Bb(4),T.mc("ngIf",e._showToggle()))},directives:[c.t],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}\n'],encapsulation:2,data:{animation:[Xt.indicatorRotate]},changeDetection:0}),t})(),oe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=T.Jb({type:t,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]}),t})(),se=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=T.Jb({type:t,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),t})(),ce=(()=>{class t extends Ft{constructor(){super(...arguments),this._ownHeaders=new T.E,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(t){this._hideToggle=Object(E.b)(t)}ngAfterContentInit(){this._headers.changes.pipe(Object(z.a)(this._headers)).subscribe(t=>{this._ownHeaders.reset(t.filter(t=>t.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new y.g(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(t){this._keyManager.onKeydown(t)}_handleHeaderFocus(t){this._keyManager.updateActiveItem(t)}}return t.\u0275fac=function(e){return re(e||t)},t.\u0275dir=T.Jb({type:t,selectors:[["mat-accordion"]],contentQueries:function(t,e,i){var n;1&t&&T.Hb(i,ae,!0),2&t&&T.uc(n=T.dc())&&(e._headers=n)},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(t,e){2&t&&T.Gb("mat-accordion-multi",e.multi)},inputs:{multi:"multi",displayMode:"displayMode",togglePosition:"togglePosition",hideToggle:"hideToggle"},exportAs:["matAccordion"],features:[T.Ab([{provide:Qt,useExisting:t}]),T.yb]}),t})();const re=T.Wb(ce);let le=(()=>{class t{}return t.\u0275mod=T.Mb({type:t}),t.\u0275inj=T.Lb({factory:function(e){return new(e||t)},imports:[[c.c,Rt,x.g]]}),t})();var be=i("pMoy"),de=i("Tk7p");let pe=(()=>{class t{}return t.\u0275mod=T.Mb({type:t}),t.\u0275inj=T.Lb({factory:function(e){return new(e||t)},providers:[],imports:[[o.a,n.k,c.c,r.b,St,l.c,zt.d,d.b,b.c,kt.f,Bt.e,p.c,be.b,de.a,Pt.d,m.a,u.a,le,s.n,a.a,s.z,g.a]]}),t})(),ge=(()=>{class t{}return t.\u0275mod=T.Mb({type:t}),t.\u0275inj=T.Lb({factory:function(e){return new(e||t)},providers:[v],imports:[[o.a,c.c,r.b,l.c,p.c,d.b,b.c,m.a,u.a,s.z,pe,g.a]]}),t})();const me=[{key:"application",tabs:[{store:"applications",label:"Basic Details",content:"form",context:"Application",parentKey:"organization",count:1,formConf:{store:"applications",cancelTxt:"CANCEL",nextTxt:"SAVE",addStore:"applications",editStore:"applications",getStore:"applications"},detailsConf:[{label:"Applied Amount",key:"total",icon:"account_balance",type:"currency"},{label:"Required By",key:"date_requested",icon:"calendar_today",type:"date"},{label:"Financial Year",key:"financial_year",icon:"calendar_today",type:"nested",fieldType:"nested_range",primaryField:"financial_year_data.starts_on",secondaryField:"financial_year_data.ends_on"},{label:"Status",key:"status",icon:"assessment",type:"status"}],bankConfs:[{title:"Account Name",key:"account_name"},{title:"Account #",key:"account_number"},{title:"Bank",key:"bank_name"},{title:"Branch",key:"branch_name"}],extraDetails:"extraDetails",auditTrail:!0,applicationME:!0,activitySummary:!0},{store:"application-items",label:"Billable Items",modelKey:"application",content:"grid",listParams:{member_null:!0},gridConf:{getStore:"application-items",editStore:"application-items"},topActions:[{btnText:"ADD BILLABLE ITEM",status:"info",icon:"true",action:"inline",conf:{context:"BILLABLE ITEM",store:"application-items",btnText:"SAVE"}}],rows:[{key:"item",type:"compact-line",context:"billable-item",fieldType:"nested_string",primaryField:"item_data.name"},{key:"item",type:"compact-line",context:"billable-item",fieldType:"activity_details",primaryField:"item_data.name"},{key:"item",type:"compact-line",context:"billable-item",fieldType:"nested_status_total",primaryField:"item_data.name"},{key:"item",type:"compact-line",context:"billable-item",fieldType:"nested_totals",primaryField:"item_data.name"}],headers:[{title:"Item"},{title:"Activity Item"},{title:"Total"},{title:"Approved Totals"},{title:"Actions",oderable:!1,searchable:!1}],dropDownActions:[{btnText:"Edit",status:"info",icon:"edit",disableStatus:"FINISHED",action:"inline",modalConf:{store:"application-items",titleKey:"item",context:"Billable Item",btnText:"SAVE"}},{btnText:"Rationalize",status:"draft",icon:"compare_arrows",disableStatus:"FINISHED",class:"text-success",action:"modal",modalConf:{store:"application-items",titleKey:"item",context:"rationalize",btnText:"SAVE",width:"50%"}},{btnText:"Approve",status:"rationalized",icon:"check",class:"text-success",disableStatus:"FINISHED",action:"modal",modalConf:{store:"application-items",titleKey:"item",context:"approve",btnText:"SAVE",width:"50%"}},{btnText:"Reject",status:"rationalize",icon:"close",class:"text-danger",disableStatus:"FINISHED",action:"modal",modalConf:{store:"application-items",titleKey:"item",context:"reject",btnText:"SAVE",width:"50%"}}]},{store:"application-attendees",label:"Attendees",content:"grid",modelKey:"application",listParams:{member_null:!1},gridConf:{getStore:"application-attendees",editStore:"application-attendees"},topActions:[{btnText:"ADD ATTENDEE",status:"info",icon:"true",action:"inline",conf:{context:"ATTENDEE",store:"application-attendees",btnText:"SAVE"}}],rows:[{key:"item",type:"compact-line",context:"attendees",fieldType:"nested_string",primaryField:"item_data.name"},{key:"item",type:"compact-line",context:"billable-item",fieldType:"activity_details",primaryField:"item_data.name"},{key:"item",type:"compact-line",context:"billable-item",fieldType:"nested_status_total",primaryField:"item_data.name"},{key:"item",type:"compact-line",context:"billable-item",fieldType:"nested_totals",primaryField:"item_data.name"}],headers:[{title:"Member"},{title:"Activity Details"},{title:"Totals"},{title:"Approved Totals"},{title:"Actions",oderable:!1,searchable:!1}],dropDownActions:[{btnText:"Edit",status:"info",icon:"edit",disableStatus:"FINISHED",action:"inline",modalConf:{store:"application-items",titleKey:"item",context:"Billable Item",btnText:"SAVE"}},{btnText:"Rationalize",status:"draft",icon:"compare_arrows",disableStatus:"FINISHED",class:"text-success",action:"modal",modalConf:{store:"application-items",titleKey:"item",context:"rationalize",btnText:"SAVE",width:"50%"}},{btnText:"Approve",status:"rationalized",icon:"check",class:"text-success",disableStatus:"FINISHED",action:"modal",modalConf:{store:"application-items",titleKey:"item",context:"approve",btnText:"SAVE",width:"50%"}},{btnText:"Reject",status:"rationalize",icon:"close",class:"text-danger",disableStatus:"FINISHED",action:"modal",modalConf:{store:"application-items",titleKey:"item",context:"reject",btnText:"SAVE",width:"50%"}}]},{store:"application-allowances",label:"Allowances",content:"nested-inline-list",getStore:"application-allowances",editStore:"application-allowances",gridConf:{getStore:"application-allowances",editStore:"application-allowances"},topActions:[{btnText:"ADD ALLOWANCE",status:"info",icon:"true",action:"inline",conf:{context:"ALLOWANCE",store:"application-allowances",btnText:"SAVE"}}],rows:[{key:"item",type:"compact-line",context:"allowances",fieldType:"nested_member",primaryField:"item_data.name"},{key:"item",type:"compact-line",context:"billable-item",fieldType:"nested_status_total",primaryField:"item_data.name"},{key:"item",type:"compact-line",context:"billable-item",fieldType:"nested_totals",primaryField:"item_data.name"}],headers:[{title:"Allowance"},{title:"Totals"},{title:"Approved Totals"},{title:"Actions",oderable:!1,searchable:!1}],actions:[{btnText:"EDIT",status:"info",icon:!1,disableStatus:"FINISHED",action:"inline",modalConf:{store:"application-allowances",titleKey:"item",context:"Allowance",btnText:"SAVE"}},{btnText:"Rationalize",status:"draft",icon:"compare_arrows",disableStatus:"FINISHED",class:"text-success",action:"modal",modalConf:{store:"application-allowances",titleKey:"item",context:"rationalize",btnText:"SAVE",width:"50%"}},{btnText:"Approve",status:"rationalized",icon:"check",class:"text-success",disableStatus:"FINISHED",action:"modal",modalConf:{store:"application-allowances",titleKey:"item",context:"approve",btnText:"SAVE",width:"50%"}},{btnText:"Reject",status:"rationalize",icon:"close",class:"text-danger",disableStatus:"FINISHED",action:"modal",modalConf:{store:"application-allowances",titleKey:"item",context:"reject",btnText:"SAVE",width:"50%"}}]},{store:"users",label:"Attachments",content:"attachments",gridConf:{getStore:"organisations",editStore:"organisations"},topActions:[{btnText:"ADD USER",status:"info",icon:"true",action:"inline",conf:{context:"USER",store:"users",btnText:"SAVE"}}],rows:[{key:"first_name",type:"string"},{key:"last_name",type:"string"},{key:"phone_number",type:"string"},{key:"email",type:"string"}],headers:[{title:"Names"},{title:"."},{title:"Phone Number"},{title:"Email"},{title:"Actions",oderable:!1,searchable:!1}],actions:[{btnText:"EDIT",status:"info",icon:!1,disableStatus:"FINISHED",action:"inline",modalConf:{store:"users",titleKey:"name",context:"Users",btnText:"SAVE"}}]},{store:"application-alternate-funding-sources",label:"Alternative Funds",content:"grid",modelKey:"application",gridConf:{getStore:"application-alternate-funding-sources",editStore:"application-alternate-funding-sources"},topActions:[{btnText:"ADD ALTERNATIVE FUND",status:"info",icon:"true",action:"inline",conf:{context:"ALTERNATIVE FUNDING",store:"application-alternate-funding-sources",btnText:"SAVE"}}],rows:[{key:"entity_name",type:"string"},{key:"estimated_amount",type:"currency"},{key:"description",type:"string"}],headers:[{title:"Entity Name"},{title:"Estimated Amount"},{title:"Description"},{title:"Actions",oderable:!1,searchable:!1}],actions:[{btnText:"EDIT",status:"info",icon:!1,disableStatus:"FINISHED",action:"inline",modalConf:{store:"application-alternate-funding-sources",titleKey:"entity_name",context:"Alternative Funding",btnText:"SAVE"}}]}],headerConfig:{icon:"assignment",headerLabel:"Application",headerValue:"id",subTitleLabel:"By",subTitleValue:"organization_data.name",actions:[{btnText:"SUBMIT",action:"submit",color:"default",context:"APPLICATION",activeStates:["DRAFT"],bpType:["GOVERNMENT_AGENCY","PROFESSIONAL_SPORTPERSON","SPORTS_ORGANIZATION","MINISTRY"],roles:["Admin","Budget Reviewer","Ministry Approver"],configs:{title:"Submit Application",context:"APPLICATION",store:"applications",action:"update",description:"Kindly verify that you would indeed like to\n                            submit the following application for review. Once submitted \n                            you will not be able to make any further updates to it. \n                            Click Submit below to proceed"}},{btnText:"RATIONALIZE",action:"rationalize",context:"APPLICATIONS",color:"default",activeStates:["SUBMITTED"],bpType:["MINISTRY","SASDEF"],roles:["Admin","Budget Reviewer","Ministry Approver"],configs:{title:"Rationalize Application",context:"APPLICATIONS",store:"application-reviews",action:"rationalizeApplication",description:"Kindly verify that you would indeed like to \n                            rationalize the following application. Confirm that you have reviewed\n                            and rationalized or rejected activity lines before you can\n                            continue",approveNested:!1,comment:!1}},{btnText:"APPROVE",action:"approve",context:"APPLICATIONS",color:"default",activeStates:["RATIONALIZED"],bpType:["SASDEF"],roles:["Budget Reviewer","Ministry Approver","SASDEF Admin"],configs:{title:"Approve Application",context:"APPLICATION  ",store:"application-reviews",action:"approveApplication",description:"Kindly verify that you would indeed like to\n                            approve the following application. Confirm that you have reviewed\n                            and approved or rejected activity lines before you can\n                            continue",approveNested:!1,comment:!1}},{btnText:"REJECT",action:"reject",context:"APPLICATIONS",color:"warn",activeStates:["SUBMITTED","RATIONALIZED"],bpType:["MINISTRY","SASDEF"],roles:["Budget Reviewer","Ministry Approver","SASDEF Admin"],configs:{title:"Reject Application",context:"APPLICATIONS",hasComment:!0,store:"application-reviews",action:"rejectApplication",description:"Kindly verify that you would indeed like to\n                            reject the following application. Once rejected you will\n                            not be able to approve any of the activities lines",comment:!0}}]}},{key:"organization-budget",headerConfig:{icon:"work",headerLabel:"Calendar of Event",headerValue:"id",subTitleLabel:"By",subTitleValue:"organization_data.name",actions:[{btnText:"SUBMIT",action:"submit",color:"default",context:"CALENDAR OF EVENTS",activeStates:["DRAFT"],bpType:["GOVERNMENT_AGENCY","PROFESSIONAL_SPORTPERSON","SPORTS_ORGANIZATION","MINISTRY"],roles:["Admin","Budget Reviewer","Ministry Approver"],configs:{title:"Submit Calendar of Events",context:"CALENDAR OF EVENTS",store:"organization-budgets",action:"update",description:"Kindly verify that you would indeed like to\n                            submit the following calendar of events. Once submitted you will not\n                            be able to make any further updates to it. Click Submit\n                            below to proceed"}},{btnText:"RATIONALIZE",action:"rationalize",context:"CALENDAR OF EVENTS",color:"default",activeStates:["SUBMITTED"],bpType:["MINISTRY"],roles:["Admin","Budget Reviewer","Ministry Approver"],configs:{title:"Rationalize Calendar of Events",context:"CALENDAR OF EVENTS",store:"organization-budget-reviews",action:"rationalize",description:"Kindly verify that you would indeed like to \n                            rationalize the following calendar of events. Confirm that you have reviewed\n                            and rationalized or rejected activities and activity lines before you can\n                            continue",approveNested:!1,comment:!1}},{btnText:"APPROVE",action:"approve",context:"CALENDAR OF EVENTS",color:"default",activeStates:["RATIONALIZED"],bpType:["SASDEF"],roles:["Budget Reviewer","Ministry Approver","SASDEF Admin"],configs:{title:"Approve Calendar of Events",context:"CALENDAR OF EVENTS  ",store:"organization-budget-reviews",action:"approve",description:"Kindly verify that you would indeed like tO\n                            approve the following calendar of events. Confirm that you have reviewed\n                            and approved or rejected activities and activity lines before you can\n                            continue",approveNested:!1,comment:!1}},{btnText:"REJECT",action:"reject",context:"CALENDAR OF EVENTS",color:"warn",activeStates:["SUBMITTED","RATIONALIZED"],bpType:["MINISTRY","SASDEF"],roles:["Budget Reviewer","Ministry Approver","SASDEF Admin"],configs:{title:"Reject Calendar of Events",context:"CALENDAR OF EVENTS",hasComment:!0,store:"organization-budget-reviews",action:"reject",description:"Kindly verify that you would indeed like to\n                            reject the following calendar of events. Once rejected you will\n                            not be able to approve any of the activities or activity",comment:!0}}]},tabs:[{store:"organizaation-budgets",label:"Basic Details",content:"form",icon:"work",context:"Calendar of Events",count:1,formConf:{store:"organization-budgets",cancelTxt:"CANCEL",nextTxt:"SAVE",addStore:"organization-budgets",editStore:"organization-budgets",getStore:"organization-budgets"},detailsConf:[{label:"Applied Total",key:"total",icon:"account_balance",type:"currency"},{label:"Financial Year",key:"financial_year",icon:"calendar_today",type:"nested",fieldType:"nested_range",primaryField:"financial_year_data.starts_on",secondaryField:"financial_year_data.ends_on"},{label:"Status",key:"status",icon:"assessment",type:"status"},{label:"Organization Type",key:"organization",icon:"business",type:"nested",fieldType:"nested_string",primaryField:"organization_data.org_type_code"}],auditTrail:!0,orgSummary:!0,attachments:!0,totalsSummary:!0},{store:"branches",label:"Activities",content:"nested-list"},{store:"users",label:"Attachments",content:"attachments",gridConf:{getStore:"organisations",editStore:"organisations"},topActions:[{btnText:"ADD USER",status:"info",icon:"true",action:"inline",conf:{context:"USER",store:"users",btnText:"SAVE"}}],rows:[{key:"first_name",type:"string"},{key:"last_name",type:"string"},{key:"phone_number",type:"string"},{key:"email",type:"string"}],headers:[{title:"Names"},{title:"."},{title:"Phone Number"},{title:"Email"},{title:"Actions",oderable:!1,searchable:!1}],actions:[{btnText:"EDIT",status:"info",icon:!1,disableStatus:"FINISHED",action:"inline",modalConf:{store:"users",titleKey:"name",context:"Users",btnText:"SAVE"}}]}]},{key:"organization",tabs:[{store:"organisations",label:"Basic Details",content:"form",count:1,formConf:{store:"organisations",cancelTxt:"CANCEL",nextTxt:"SAVE",addStore:"organisations",editStore:"organisations",getStore:"organisations"},detailsConf:[{label:"Name",key:"name",icon:"business"},{label:"Organization Type",key:"org_type_code",icon:"account_balance"},{label:"Phone #",key:"phone_number",icon:"phone"},{label:"Email",key:"email",icon:"email"}],bankConfs:[{title:"Account Name",key:"account_name"},{title:"Account #",key:"account_number"},{title:"Bank",key:"bank_name"},{title:"Branch",key:"branch_name"}]},{store:"organization-members",label:"Athletes & Officials",content:"grid",modelKey:"organization",gridConf:{getStore:"organization-members",editStore:"organization-members"},topActions:[{btnText:"ADD MEMBER",status:"info",icon:"true",action:"inline",conf:{context:"MEMBER",store:"organization-members",btnText:"SAVE"}}],rows:[{key:"federation_number",fieldType:"nested_string",type:"nested",primaryField:"user.federation_number"},{key:"user.first_name",fieldType:"nested_multistrings",type:"nested",primaryField:"user.first_name",secondaryField:"user.last_name"},{key:"user.dob",fieldType:"nested_string",type:"nested",primaryField:"user.dob"},{key:"user.email",fieldType:"nested_string",type:"nested",primaryField:"user.email"},{key:"user.phone_number",fieldType:"nested_string",type:"nested",primaryField:"user.phone_number"},{key:"sports_category",type:"nested",fieldType:"nested_string",primaryField:"sports_category_data.name"}],headers:[{title:"Federation #"},{title:"Names"},{title:"Date of Birth"},{title:"Email"},{title:"Phone #"},{title:"Sports Category"},{title:"Actions",oderable:!1,searchable:!1}],actions:[{btnText:"EDIT",status:"info",icon:!1,disableStatus:"FINISHED",action:"inline",modalConf:{store:"organization-members",titleKey:"first_name",context:"MEMBER",btnText:"SAVE"}}]}]}];let ue=(()=>{class t{constructor(){this.configArray=me}getTabs(t){return h.find(this.configArray,{key:t})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=T.Kb({token:t,factory:t.\u0275fac}),t})(),he=(()=>{class t{}return t.\u0275mod=T.Mb({type:t}),t.\u0275inj=T.Lb({factory:function(e){return new(e||t)},providers:[ue],imports:[[o.a,n.k,c.c,r.b,St,l.c,zt.d,d.b,b.c,kt.f,Bt.e,p.c,be.b,de.a,Pt.d,m.a,u.a,le,s.n,a.a,s.z,pe,g.a]]}),t})();var fe=i("lk0u"),Te=i("IjP4"),ve=i("l51w");let ye=(()=>{class t{constructor(t){this._router=t,this.headers=[{title:"Name"},{title:"Type"},{title:"Phone #"},{title:"Email"},{title:"Actions"}],this.rows=[{key:"name",type:"string"},{key:"org_type_code",type:"string"},{key:"phone_number",type:"string"},{key:"email",type:"string"}],this.actions=[{btnText:"MANAGE",status:"accent",icon:!1,disableStatus:"FINISHED",action:"tabDetails",modalConf:{link:"/organizations/details",queryParams:{current:1,step:1}}}],this.pageHeaderActions=[{btnText:"ADD ORGANIZATION",status:"accent",icon:!0,bpType:["SASDEF"],roles:["SASDEF Admin"],modalConf:{link:"/organizations/add",queryParams:{current:1,step:1}}}]}pageHeaderAction(t){this._router.navigate(["/organizations/add"],{queryParams:{current:1}})}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(n.g))},t.\u0275cmp=T.Ib({type:t,selectors:[["organization-list"]],decls:5,vars:7,consts:[["title","Organizations",3,"actions","navigate"],[1,"w-100-p","d-flex","px-5"],[1,"w-100-p","px-5"],["title","Listing","store","organizations",1,"w-100-p",3,"headers","no-card","has-action","hasSearch","actions","rows"]],template:function(t,e){1&t&&(T.Ub(0,"div"),T.Ub(1,"page-header",0),T.cc("navigate",(function(t){return e.pageHeaderAction(t)})),T.Tb(),T.Tb(),T.Ub(2,"div",1),T.Ub(3,"div",2),T.Pb(4,"dynamic-table",3),T.Tb(),T.Tb()),2&t&&(T.Bb(1),T.mc("actions",e.pageHeaderActions),T.Bb(3),T.mc("headers",e.headers)("no-card",!1)("has-action",!0)("hasSearch",!0)("actions",e.actions)("rows",e.rows))},directives:[Te.a,ve.a],styles:["[_nghost-%COMP%]{\n            width: 100%;\n        }"]}),t})();var _e=i("HDdC"),xe=i("buby");function Ue(t,e){if(1&t){const t=T.Vb();T.Ub(0,"li"),T.Ub(1,"div",16),T.Ub(2,"div"),T.Ub(3,"mat-checkbox",17),T.cc("ngModelChange",(function(i){return T.zc(t),e.$implicit.approved=i}))("ngModelChange",(function(){return T.zc(t),T.gc(2).updateAllApproved()})),T.Ub(4,"div",18),T.Ub(5,"div",19),T.Lc(6),T.Tb(),T.Ub(7,"div",20),T.Ub(8,"div",21),T.Ub(9,"span",11),T.Lc(10,"Amount:"),T.Tb(),T.Lc(11),T.hc(12,"currency"),T.Tb(),T.Ub(13,"div",22),T.Ub(14,"div"),T.Ub(15,"mat-icon",21),T.Lc(16,"calendar_today"),T.Tb(),T.Tb(),T.Ub(17,"div",23),T.Lc(18),T.hc(19,"date"),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Pb(20,"div"),T.Tb(),T.Tb()}if(2&t){const t=e.$implicit;T.Bb(3),T.mc("ngModel",t.approved),T.Bb(3),T.Nc(" ",null==t?null:t.title," "),T.Bb(5),T.Nc(" ",T.jc(12,4,null==t?null:t.estimated_amount,"Kshs ")," "),T.Bb(7),T.Mc(T.jc(19,7,null==t?null:t.activity_date,"dd-MM-yyyy"))}}function Oe(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div",8),T.Ub(1,"div",9),T.Ub(2,"mat-checkbox",10),T.cc("change",(function(e){return T.zc(t),T.gc().setAllApproved(e.checked)})),T.Ub(3,"span",11),T.Lc(4,"Select to approve all activities"),T.Tb(),T.Tb(),T.Tb(),T.Pb(5,"div",12),T.Ub(6,"div",13),T.Ub(7,"ul",14),T.Jc(8,Ue,21,10,"li",15),T.Tb(),T.Tb(),T.Tb()}if(2&t){const t=T.gc();T.Bb(2),T.mc("checked",t.allApproved)("indeterminate",t.someApproved()),T.Bb(6),T.mc("ngForOf",t.activities)}}function we(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div",24),T.Ub(1,"div",25),T.Ub(2,"input",26),T.cc("change",(function(e){return T.zc(t),T.gc().fileChange(e)})),T.Tb(),T.Ub(3,"label",27),T.Ub(4,"div",28),T.Ub(5,"mat-icon",24),T.Lc(6),T.Tb(),T.Tb(),T.Ub(7,"div",29),T.Lc(8),T.Tb(),T.Tb(),T.Tb(),T.Tb()}if(2&t){const t=T.gc();T.Bb(2),T.mc("hidden",!0),T.Bb(4),T.Nc(" ",t.fileName?"attachment":"cloud_upload"," "),T.Bb(2),T.Nc(" ",t.fileName||"Upload Approval Attachments"," ")}}function Ce(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div",30),T.Ub(1,"button",31),T.cc("click",(function(){return T.zc(t),T.gc().closeDialog()})),T.Lc(2,"CLOSE"),T.Tb(),T.Ub(3,"button",32),T.cc("click",(function(){T.zc(t);const e=T.gc();return e.dialogActions[e.data.configs.action]()})),T.Lc(4),T.Tb(),T.Tb()}if(2&t){const t=T.gc();T.Bb(3),T.Gb("spinner",t.loading),T.mc("disabled",t.loading),T.Bb(1),T.Nc(" ",(null==t.data?null:t.data.action)||"SUBMIT"," ")}}function Ae(t,e){1&t&&(T.Ub(0,"div"),T.Lc(1," Comment is required "),T.Tb())}function Ie(t,e){if(1&t&&(T.Ub(0,"div",43),T.Jc(1,Ae,2,0,"div",44),T.Tb()),2&t){const t=T.gc(2);T.Bb(1),T.mc("ngIf",t.f.comment.errors.required)}}function Le(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div",33),T.Ub(1,"form",34),T.cc("ngSubmit",(function(){T.zc(t);const e=T.gc();return e.submitComment(e.commentForm)})),T.Ub(2,"div",35),T.Ub(3,"div",36),T.Ub(4,"mat-form-field",37),T.Ub(5,"mat-label"),T.Lc(6,"Enter a comment"),T.Tb(),T.Pb(7,"textarea",38),T.Tb(),T.Tb(),T.Jc(8,Ie,2,1,"div",39),T.Tb(),T.Ub(9,"div",40),T.Ub(10,"button",41),T.cc("click",(function(){return T.zc(t),T.gc().closeDialog()})),T.Lc(11,"CLOSE"),T.Tb(),T.Ub(12,"button",42),T.Lc(13,"SUBMIT"),T.Tb(),T.Tb(),T.Tb(),T.Tb()}if(2&t){const t=T.gc();T.Bb(1),T.mc("formGroup",t.commentForm),T.Bb(7),T.mc("ngIf",t.f.comment.invalid&&(t.f.comment.touched||t.f.comment.dirty)),T.Bb(4),T.Gb("spinner",t.loading),T.mc("disabled",t.loading)}}function Se(t,e){1&t&&(T.Ub(0,"div"),T.Lc(1," Approved amount is required "),T.Tb())}function ke(t,e){if(1&t&&(T.Ub(0,"div",43),T.Jc(1,Se,2,0,"div",44),T.Tb()),2&t){const t=T.gc(2);T.Bb(1),T.mc("ngIf",t.rA.revised_amount.errors.required)}}function ze(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div",33),T.Ub(1,"form",34),T.cc("ngSubmit",(function(){T.zc(t);const e=T.gc();return e.submitRevisedAmount(e.revisedAmountForm)})),T.Ub(2,"div",35),T.Ub(3,"div",36),T.Ub(4,"mat-form-field",37),T.Ub(5,"mat-label"),T.Lc(6,"Approved Amount"),T.Tb(),T.Pb(7,"input",45),T.Tb(),T.Ub(8,"div",46),T.Lc(9),T.hc(10,"currency"),T.Tb(),T.Tb(),T.Jc(11,ke,2,1,"div",39),T.Tb(),T.Ub(12,"div",40),T.Ub(13,"button",41),T.cc("click",(function(){return T.zc(t),T.gc().closeDialog()})),T.Lc(14,"CLOSE"),T.Tb(),T.Ub(15,"button",42),T.Lc(16,"SUBMIT"),T.Tb(),T.Tb(),T.Tb(),T.Tb()}if(2&t){const t=T.gc();T.Bb(1),T.mc("formGroup",t.revisedAmountForm),T.Bb(8),T.Mc(T.jc(10,6,t.rA.revised_amount.value,"Kshs ")),T.Bb(2),T.mc("ngIf",t.rA.revised_amount.invalid&&(t.rA.revised_amount.touched||t.rA.revised_amount.dirty)),T.Bb(4),T.Gb("spinner",t.loading),T.mc("disabled",t.loading)}}let Be=(()=>{class t{constructor(t,e,i,n,a){this.data=t,this._formBuilder=e,this._snackBar=i,this._dataLayer=n,this.dialogRef=a,this.activities=[],this.allApproved=!1,this.attachedDoc={},this.dialogActions={submitApplication:()=>{this.getUserOrganization(),this.loading=!0,this.transitionDocument({comment:this.comment||"Application submitted",review_status:"SUBMITTED",organization:this.organization,application:this.data.item.id},{successMsg:"Record has been submitted successfully"})},firstApproveApplication:()=>{this.getUserOrganization(),this.loading=!0,this.transitionDocument({comment:this.comment||"Application authorized",review_status:"FIRST_LEVEL_APPROVED",organization:this.organization,application:this.data.item.id},{successMsg:"Record has been authorized successfully"})},authorizeApplication:t=>{this.getUserOrganization(),this.loading=!0,this._dataLayer.update("applications",this.data.item.id,{revised_amount:t},{key:"current_org_id",value:this.organization}).subscribe(t=>{this.dialogActions.firstApproveApplication()},t=>{console.log(t),this._dataLayer.openDynamicSnackBar("An error occurred while authorizing application","error")})},rationalizeApplication:t=>{this.getUserOrganization();const e={comment:t||"Application rationalized",review_status:"RATIONALIZED",organization:this.organization,application:this.data.item.id},i={key:"current_org_id",value:this.organization};this.loading=!0,this._dataLayer.create(this.data.configs.store,e,void 0,i).subscribe(t=>{console.log(t),this.loading=!1,this.closeDialog("refresh"),this._dataLayer.openDynamicSnackBar("Application rationalized successfully","success")},t=>{console.log(t),this.loading=!1,this._dataLayer.openDynamicSnackBar("An error occurred","error")})},approveApplication:t=>{this.getUserOrganization(),this.loading=!0,this._dataLayer.create(this.data.configs.store,{comment:t||"Calendar of events approved",review_status:"SASDEF_APPROVED",organization:this.organization,application:this.data.item.id},void 0,{key:"current_org_id",value:this.organization}).subscribe(t=>{this.loading=!1,this.closeDialog("refresh"),this._dataLayer.openDynamicSnackBar("Application has been approved successfully","success")},t=>{console.log(t),this.loading=!1,this._dataLayer.openDynamicSnackBar("An error occurred","error")})},rejectApplication:t=>{this.getUserOrganization(),this.loading=!0,this._dataLayer.create(this.data.configs.store,{comment:this.comment||"Application rejected",review_status:"REJECTED",organization:this.organization,application:this.data.item.id},void 0,{key:"current_org_id",value:this.organization}).subscribe(t=>{this.loading=!1,this.closeDialog("refresh"),this._dataLayer.openDynamicSnackBar("Application has been rejected successfully","success")},t=>{console.log(t),this.loading=!1,this._dataLayer.openDynamicSnackBar("An error occurred","error")})},update:()=>{this.getUserOrganization(),this.loading=!0,this._dataLayer.update(this.data.configs.store,this.data.item.id,{status:"SUBMITTED"},{key:"current_org_id",value:this.organization}).subscribe(t=>{this.loading=!1,this.closeDialog("refresh"),this.openSnackBar("Record has been submitted successfully","CLOSE")},t=>{console.log(t),this.loading=!1,this.openSnackBar("An error occurred","CLOSE")})},submitted:()=>{this.getUserOrganization(),this.loading=!0,this._dataLayer.create(this.data.configs.store,{comment:this.comment||"Budget submitted",review_status:"SUBMITTED",organization:this.organization,org_budget:this.data.item.id}).subscribe(t=>{this.loading=!1,this.closeDialog("refresh"),this._dataLayer.openDynamicSnackBar("Budget has been submitted successfully","success")},t=>{console.log(t),this.loading=!1,this._dataLayer.openDynamicSnackBar("An error occurred","error")})},approve:t=>{this.getUserOrganization(),this.loading=!0,this._dataLayer.create(this.data.configs.store,{comment:t||"Calendar of events approved",review_status:"SASDEF_APPROVED",organization:this.organization,org_budget:this.data.item.id}).subscribe(t=>{this.loading=!1,this.closeDialog("refresh"),this._dataLayer.openDynamicSnackBar("Calendar of events has been approved successfully","success")},t=>{console.log(t),this.loading=!1,this._dataLayer.openDynamicSnackBar("An error occurred","error")})},rationalize:t=>{this.getUserOrganization();const e={comment:t||"Calendar of events rationalized",review_status:"RATIONALIZED",organization:this.organization,org_budget:this.data.item.id},i={key:"current_org_id",value:this.organization};this.loading=!0,this._dataLayer.create(this.data.configs.store,e,void 0,i).subscribe(t=>{console.log(t),this.loading=!1,this.closeDialog("refresh"),this._dataLayer.openDynamicSnackBar("Calendar of events rationalized successfully","success")},t=>{console.log(t),this.loading=!1,this._dataLayer.openDynamicSnackBar("An error occurred","error")})},approveBudget:t=>{const e={key:"current_org_id",value:this.organization};this.loading=!0,this.activities.forEach((i,n)=>{this._dataLayer.update("organization-budget-activities",i.id,{status:i.approved?"APPROVED":"REJECTED"},e).subscribe(e=>{n===this.activities.length-1&&this.dialogActions.approve(t)},t=>{console.log(t),this.loading=!1})})},reject:t=>{this.getUserOrganization(),this.loading=!0,this._dataLayer.create(this.data.configs.store,{comment:t||"Calendar of events rejected",review_status:"REJECTED",organization:this.organization,org_budget:this.data.item.id}).subscribe(t=>{this.loading=!1,this.closeDialog("refresh"),this._dataLayer.openDynamicSnackBar("Calendar of events has been rejected successfully","success")},t=>{console.log(t),this.loading=!1,this.openSnackBar("An error occurred","CLOSE")})}}}setFileName(){const t=this.attachedDoc.file.split("/");this.fileName=t[t.length-1]}formInit(){this.commentForm=this._formBuilder.group({comment:["",s.D.required]}),this.revisedAmountForm=this._formBuilder.group({revised_amount:["",s.D.required]}),Object(h.has)(this.data.configs,"revisedAmount")&&this.rA.revised_amount.setValue(this.data.item.amount_requested)}openSnackBar(t,e){this._snackBar.open(t,e,{duration:4e3})}getUserOrganization(){const t=JSON.parse(localStorage.getItem("organization"));this.organization=Object(h.get)(t,"organization",null)}transitionDocument(t,e){this._dataLayer.create(this.data.configs.store,t).subscribe(t=>{this.loading=!1,this.closeDialog("refresh"),this._dataLayer.openDynamicSnackBar(e.successMsg,"success"),Object(h.isUndefined)(this.fileName)||this._dataLayer.create("application-review-attachments",{organization:this.organization,application_review:t.id,attachment:this.attachedDoc.id},void 0,{key:"current_org_id",value:this.organization}).subscribe(t=>{},t=>{console.log(t),this._dataLayer.openDynamicSnackBar("An error occurred","error")})},t=>{console.log(t),this.loading=!1,this._dataLayer.openDynamicSnackBar("An error occurred","error")})}submitComment(t){t.valid&&this.dialogActions[this.data.configs.action](t.value.comment)}submitRevisedAmount(t){t.valid&&this.dialogActions[this.data.configs.action](t.value.revised_amount)}get f(){return this.commentForm.controls}get rA(){return this.revisedAmountForm.controls}submitAction(){console.log("Submit called")}closeDialog(t){this.dialogRef.close(t)}updateAllApproved(){this.allApproved=!Object(h.isEmpty)(this.activities)&&this.activities.every(t=>t.approved)}someApproved(){return!Object(h.isEmpty)(this.activities)&&this.activities.filter(t=>t.approved).length>0&&!this.allApproved}setAllApproved(t){this.allApproved=t,Object(h.isEmpty)(this.activities)||this.activities.forEach(e=>e.approved=t)}fetchNested(){this.getUserOrganization(),this._dataLayer.list("organization-budget-activities",{current_org_id:this.organization,org_budget:this.data.item.id}).subscribe(t=>{this.activities=t.results,this.setAllApproved(!0)},t=>{console.log(t)})}fileChange(t){const e={file:t.target.files[0],attachment_type:"APPLICATION_DOCUMENT"},i=new FormData;i.append("file",e.file),i.append("attachment_type",e.attachment_type),this._dataLayer.uploadFile("attachments",i).subscribe(t=>{this.attachedDoc=t,this.setFileName()},t=>{console.log(t)})}ngOnInit(){this.formInit(),"organization-budget-reviews"===this.data.configs.store&&this.fetchNested()}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(kt.a),T.Ob(s.g),T.Ob(Pt.b),T.Ob(xe.a),T.Ob(kt.g))},t.\u0275cmp=T.Ib({type:t,selectors:[["tabbed-dialog"]],features:[T.Ab([xe.a])],decls:13,vars:7,consts:[[1,"px-16","pt-8","pb-20"],["mat-dialog-title","",1,"pb-3","d-flex"],[1,"title-text","flex-fill"],["mat-dialog-content","",1,""],["class","pt-4",4,"ngIf"],["class","",4,"ngIf"],["mat-dialog-actions","","class","pt-5 pb-4 d-flex justify-content-end",4,"ngIf"],["mat-dialog-actions","","class","w-100-p pt-16 pb-4",4,"ngIf"],[1,"pt-4"],[1,"list-section","mb-n1","pt-16"],[1,"",3,"checked","indeterminate","change"],[1,"text-muted"],[1,"border-bottom","mt-2"],[1,"list-section","mt-0"],[1,"list-unstyled"],[4,"ngFor","ngForOf"],[1,"d-flex","align-items-center"],[3,"ngModel","ngModelChange"],[1,"pl-8","pt-2"],[1,"mb-n1"],[1,"d-flex"],[1,"font-size-14"],[1,"pl-3","font-size-14","d-flex"],[1,"ml-n2"],[1,""],[1,"attachemnt-wrapper","mb-1","pt-3"],["type","file","id","input-attachment",1,"ng-hide",3,"hidden","change"],["for","input-attachment",1,"mat-button","w-100-p","d-flex","pl-16","mat-elevation-z1","pt-2"],[1,"mt-2","pr-2"],[1,"pl-2"],["mat-dialog-actions","",1,"pt-5","pb-4","d-flex","justify-content-end"],["mat-button","","mat-dialog-close","",3,"click"],["mat-button","",3,"disabled","click"],["mat-dialog-actions","",1,"w-100-p","pt-16","pb-4"],["name","fmr",1,"w-100-p",3,"formGroup","ngSubmit"],[1,"w-100-p","pt-1"],[1,"input-wrapper","w-100-p"],["appearance","outline","color","primary",1,"w-100-p","pb-0","mb-0"],["name","comment","matInput","","id","","cols","30","rows","6","placeholder","Kindly enter a comment...","formControlName","comment"],["class","invalid-feedback",4,"ngIf"],[1,"btn-container","d-flex","justify-content-end"],["mat-button","","mat-dialog-close","","type","button",3,"click"],["mat-button","","type","submit",3,"disabled"],[1,"invalid-feedback"],[4,"ngIf"],["name","revised_amount","matInput","","placeholder","Kindly enter a approved amount...","formControlName","revised_amount"],[1,"mt-n4","text-muted"]],template:function(t,e){1&t&&(T.Ub(0,"div",0),T.Ub(1,"div",1),T.Ub(2,"div",2),T.Lc(3),T.Tb(),T.Pb(4,"div"),T.Tb(),T.Ub(5,"div",3),T.Ub(6,"div"),T.Lc(7),T.Tb(),T.Jc(8,Oe,9,3,"div",4),T.Jc(9,we,9,3,"div",5),T.Tb(),T.Jc(10,Ce,5,4,"div",6),T.Jc(11,Le,14,5,"div",7),T.Jc(12,ze,17,9,"div",7),T.Tb()),2&t&&(T.Bb(3),T.Mc((null==e.data?null:e.data.configs.title)||"SUBMIT"),T.Bb(4),T.Mc(null==e.data?null:e.data.configs.description),T.Bb(1),T.mc("ngIf",null==e.data?null:e.data.configs.approveNested),T.Bb(1),T.mc("ngIf",null==e.data?null:e.data.configs.reviewAttachment),T.Bb(1),T.mc("ngIf",!(null!=e.data&&e.data.configs.comment||null!=e.data&&e.data.configs.revisedAmount)),T.Bb(1),T.mc("ngIf",null==e.data?null:e.data.configs.comment),T.Bb(1),T.mc("ngIf",null==e.data?null:e.data.configs.revisedAmount))},directives:[kt.h,kt.e,c.t,be.a,c.s,s.r,s.u,r.a,kt.c,b.b,kt.d,s.F,s.s,s.l,Bt.c,Bt.g,p.b,s.e,s.j],pipes:[c.d,c.f],styles:['@-webkit-keyframes spinner{to{transform:rotate(1turn)}}@keyframes spinner{to{transform:rotate(1turn)}}[_nghost-%COMP%]     .spinner:before{content:"";box-sizing:border-box;position:absolute;top:50%;left:50%;width:20px;height:20px;margin-top:-10px;margin-left:-10px;border-radius:50%;border:2px solid #fff;border-top-color:#000;-webkit-animation:spinner .8s linear infinite;animation:spinner .8s linear infinite}']}),t})();var Pe=i("919n"),Ee=i("7ZA2"),Me=i("xsX5"),De=i("f5Zh");function Fe(t,e){if(1&t&&(T.Ub(0,"th",10),T.Lc(1),T.Tb()),2&t){const t=e.$implicit;T.Bb(1),T.Nc(" ",null==t?null:t.title," ")}}function Ne(t,e){1&t&&(T.Ub(0,"mat-icon"),T.Lc(1," remove "),T.Tb())}function je(t,e){if(1&t&&(T.Ub(0,"div"),T.Ub(1,"span"),T.Lc(2),T.hc(3,"removeUnderscore"),T.Tb(),T.Jc(4,Ne,2,0,"mat-icon",12),T.Tb()),2&t){const t=T.gc().$implicit,e=T.gc();T.Bb(2),T.Mc(T.ic(3,2,e.organization[t.key])),T.Bb(2),T.mc("ngIf",!e.organization[t.key])}}function Re(t,e){if(1&t&&(T.Ub(0,"td",11),T.Jc(1,je,5,4,"div",12),T.Tb()),2&t){const t=T.gc();T.Bb(1),T.mc("ngIf",t.organization)}}let Je=(()=>{class t{constructor(){this.gridConf=[{title:"Name",key:"name"},{title:"Phone #",key:"phone_number"},{title:"Email",key:"email"},{title:"Organization Type",key:"org_type_code"}]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=T.Ib({type:t,selectors:[["organization-summary"]],inputs:{organization:"organization"},decls:19,vars:2,consts:[[1,"w-100-p","pt-3"],[1,"px-5","pt-5","pb-3"],[1,"card"],[1,"card-header","pt-2","pb-1"],[1,"pl-3","text-muted","font-weight-bold","pb-2","d-flex","align-items-center"],[1,"pt-2","pr-2"],[1,"card-body","px-0","pb-1","pt-0"],[1,"table","borderless","font-size-13","mb-0"],["class","border-0 pl-20 font-size-12",4,"ngFor","ngForOf"],["class","pl-20",4,"ngFor","ngForOf"],[1,"border-0","pl-20","font-size-12"],[1,"pl-20"],[4,"ngIf"]],template:function(t,e){1&t&&(T.Ub(0,"div",0),T.Ub(1,"div",1),T.Ub(2,"div",2),T.Ub(3,"div",3),T.Ub(4,"div",4),T.Ub(5,"div",5),T.Ub(6,"mat-icon"),T.Lc(7,"business"),T.Tb(),T.Lc(8,"\xa0"),T.Tb(),T.Ub(9,"div"),T.Lc(10,"Organization"),T.Tb(),T.Tb(),T.Tb(),T.Ub(11,"div",6),T.Ub(12,"div"),T.Ub(13,"table",7),T.Ub(14,"thead"),T.Jc(15,Fe,2,1,"th",8),T.Tb(),T.Ub(16,"tbody"),T.Ub(17,"tr"),T.Jc(18,Re,2,1,"td",9),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb()),2&t&&(T.Bb(15),T.mc("ngForOf",e.gridConf),T.Bb(3),T.mc("ngForOf",e.gridConf))},directives:[r.a,c.s,c.t],pipes:[De.a],encapsulation:2}),t})();var Ve=i("B6Hu");function Ke(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div",18),T.Ub(1,"div",19),T.Ub(2,"mat-card",20),T.Ub(3,"div",21),T.Ub(4,"div",22),T.Ub(5,"div",23),T.Lc(6," ADD M&E "),T.Tb(),T.Ub(7,"div"),T.Ub(8,"span",24),T.cc("click",(function(){return T.zc(t),T.gc(2).toggleCreateForm()})),T.Lc(9," \xd7 "),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Ub(10,"div",25),T.Ub(11,"dynamic-form",26),T.cc("cancelFxn",(function(){return T.zc(t),T.gc(2).toggleCreateForm()}))("submitModel",(function(e){return T.zc(t),T.gc(2).receiveModel(e)})),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb()}if(2&t){const t=T.gc(2);T.Bb(11),T.mc("submitted",t.submitted)("baseCancel",!0)}}function He(t,e){if(1&t&&(T.Ub(0,"th",15),T.Lc(1),T.Tb()),2&t){const t=e.$implicit;T.Bb(1),T.Nc(" ",t.title," ")}}function $e(t,e){if(1&t&&(T.Ub(0,"div"),T.Ub(1,"div"),T.Lc(2),T.Ub(3,"span",32),T.Lc(4,"\xa0Attendees"),T.Tb(),T.Tb(),T.Ub(5,"div"),T.Lc(6),T.hc(7,"number"),T.Ub(8,"span",32),T.Lc(9,"\xa0days\xa0"),T.Tb(),T.Ub(10,"span"),T.Lc(11,"\xa0@\xa0"),T.Tb(),T.Ub(12,"span"),T.Lc(13),T.hc(14,"currency"),T.Tb(),T.Tb(),T.Tb()),2&t){const t=T.gc().$implicit,e=T.gc().$implicit;T.Bb(2),T.Nc(" ",e[t.key]," "),T.Bb(4),T.Nc(" ",T.jc(7,3,e.days,"1.0")," "),T.Bb(7),T.Nc(" \xa0",T.jc(14,6,e.unit_price,"Kshs ")," ")}}function Ge(t,e){if(1&t&&(T.Ub(0,"div"),T.Lc(1),T.hc(2,"currency"),T.Tb()),2&t){const t=T.gc(2).$implicit;T.Bb(1),T.Nc(" ",T.jc(2,1,t.head_count*t.days*t.unit_price,"Kshs ")," ")}}function qe(t,e){if(1&t&&(T.Ub(0,"div"),T.Lc(1),T.Tb()),2&t){const t=T.gc().$implicit,e=T.gc().$implicit;T.Bb(1),T.Nc(" ",e[t.key]," ")}}function We(t,e){1&t&&(T.Ub(0,"mat-icon"),T.Lc(1," remove "),T.Tb())}function Ye(t,e){if(1&t&&(T.Ub(0,"td",31),T.Jc(1,$e,15,9,"div",17),T.Jc(2,Ge,3,4,"div",17),T.Jc(3,qe,2,1,"div",17),T.Jc(4,We,2,0,"mat-icon",17),T.Tb()),2&t){const t=e.$implicit,i=T.gc().$implicit;T.mc("hidden",i.showInline),T.Bb(1),T.mc("ngIf","head_count"===t.key),T.Bb(1),T.mc("ngIf","total"===t.key),T.Bb(1),T.mc("ngIf","head_count"!==t.key&&"total"!==t.key),T.Bb(1),T.mc("ngIf",!i[t.key]&&"total"!==t.key)}}function Ze(t,e){if(1&t){const t=T.Vb();T.Ub(0,"td",33),T.Ub(1,"div",34),T.Ub(2,"mat-card",20),T.Ub(3,"div",21),T.Ub(4,"div",22),T.Ub(5,"div",23),T.Lc(6," EDIT BANK DETAILS "),T.Tb(),T.Ub(7,"div"),T.Ub(8,"span",24),T.cc("click",(function(){T.zc(t);const e=T.gc().$implicit;return T.gc(2).toggleForm(e)})),T.Lc(9," \xd7 "),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Ub(10,"div",25),T.Ub(11,"dynamic-form",35),T.cc("cancelFxn",(function(){T.zc(t);const e=T.gc().$implicit;return T.gc(2).toggleForm(e)}))("submitModel",(function(e){return T.zc(t),T.gc(3).receiveModel(e)})),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb()}if(2&t){const t=T.gc().$implicit,e=T.gc(2);T.Cb("colspan",(null==e.tab?null:e.tab.bankConfs.length)+1),T.Bb(11),T.mc("model",t)("submitted",e.submitted)("baseCancel",!0)}}function Qe(t,e){if(1&t){const t=T.Vb();T.Ub(0,"tr"),T.Jc(1,Ye,5,5,"td",27),T.Ub(2,"td",28),T.Ub(3,"button",29),T.cc("click",(function(){T.zc(t);const i=e.$implicit;return T.gc(2).toggleForm(i)})),T.Lc(4," Edit "),T.Tb(),T.Tb(),T.Jc(5,Ze,12,4,"td",30),T.Tb()}if(2&t){const t=e.$implicit,i=T.gc(2);T.Bb(1),T.mc("ngForOf",i.gridConf),T.Bb(1),T.mc("hidden",t.showInline),T.Bb(3),T.mc("ngIf",t.showInline)}}function Xe(t,e){if(1&t&&(T.Ub(0,"tr"),T.Ub(1,"td",36),T.Ub(2,"div",37),T.Ub(3,"div",38),T.Ub(4,"div",39),T.Ub(5,"div",40),T.Ub(6,"mat-icon"),T.Lc(7," info_circle "),T.Tb(),T.Tb(),T.Ub(8,"div",7),T.Lc(9," There is currently no Monitoring & Evaluation details added for this application. "),T.Tb(),T.Pb(10,"div",41),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb()),2&t){const t=T.gc(2);T.Bb(1),T.Cb("colspan",t.gridConf.length+1)}}function ti(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div",1),T.Ub(1,"div",2),T.Ub(2,"div",3),T.Ub(3,"div",4),T.Ub(4,"div",5),T.Ub(5,"div",6),T.Ub(6,"mat-icon"),T.Lc(7,"people"),T.Tb(),T.Lc(8,"\xa0"),T.Tb(),T.Ub(9,"div",7),T.Lc(10,"Monitoring & Evaluation"),T.Tb(),T.Ub(11,"div",8),T.Ub(12,"button",9),T.cc("click",(function(){return T.zc(t),T.gc().toggleCreateForm()})),T.Ub(13,"mat-icon"),T.Lc(14,"add"),T.Tb(),T.Lc(15,"\xa0 ADD M&E "),T.Tb(),T.Tb(),T.Tb(),T.Jc(16,Ke,12,2,"div",10),T.Tb(),T.Ub(17,"div",11),T.Ub(18,"div"),T.Ub(19,"table",12),T.Ub(20,"thead",13),T.Jc(21,He,2,1,"th",14),T.Pb(22,"th",15),T.Tb(),T.Ub(23,"tbody"),T.Jc(24,Qe,6,3,"tr",16),T.Jc(25,Xe,11,1,"tr",17),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb()}if(2&t){const t=T.gc();T.Bb(16),T.mc("ngIf",t.showForm),T.Bb(5),T.mc("ngForOf",t.gridConf),T.Bb(3),T.mc("ngForOf",t.list),T.Bb(1),T.mc("ngIf",!(null!=t.list&&t.list.length))}}let ei=(()=>{class t{constructor(t,e){this._dataLayer=t,this._authConfig=e,this.list=[],this.gridConf=[{title:"Attendees",key:"head_count"},{title:"Total",key:"total"},{title:"Description",key:"description"}],this.postObj={organiazation:"",application:"",amount:"",quantity:"",description:""}}toggleForm(t){t.showInline=!t.showInline}toggleCreateForm(){this.showForm=!this.showForm}getList(){this.loading=!0,this._dataLayer.list("application-mes",{current_org_id:this.orgId,application:this.item.id}).subscribe(t=>{this.loading=!1,this.list=t.results},t=>{this.loading=!1,console.log(t)})}receiveModel(t){Object(h.has)(t,"id")?this._dataLayer.update("application-mes",t.id,t,{key:"current_org_id",value:this.orgId}).subscribe(()=>{this.getList()},t=>console.log(t)):(t=Object.assign(Object.assign({},t),{organization:this.orgId,application:this.item.id}),this._dataLayer.create("application-mes",t,void 0,{key:"current_org_id",value:this.orgId}).subscribe(()=>{this.getList(),this.toggleCreateForm(),this._dataLayer.openDynamicSnackBar("M&E Item succesfully added","success")},t=>{this._dataLayer.openDynamicSnackBar("An error occurred while adding M&E item. Try again","error")}))}ngOnInit(){const t=JSON.parse(this._authConfig.getOrganization());this.orgId=Object(h.get)(t,"organization",null),this.orgType=Object(h.get)(t,"org_type",null),this.getList()}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(xe.a),T.Ob(Ee.a))},t.\u0275cmp=T.Ib({type:t,selectors:[["application-me"]],inputs:{item:"item"},decls:1,vars:1,consts:[["class","px-20 pt-20 pb-12",4,"ngIf"],[1,"px-20","pt-20","pb-12"],[1,"px-20"],[1,"card"],[1,"card-header","pt-3","bg-white"],[1,"pl-3","text-muted","font-weight-bold","pb-2","d-flex","align-items-center"],[1,"pt-2","pr-2"],[1,"flex-fill"],[1,"pt-2"],["mat-raised-button","","color","default",1,"pl-3","mt-n2",3,"click"],["class","col-12 bg-light py-16","style","margin: auto;",4,"ngIf"],[1,"card-body","px-0","pb-1","pt-0"],[1,"table","borderless","font-size-13"],[1,"thead-light","font-size-12"],["class","border-0 pl-20",4,"ngFor","ngForOf"],[1,"border-0","pl-20"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-12","bg-light","py-16",2,"margin","auto"],[1,"col-lg-9",2,"margin","auto"],[1,"card","p-0"],[1,"card-header","py-0"],[1,"d-flex"],[1,"flex-fill","pt-3"],[1,"font-size-28","text-muted",2,"cursor","pointer",3,"click"],[1,"card-body","px-5","pt-5"],["btnText","SAVE","btnClass","tiny","store","application-me","btnStatus","primary",3,"submitted","baseCancel","cancelFxn","submitModel"],["class","pl-20 vertical-align-center","valign","middle",3,"hidden",4,"ngFor","ngForOf"],["valign","middle",1,"vertical-align-center",3,"hidden"],["mat-stroked-button","","color","accent",3,"click"],["class","bg-light-grey py-3 px-5",4,"ngIf"],["valign","middle",1,"pl-20","vertical-align-center",3,"hidden"],[1,"text-muted"],[1,"bg-light-grey","py-3","px-5"],[1,"col-12","col-lg-8",2,"margin","auto"],["btnText","SAVE","btnClass","tiny","store","organization-bank-accounts","btnStatus","primary",3,"model","submitted","baseCancel","cancelFxn","submitModel"],[1,"pb-0","mb-0"],[1,"w-100-p","px-3"],[1,"alert","alert-primary","mb-0","pb-2","pt-3"],[1,"d-flex","align-items-center"],[1,"pr-20"],[1,"pr-8"]],template:function(t,e){1&t&&T.Jc(0,ti,26,4,"div",0),2&t&&T.mc("ngIf","SASDEF"===e.orgType)},directives:[c.t,r.a,b.b,c.s,l.a,Ve.a],pipes:[c.g,c.d],encapsulation:2}),t})();function ii(t,e){if(1&t&&(T.Ub(0,"th",8),T.Lc(1),T.Tb()),2&t){const t=e.$implicit;T.Bb(1),T.Nc(" ",t.title," ")}}function ni(t,e){1&t&&(T.Ub(0,"mat-icon"),T.Lc(1," remove "),T.Tb())}function ai(t,e){if(1&t&&(T.Ub(0,"td",15),T.Lc(1),T.Jc(2,ni,2,0,"mat-icon",10),T.Tb()),2&t){const t=e.$implicit,i=T.gc().$implicit;T.mc("hidden",i.showInline),T.Bb(1),T.Nc(" ",i[t.key]," "),T.Bb(1),T.mc("ngIf",!i[t.key])}}function oi(t,e){if(1&t){const t=T.Vb();T.Ub(0,"td",16),T.Ub(1,"div",17),T.Ub(2,"mat-card",18),T.Ub(3,"div",19),T.Ub(4,"div",20),T.Ub(5,"div",21),T.Lc(6," EDIT BANK DETAILS "),T.Tb(),T.Ub(7,"div"),T.Ub(8,"span",22),T.cc("click",(function(){T.zc(t);const e=T.gc().$implicit;return T.gc().toggleForm(e)})),T.Lc(9," \xd7 "),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Ub(10,"div",23),T.Ub(11,"dynamic-form",24),T.cc("cancelFxn",(function(){T.zc(t);const e=T.gc().$implicit;return T.gc().toggleForm(e)}))("submitModel",(function(e){return T.zc(t),T.gc(2).receiveModel(e)})),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb()}if(2&t){const t=T.gc().$implicit,e=T.gc();T.Cb("colspan",(null==e.tab?null:e.tab.bankConfs.length)+1),T.Bb(11),T.mc("model",t)("submitted",e.submitted)("baseCancel",!0)}}function si(t,e){if(1&t){const t=T.Vb();T.Ub(0,"tr"),T.Jc(1,ai,3,3,"td",11),T.Ub(2,"td",12),T.Ub(3,"button",13),T.cc("click",(function(){T.zc(t);const i=e.$implicit;return T.gc().toggleForm(i)})),T.Lc(4," Edit "),T.Tb(),T.Tb(),T.Jc(5,oi,12,4,"td",14),T.Tb()}if(2&t){const t=e.$implicit,i=T.gc();T.Bb(1),T.mc("ngForOf",null==i.tab?null:i.tab.bankConfs),T.Bb(1),T.mc("hidden",t.showInline),T.Bb(3),T.mc("ngIf",t.showInline)}}function ci(t,e){if(1&t){const t=T.Vb();T.Ub(0,"td",26),T.Ub(1,"div",27),T.Ub(2,"div",28),T.Ub(3,"div",29),T.Ub(4,"div",30),T.Ub(5,"mat-icon"),T.Lc(6," info_circle "),T.Tb(),T.Tb(),T.Ub(7,"div",31),T.Lc(8," There is currently no bank account registered for this organization "),T.Tb(),T.Ub(9,"div",32),T.Ub(10,"button",33),T.cc("click",(function(){return T.zc(t),T.gc(2).toggleCreateForm()})),T.Ub(11,"mat-icon"),T.Lc(12,"add"),T.Tb(),T.Lc(13,"\xa0 ADD ACCOUNT "),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb()}if(2&t){const t=T.gc(2);T.Cb("colspan",(null==t.tab?null:t.tab.bankConfs.length)+1)}}function ri(t,e){if(1&t){const t=T.Vb();T.Ub(0,"td",16),T.Ub(1,"div",17),T.Ub(2,"mat-card",18),T.Ub(3,"div",19),T.Ub(4,"div",20),T.Ub(5,"div",21),T.Lc(6," ADD BANK DETAILS "),T.Tb(),T.Ub(7,"div"),T.Ub(8,"span",22),T.cc("click",(function(){return T.zc(t),T.gc(2).toggleCreateForm()})),T.Lc(9," \xd7 "),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Ub(10,"div",23),T.Ub(11,"dynamic-form",34),T.cc("cancelFxn",(function(){return T.zc(t),T.gc(2).toggleCreateForm()}))("submitModel",(function(e){return T.zc(t),T.gc(2).receiveModel(e)})),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb()}if(2&t){const t=T.gc(2);T.Cb("colspan",(null==t.tab?null:t.tab.bankConfs.length)+1),T.Bb(11),T.mc("submitted",t.submitted)("baseCancel",!0)}}function li(t,e){if(1&t&&(T.Ub(0,"tr"),T.Jc(1,ci,14,1,"td",25),T.Jc(2,ri,12,3,"td",14),T.Tb()),2&t){const t=T.gc();T.Bb(1),T.mc("ngIf",!t.showForm),T.Bb(1),T.mc("ngIf",t.showForm)}}let bi=(()=>{class t{constructor(t,e){this._dataLayer=t,this._authConfig=e,this.loading=!0,this.list=[]}toggleForm(t){t.showInline=!t.showInline}toggleCreateForm(){this.showForm=!this.showForm}getBankAccount(){this._dataLayer.list("organization-bank-accounts",{current_org_id:this.organization,organization:this.parentKey?this.item[this.parentKey]:this.item.id}).subscribe(t=>{this.list=t.results,this.loading=!1},t=>{this.loading=!1,console.log(t)})}receiveModel(t){Object(h.has)(t,"id")?this._dataLayer.update("organization-bank-accounts",t.id,t,{key:"current_org_id",value:this.organization}).subscribe(()=>{this.getBankAccount()},t=>console.log(t)):(t=Object.assign(Object.assign({},t),{organization:this.item.id}),this._dataLayer.create("organization-bank-accounts",t).subscribe(()=>{this.getBankAccount()},t=>console.log(t)))}ngOnInit(){this.organization=Object(h.get)(JSON.parse(this._authConfig.getOrganization()),"organization",null),this.getBankAccount()}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(xe.a),T.Ob(Ee.a))},t.\u0275cmp=T.Ib({type:t,selectors:[["tabbed-inline-list"]],inputs:{tab:"tab",item:"item",parentKey:"parentKey"},decls:18,vars:3,consts:[[1,"card"],[1,"card-header","pt-3","bg-white"],[1,"pl-3","text-muted","font-weight-bold","pb-2","d-flex","align-items-center"],[1,"pt-2","pr-2"],[1,"card-body","px-0","pb-1","pt-0"],[1,"table","borderless","font-size-13"],[1,"thead-light","font-size-12"],["class","border-0 pl-20",4,"ngFor","ngForOf"],[1,"border-0","pl-20"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","pl-20 vertical-align-center","valign","middle",3,"hidden",4,"ngFor","ngForOf"],["valign","middle",1,"vertical-align-center",3,"hidden"],["mat-stroked-button","","color","accent",3,"click"],["class","bg-light-grey py-3 px-5",4,"ngIf"],["valign","middle",1,"pl-20","vertical-align-center",3,"hidden"],[1,"bg-light-grey","py-3","px-5"],[1,"col-12","col-lg-8",2,"margin","auto"],[1,"card","p-0"],[1,"card-header","py-0"],[1,"d-flex"],[1,"flex-fill","pt-3"],[1,"font-size-28","text-muted",2,"cursor","pointer",3,"click"],[1,"card-body","px-5","pt-5"],["btnText","SAVE","btnClass","tiny","store","organization-bank-accounts","btnStatus","primary",3,"model","submitted","baseCancel","cancelFxn","submitModel"],["class","pb-0 mb-0",4,"ngIf"],[1,"pb-0","mb-0"],[1,"w-100-p","px-3"],[1,"alert","alert-primary","mb-0","pb-2","pt-3"],[1,"d-flex","align-items-center"],[1,"pr-20"],[1,"flex-fill"],[1,"pr-8"],["mat-raised-button","","color","default",1,"pl-3","mt-n2",3,"click"],["btnText","SAVE","btnClass","tiny","store","organization-bank-accounts","btnStatus","primary",3,"submitted","baseCancel","cancelFxn","submitModel"]],template:function(t,e){1&t&&(T.Ub(0,"div",0),T.Ub(1,"div",1),T.Ub(2,"div",2),T.Ub(3,"div",3),T.Ub(4,"mat-icon"),T.Lc(5,"account_balance"),T.Tb(),T.Lc(6,"\xa0"),T.Tb(),T.Ub(7,"div"),T.Lc(8,"Bank Account"),T.Tb(),T.Tb(),T.Tb(),T.Ub(9,"div",4),T.Ub(10,"div"),T.Ub(11,"table",5),T.Ub(12,"thead",6),T.Jc(13,ii,2,1,"th",7),T.Pb(14,"th",8),T.Tb(),T.Ub(15,"tbody"),T.Jc(16,si,6,3,"tr",9),T.Jc(17,li,3,2,"tr",10),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb()),2&t&&(T.Bb(13),T.mc("ngForOf",null==e.tab?null:e.tab.bankConfs),T.Bb(3),T.mc("ngForOf",e.list),T.Bb(1),T.mc("ngIf",!(null!=e.list&&e.list.length)))},directives:[r.a,c.s,c.t,b.b,l.a,Ve.a],encapsulation:2}),t})();function di(t,e){if(1&t&&(T.Ub(0,"th",17),T.Lc(1),T.Tb()),2&t){const t=e.$implicit;T.Bb(1),T.Nc(" ",null==t?null:t.title," ")}}function pi(t,e){1&t&&(T.Ub(0,"mat-icon"),T.Lc(1," remove "),T.Tb())}function gi(t,e){if(1&t&&(T.Ub(0,"div"),T.Ub(1,"span"),T.Lc(2),T.Tb(),T.Jc(3,pi,2,0,"mat-icon",19),T.Tb()),2&t){const t=T.gc(2).$implicit,e=T.gc();T.Bb(2),T.Mc(e.activityDetails[t.key]),T.Bb(1),T.mc("ngIf",!e.activityDetails[t.key])}}function mi(t,e){1&t&&(T.Ub(0,"mat-icon"),T.Lc(1," remove "),T.Tb())}function ui(t,e){if(1&t&&(T.Ub(0,"span"),T.Ub(1,"span"),T.Lc(2),T.hc(3,"date"),T.Tb(),T.Jc(4,mi,2,0,"mat-icon",19),T.Tb()),2&t){const t=T.gc(2).$implicit,e=T.gc();T.Bb(2),T.Mc(T.jc(3,2,e.activityDetails[t.key],"dd-MM-yyyy")),T.Bb(2),T.mc("ngIf",!e.activityDetails[t.key])}}function hi(t,e){1&t&&(T.Ub(0,"mat-icon"),T.Lc(1," remove "),T.Tb())}function fi(t,e){if(1&t&&(T.Ub(0,"span"),T.Ub(1,"span"),T.Lc(2),T.hc(3,"currency"),T.Tb(),T.Jc(4,hi,2,0,"mat-icon",19),T.Tb()),2&t){const t=T.gc(2).$implicit,e=T.gc();T.Bb(2),T.Mc(T.jc(3,2,e.activityDetails[t.key],"Kshs ")),T.Bb(2),T.mc("ngIf",!e.activityDetails[t.key])}}function Ti(t,e){1&t&&(T.Ub(0,"mat-icon"),T.Lc(1," remove "),T.Tb())}function vi(t,e){if(1&t&&(T.Ub(0,"span"),T.Ub(1,"span"),T.Lc(2),T.hc(3,"currency"),T.Tb(),T.Jc(4,Ti,2,0,"mat-icon",19),T.Tb()),2&t){const t=T.gc(2).$implicit,e=T.gc();T.Bb(2),T.Mc(T.jc(3,2,e.activityDetails[t.key],"Kshs ")),T.Bb(2),T.mc("ngIf",!e.activityDetails[t.key])}}function yi(t,e){1&t&&(T.Ub(0,"mat-icon"),T.Lc(1," remove "),T.Tb())}function _i(t,e){if(1&t&&(T.Ub(0,"span"),T.Ub(1,"span"),T.Lc(2),T.hc(3,"currency"),T.Tb(),T.Jc(4,yi,2,0,"mat-icon",19),T.Tb()),2&t){const t=T.gc(2).$implicit,e=T.gc();T.Bb(2),T.Mc(T.jc(3,2,e.activityDetails[t.key],"Kshs ")),T.Bb(2),T.mc("ngIf",!e.activityDetails[t.key])}}function xi(t,e){1&t&&(T.Ub(0,"mat-icon"),T.Lc(1," remove "),T.Tb())}function Ui(t,e){if(1&t&&(T.Ub(0,"span"),T.Ub(1,"span"),T.hc(2,"lowercase"),T.Lc(3),T.Tb(),T.Jc(4,xi,2,0,"mat-icon",19),T.Tb()),2&t){const t=T.gc(2).$implicit,e=T.gc();T.Bb(1),T.Eb("badge ",T.ic(2,5,e.activityDetails[t.key]),""),T.Bb(2),T.Nc(" ",e.activityDetails[t.key]," "),T.Bb(1),T.mc("ngIf",!e.activityDetails[t.key])}}function Oi(t,e){if(1&t&&(T.Ub(0,"div"),T.Jc(1,gi,4,2,"div",19),T.Jc(2,ui,5,5,"span",19),T.Jc(3,fi,5,5,"span",19),T.Jc(4,vi,5,5,"span",19),T.Jc(5,_i,5,5,"span",19),T.Jc(6,Ui,5,7,"span",19),T.Tb()),2&t){const t=T.gc().$implicit;T.Bb(1),T.mc("ngIf","title"===t.key),T.Bb(1),T.mc("ngIf","activity_date"===t.key),T.Bb(1),T.mc("ngIf","total"===t.key),T.Bb(1),T.mc("ngIf","rationalized_total"===t.key),T.Bb(1),T.mc("ngIf","actual_total"===t.key),T.Bb(1),T.mc("ngIf","status"===t.key)}}function wi(t,e){if(1&t&&(T.Ub(0,"td",18),T.Jc(1,Oi,7,6,"div",19),T.Tb()),2&t){const t=T.gc();T.Bb(1),T.mc("ngIf",t.activityDetails)}}function Ci(t,e){if(1&t&&(T.Ub(0,"mat-list-item",20),T.Ub(1,"mat-icon",21),T.Lc(2,"note"),T.Tb(),T.Ub(3,"h4",22),T.Lc(4),T.Tb(),T.Ub(5,"div",23),T.Ub(6,"div",24),T.Ub(7,"p",25),T.Ub(8,"span",14),T.Lc(9,"Rationalized:"),T.Tb(),T.Lc(10),T.hc(11,"currency"),T.Tb(),T.Tb(),T.Ub(12,"div",26),T.Ub(13,"p",25),T.Ub(14,"span",14),T.Lc(15,"Approved:"),T.Tb(),T.Lc(16),T.hc(17,"currency"),T.Tb(),T.Tb(),T.Tb(),T.Tb()),2&t){const t=e.$implicit;T.Bb(4),T.Mc(t.title),T.Bb(6),T.Nc("\xa0 ",T.jc(11,3,t.rationalized_total,"Kshs ")," "),T.Bb(6),T.Nc("\xa0 ",T.jc(17,6,t.actual_total,"Kshs ")," ")}}let Ai=(()=>{class t{constructor(t,e){this._dataLayer=t,this._authConfig=e,this.gridConf=[{title:"Title",key:"title"},{title:"Activity Date",key:"activity_date"},{title:"Applied",key:"total"},{title:"Rationalized",key:"rationalized_total"},{title:"Approved Total",key:"actual_total"}]}getItemBudget(){this._dataLayer.get("organization-budgets",this.item.budget,{current_org_id:this.orgId}).subscribe(t=>{this.activityBudget=t,this._dataLayer.list("organization-budget-activities",{current_org_id:this.orgId,org_budget:this.item.budget}).subscribe(t=>{this.activityBudget.activities=t.results},t=>console.log(t))},t=>console.log(t))}getItemActivity(){this._dataLayer.get("organization-budget-activities",this.item.activity,{current_org_id:this.orgId}).subscribe(t=>{this.activityDetails=t},t=>console.log(t))}ngOnInit(){this.organization=JSON.parse(this._authConfig.getOrganization()),this.orgId=Object(h.get)(this.organization,"organization"),this.getItemActivity(),this.getItemBudget()}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(xe.a),T.Ob(Ee.a))},t.\u0275cmp=T.Ib({type:t,selectors:[["activity-summary"]],inputs:{activity:"activity",item:"item"},features:[T.Ab([xe.a])],decls:37,vars:12,consts:[[1,"w-100-p","pt-3"],[1,"px-5","pt-5","pb-3"],[1,"card"],[1,"card-header","pt-2","pb-1","bg-white"],[1,"pl-3","text-muted","font-weight-bold","pb-2","d-flex","align-items-center"],[1,"pt-2","pr-2"],[1,"card-body","px-0","pb-16","pt-0"],[1,"table","borderless","font-ize-13","mb-0"],[1,"thead-light","font-size-12"],["class","border-0 pl-20",4,"ngFor","ngForOf"],["class","pl-20",4,"ngFor","ngForOf"],[1,"pb-0"],[1,"card","border-0","mb-n3"],[3,"opened","closed"],[1,"text-muted"],[1,"mt-n5"],["class","ml-n3 py-0 mb-n3",4,"ngFor","ngForOf"],[1,"border-0","pl-20"],[1,"pl-20"],[4,"ngIf"],[1,"ml-n3","py-0","mb-n3"],["matListIcon",""],["matLine",""],["matLine","",1,"list-inline","d-flex","flex-row","font-size-12","mb-0"],[1,"list-inline-item","pl-0"],[1,"demo-2"],[1,"list-inline-item","pl-3"]],template:function(t,e){1&t&&(T.Ub(0,"div",0),T.Ub(1,"div",1),T.Ub(2,"div",2),T.Ub(3,"div",3),T.Ub(4,"div",4),T.Ub(5,"div",5),T.Ub(6,"mat-icon"),T.Lc(7,"games"),T.Tb(),T.Lc(8,"\xa0"),T.Tb(),T.Ub(9,"div"),T.Lc(10,"Activity"),T.Tb(),T.Tb(),T.Tb(),T.Ub(11,"div",6),T.Ub(12,"div"),T.Ub(13,"table",7),T.Ub(14,"thead",8),T.Jc(15,di,2,1,"th",9),T.Tb(),T.Ub(16,"tbody"),T.Ub(17,"tr"),T.Jc(18,wi,2,1,"td",10),T.Tb(),T.Ub(19,"tr"),T.Ub(20,"td",11),T.Ub(21,"div",12),T.Ub(22,"mat-accordion"),T.Ub(23,"mat-expansion-panel",13),T.cc("opened",(function(){return e.panelOpenState=!0}))("closed",(function(){return e.panelOpenState=!1})),T.Ub(24,"mat-expansion-panel-header"),T.Ub(25,"mat-panel-title"),T.Ub(26,"span",14),T.Lc(27,"Total Budget"),T.Tb(),T.Lc(28),T.hc(29,"currency"),T.Tb(),T.Ub(30,"mat-panel-description"),T.Lc(31," Budget Date: \xa0"),T.Ub(32,"b"),T.Lc(33),T.hc(34,"date"),T.Tb(),T.Tb(),T.Tb(),T.Ub(35,"mat-list",15),T.Jc(36,Ci,18,9,"mat-list-item",16),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb()),2&t&&(T.Bb(15),T.mc("ngForOf",e.gridConf),T.Bb(3),T.mc("ngForOf",e.gridConf),T.Bb(2),T.Cb("colspan",null==e.gridConf?null:e.gridConf.length),T.Bb(8),T.Nc(" \xa0 -\xa0 ",T.jc(29,6,null==e.activityBudget?null:e.activityBudget.actual_total,"Kshs ")," "),T.Bb(5),T.Mc(T.jc(34,9,null==e.activityDetails?null:e.activityDetails.created,"dd-MM-yyyy")),T.Bb(3),T.mc("ngForOf",null==e.activityBudget?null:e.activityBudget.activities))},directives:[r.a,c.s,ce,ne,ae,se,oe,zt.a,c.t,zt.c,zt.b,U.j],pipes:[c.d,c.f,c.p],styles:["[_nghost-%COMP%]    {width:100%}[_nghost-%COMP%]     .back-arrow i:hover{cursor:pointer;text-shadow:1px 3px 1px rgba(0,0,0,.3)}[_nghost-%COMP%]     .main-cont{background-color:#146b3a!important;width:auto!important;transition:all .5s cubic-bezier(0,0,.2,1)!important;left:13rem;right:0;padding:3.05rem 4.5rem 7.5rem;margin-bottom:-4.75rem}[_nghost-%COMP%]     .main-cont .title{font-size:2rem;color:#fff}[_nghost-%COMP%]     .back-btn{color:#fff}[_nghost-%COMP%]     .back-btn:hover{cursor:pointer;text-shadow:1px 3px 1px rgba(0,0,0,.3)}[_nghost-%COMP%]     .badge.created, [_nghost-%COMP%]     .badge.draft, [_nghost-%COMP%]     .badge.on_going, [_nghost-%COMP%]     .badge.open, [_nghost-%COMP%]     .badge.pending{background-color:#ffc107;color:#212529}[_nghost-%COMP%]     .badge.assigned, [_nghost-%COMP%]     .badge.first_level_approved, [_nghost-%COMP%]     .badge.rationalized, [_nghost-%COMP%]     .badge.submitted{background-color:#2196f3;color:#fff}[_nghost-%COMP%]     .badge.cancelled, [_nghost-%COMP%]     .badge.rejected{background-color:#dc3545;color:#fff}[_nghost-%COMP%]     .badge.overdue{background-color:#343a40;color:#fff}[_nghost-%COMP%]     .badge.accepted, [_nghost-%COMP%]     .badge.approved, [_nghost-%COMP%]     .badge.completed, [_nghost-%COMP%]     .badge.final_approved, [_nghost-%COMP%]     .badge.finished, [_nghost-%COMP%]     .badge.sasdef_approved{background-color:#28a745;color:#fff}[_nghost-%COMP%]     #print{display:none}@media print{[_nghost-%COMP%]     #no-print{display:none!important}[_nghost-%COMP%]     #print{display:flex}[_nghost-%COMP%]     #print body, [_nghost-%COMP%]     #print h1, [_nghost-%COMP%]     #print h2, [_nghost-%COMP%]     #print h3, [_nghost-%COMP%]     #print h4, [_nghost-%COMP%]     #print html, [_nghost-%COMP%]     #print img, [_nghost-%COMP%]     #print p{margin:0}[_nghost-%COMP%]     #print h1{font-size:18pt;font-weight:500;margin-bottom:.5cm}[_nghost-%COMP%]     #print h2{font-size:16pt;font-weight:500}[_nghost-%COMP%]     #print p{font-size:12pt}[_nghost-%COMP%]     #print .items-group{border:1pt solid #000;border-radius:5pt;padding:3pt;margin:9pt 0}[_nghost-%COMP%]     #print .logotipo{margin-top:.25cm;margin-left:.35cm;width:2.95cm;height:3.15cm}[_nghost-%COMP%]     #print .label{font-weight:500}[_nghost-%COMP%]     #print .address p, [_nghost-%COMP%]     #print .disclaimer{font-size:10pt}[_nghost-%COMP%]     #print .signature-field{padding-bottom:24pt;border-bottom:1pt solid #000}}"]}),t})();function Ii(t,e){1&t&&T.Pb(0,"th",13)}function Li(t,e){1&t&&(T.Ub(0,"mat-icon"),T.Lc(1," remove "),T.Tb())}function Si(t,e){if(1&t&&(T.Ub(0,"span"),T.Ub(1,"a",18),T.Ub(2,"mat-icon"),T.Lc(3,"cloud_download"),T.Tb(),T.Lc(4,"\xa0 Download "),T.Tb(),T.Tb()),2&t){const t=T.gc(2).$implicit;T.Bb(1),T.Cb("href",t.file.file,T.Bc)}}function ki(t,e){1&t&&(T.Ub(0,"span",19),T.Ub(1,"span",20),T.Lc(2," No Attachment "),T.Tb(),T.Tb())}function zi(t,e){if(1&t&&(T.Ub(0,"td",16),T.Jc(1,Si,5,1,"span",12),T.Jc(2,ki,3,0,"span",17),T.Tb()),2&t){const t=T.gc().$implicit;T.Bb(1),T.mc("ngIf",null==t?null:t.file),T.Bb(1),T.mc("ngIf",!(null!=t&&t.file))}}function Bi(t,e){if(1&t&&(T.Ub(0,"tr"),T.Ub(1,"td",14),T.Ub(2,"span"),T.hc(3,"lowercase"),T.Lc(4),T.hc(5,"removeUnderscore"),T.Tb(),T.Tb(),T.Ub(6,"td",14),T.Ub(7,"span"),T.Lc(8),T.hc(9,"date"),T.Tb(),T.Tb(),T.Ub(10,"td",14),T.Lc(11),T.Jc(12,Li,2,0,"mat-icon",12),T.Tb(),T.Jc(13,zi,3,2,"td",15),T.Tb()),2&t){const t=e.$implicit,i=T.gc();T.Bb(2),T.Eb("badge ",T.ic(3,8,null==t?null:t.review_status),""),T.Bb(2),T.Nc(" ",T.ic(5,10,null==t?null:t.review_status)," "),T.Bb(4),T.Nc(" ",T.jc(9,12,null==t?null:t.created,"medium")," "),T.Bb(3),T.Nc(" ",null==t?null:t.comment," "),T.Bb(1),T.mc("ngIf",!(null!=t&&t.comment)),T.Bb(1),T.mc("ngIf",i.hasAction)}}function Pi(t,e){if(1&t&&(T.Ub(0,"tr"),T.Ub(1,"td",21),T.Ub(2,"div",22),T.Ub(3,"div",23),T.Ub(4,"div",24),T.Ub(5,"div",25),T.Ub(6,"mat-icon"),T.Lc(7," info_circle "),T.Tb(),T.Tb(),T.Ub(8,"div"),T.Lc(9),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb()),2&t){const t=T.gc();T.Bb(9),T.Nc(" There are currently no status update for this ",t.context," ")}}let Ei=(()=>{class t{constructor(t,e){this._dataLayer=t,this._authConfig=e,this.organization={},this.list=[],this.storesMap=[{context:"Budget",store:"organization-budget-reviews",paramKey:"org_budget"},{context:"Application",store:"application-reviews",paramKey:"application"}],this.hasAction=!1}getAuditTrail(t){let e;Object(h.isUndefined)(t)||(e={current_org_id:this.organization,[t.paramKey]:this.item.id},this._dataLayer.list(t.store,Object.assign({},e)).subscribe(e=>{this.list=e.results,"application-reviews"===t.store&&(this.hasAction=!0,this.list.forEach(t=>{this._dataLayer.list("application-review-attachments",{current_org_id:this.organization,application_review:t.id}).subscribe(e=>{const i=e.results||[];i.length&&(t.file=i[0].attachment_data)},t=>console.log(t))}))},t=>console.log(t)))}ngOnInit(){this.organization=Object(h.get)(JSON.parse(this._authConfig.getOrganization()),"organization",null);const t=Object(h.find)(this.storesMap,{context:this.context});this.getAuditTrail(t)}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(xe.a),T.Ob(Ee.a))},t.\u0275cmp=T.Ib({type:t,selectors:[["audit-trail"]],inputs:{context:"context",item:"item"},features:[T.Ab([xe.a])],decls:25,vars:4,consts:[[1,"w-100-p","pt-3"],[1,"px-5","pt-5","pb-3"],[1,"card"],[1,"card-header","pt-2","pb-1","bg-white"],[1,"pl-3","text-muted","font-weight-bold","pb-2","d-flex","align-items-center"],[1,"pt-2","pr-2"],[1,"card-body","px-0","pb-1","pt-0"],[1,"table","borderless","font-size-13","mb-0"],[1,"thead-light","font-size-12"],[1,"border-0","pl-20"],["style","width:1px;",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],[2,"width","1px"],[1,"pl-20","align-middle"],["class","pr-3 align-middle",4,"ngIf"],[1,"pr-3","align-middle"],["class","d-flex ml-2",4,"ngIf"],["mat-stroked-button","","download","","target","_blank"],[1,"d-flex","ml-2"],[1,"badge","badge-secondary","p-2"],["colspan","4",1,"pb-12","mb-0"],[1,"w-100-p","px-3"],[1,"alert","alert-primary","mb-0","pb-2","pt-3"],[1,"d-flex"],[1,"pr-20"]],template:function(t,e){1&t&&(T.Ub(0,"div",0),T.Ub(1,"div",1),T.Ub(2,"div",2),T.Ub(3,"div",3),T.Ub(4,"div",4),T.Ub(5,"div",5),T.Ub(6,"mat-icon"),T.Lc(7,"assessment"),T.Tb(),T.Lc(8,"\xa0"),T.Tb(),T.Ub(9,"div"),T.Lc(10),T.Tb(),T.Tb(),T.Tb(),T.Ub(11,"div",6),T.Ub(12,"div"),T.Ub(13,"table",7),T.Ub(14,"thead",8),T.Ub(15,"th",9),T.Lc(16," Status "),T.Tb(),T.Ub(17,"th",9),T.Lc(18," Updated On "),T.Tb(),T.Ub(19,"th",9),T.Lc(20," Comment "),T.Tb(),T.Jc(21,Ii,1,0,"th",10),T.Tb(),T.Ub(22,"tbody"),T.Jc(23,Bi,14,15,"tr",11),T.Jc(24,Pi,10,1,"tr",12),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb()),2&t&&(T.Bb(10),T.Nc("",e.context||"Budget"," Status"),T.Bb(11),T.mc("ngIf",e.hasAction),T.Bb(2),T.mc("ngForOf",e.list),T.Bb(1),T.mc("ngIf",!(null!=e.list&&e.list.length)))},directives:[r.a,c.t,c.s,b.a],pipes:[c.p,De.a,c.f],styles:["[_nghost-%COMP%]     .badge.created, [_nghost-%COMP%]     .badge.draft, [_nghost-%COMP%]     .badge.on_going, [_nghost-%COMP%]     .badge.open, [_nghost-%COMP%]     .badge.pending{background-color:#ffc107;color:#212529}[_nghost-%COMP%]     .badge.assigned, [_nghost-%COMP%]     .badge.first_level_approved, [_nghost-%COMP%]     .badge.submitted{background-color:#2196f3;color:#fff}[_nghost-%COMP%]     .badge.cancelled, [_nghost-%COMP%]     .badge.rejected{background-color:#dc3545;color:#fff}[_nghost-%COMP%]     .badge.overdue{background-color:#343a40;color:#fff}[_nghost-%COMP%]     .badge.accepted, [_nghost-%COMP%]     .badge.approved, [_nghost-%COMP%]     .badge.completed, [_nghost-%COMP%]     .badge.final_approved, [_nghost-%COMP%]     .badge.finished{background-color:#28a745;color:#fff}"]}),t})();function Mi(t,e){1&t&&(T.Ub(0,"mat-icon"),T.Lc(1," remove "),T.Tb())}function Di(t,e){if(1&t&&(T.Ub(0,"tr"),T.Ub(1,"td",18),T.Lc(2),T.Tb(),T.Ub(3,"td",18),T.Lc(4),T.hc(5,"date"),T.Jc(6,Mi,2,0,"mat-icon",17),T.Tb(),T.Ub(7,"td",19),T.Ub(8,"a",20),T.Ub(9,"mat-icon"),T.Lc(10,"cloud_download"),T.Tb(),T.Lc(11," \xa0Download "),T.Tb(),T.Tb(),T.Tb()),2&t){const t=e.$implicit;T.Bb(2),T.Nc(" ",(null==t?null:t.file.name)||"Unknown"," "),T.Bb(2),T.Nc(" ",T.jc(5,4,null==t?null:t.file.created,"medium")," "),T.Bb(2),T.mc("ngIf",!(null!=t&&t.file.created)),T.Bb(2),T.Cb("href",null==t?null:t.file.file,T.Bc)}}function Fi(t,e){if(1&t&&(T.Ub(0,"tr"),T.Ub(1,"td",21),T.Ub(2,"div",22),T.Ub(3,"div",23),T.Ub(4,"div",24),T.Ub(5,"div",25),T.Ub(6,"mat-icon"),T.Lc(7," info_circle "),T.Tb(),T.Tb(),T.Ub(8,"div"),T.Lc(9),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb()),2&t){const t=T.gc();T.Bb(9),T.Nc(" There are currently no attachments for this ",t.context," ")}}let Ni=(()=>{class t{constructor(t,e){this._dataLayer=t,this._authConfig=e,this.organization={},this.list=[],this.storesMap=[{context:"Budget",store:"organization-budget-attachments",paramKey:"org_budget"}]}fileChange(t){const e={file:t.target.files[0],attachment_type:"ORGANIZATION_BUDGET",budget:this.item.id};let i={attachment:"",organization:this.item.organization,org_budget:this.item.id};const n=new FormData;n.append("file",e.file),n.append("attachment_type",e.attachment_type),this._dataLayer.uploadFile("attachments",n).subscribe(t=>{i=Object.assign(Object.assign({},i),{attachment:t.id}),this._dataLayer.create("organization-budget-attachments",i).subscribe(t=>{const e=Object(h.find)(this.storesMap,{context:this.context});this.getAuditTrail(e)},t=>console.log(t))},t=>console.log(t))}getAuditTrail(t){Object(h.isUndefined)(t)||this._dataLayer.list(t.store,Object.assign({},{current_org_id:this.organization,[t.paramKey]:this.item.id})).subscribe(t=>{t.results.map(t=>{this._dataLayer.get("attachments",t.attachment,{current_org_id:this.organization}).subscribe(e=>{t.file=e,this.list.push(t)},t=>{console.log(t)})}),console.log(this.list)},t=>console.log(t))}ngOnInit(){this.organization=Object(h.get)(JSON.parse(this._authConfig.getOrganization()),"organization",null);const t=Object(h.find)(this.storesMap,{context:this.context});this.getAuditTrail(t)}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(xe.a),T.Ob(Ee.a))},t.\u0275cmp=T.Ib({type:t,selectors:[["header-attachments"]],inputs:{context:"context",item:"item"},decls:30,vars:3,consts:[[1,"w-100-p","pt-3"],[1,"px-5","pt-5","pb-3"],[1,"card"],[1,"card-header","pt-2","pb-1"],[1,"pl-3","text-muted","font-weight-bold","pb-2","d-flex","align-items-center"],[1,"pt-2","pr-2"],[1,"flex-fill"],[1,"actions"],["type","file","id","input-file-id",1,"ng-hide",3,"hidden","change"],["for","input-file-id",1,"mat-button","mat-stroked-button","md-primary","d-flex","pl-3","font-size-12"],[1,"mt-2"],[1,"card-body","px-0","pb-1","pt-0"],[1,"table","borderless","font-size-13","mb-0"],[1,"font-size-12"],[1,"border-0","pl-20"],[1,"border-0","pr-20",2,"width","1px"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"pl-20"],[1,"pr-20",2,"width","1px"],["mat-raised-button","","download","","target","_blank"],["colspan","4",1,"pb-0","mb-0"],[1,"w-100-p","px-3","pb-12"],[1,"alert","alert-primary","mb-0","pb-2","pt-3"],[1,"d-flex"],[1,"pr-20"]],template:function(t,e){1&t&&(T.Ub(0,"div",0),T.Ub(1,"div",1),T.Ub(2,"div",2),T.Ub(3,"div",3),T.Ub(4,"div",4),T.Ub(5,"div",5),T.Ub(6,"mat-icon"),T.Lc(7,"attach_file"),T.Tb(),T.Lc(8,"\xa0"),T.Tb(),T.Ub(9,"div",6),T.Lc(10,"Attachments"),T.Tb(),T.Ub(11,"div",7),T.Ub(12,"input",8),T.cc("change",(function(t){return e.fileChange(t)})),T.Tb(),T.Ub(13,"label",9),T.Ub(14,"mat-icon",10),T.Lc(15,"cloud_upload"),T.Tb(),T.Lc(16,"\xa0 \xa0UPLOAD FILE "),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Ub(17,"div",11),T.Ub(18,"div"),T.Ub(19,"table",12),T.Ub(20,"thead",13),T.Ub(21,"th",14),T.Lc(22," Name "),T.Tb(),T.Ub(23,"th",14),T.Lc(24," Uploaded At "),T.Tb(),T.Ub(25,"th",15),T.Lc(26," Action "),T.Tb(),T.Tb(),T.Ub(27,"tbody"),T.Jc(28,Di,12,7,"tr",16),T.Jc(29,Fi,10,1,"tr",17),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb()),2&t&&(T.Bb(12),T.mc("hidden",!0),T.Bb(16),T.mc("ngForOf",e.list),T.Bb(1),T.mc("ngIf",!(null!=e.list&&e.list.length)))},directives:[r.a,c.s,c.t,b.a],pipes:[c.f],styles:[""]}),t})();var ji=i("IheW"),Ri=i("mCNh"),Ji=i("vkgz"),Vi=i("lJxs");function Ki(t){return function(e){const i=e.value;if(i){const e=i.name.split(".")[1].toLowerCase();return t.toLowerCase()!==e.toLowerCase()?{requiredFileType:!0}:null}return null}}var Hi=i("AytR");function $i(t,e){if(1&t&&(T.Ub(0,"div",1),T.Ub(1,"div",2),T.Ub(2,"div",3),T.Lc(3),T.Tb(),T.Tb(),T.Tb()),2&t){const t=T.gc();T.Bb(2),T.Gc("width",t.progress,"%"),T.Bb(1),T.Nc("",t.progress,"% ")}}let Gi=(()=>{class t{constructor(){this.progress=0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=T.Ib({type:t,selectors:[["app-progress"]],inputs:{progress:"progress"},decls:1,vars:1,consts:[["class","form-group",4,"ngIf"],[1,"form-group"],[1,"progress"],[1,"progress-bar"]],template:function(t,e){1&t&&T.Jc(0,$i,4,3,"div",0),2&t&&T.mc("ngIf",e.progress>0)},directives:[c.t],encapsulation:2}),t})(),qi=(()=>{class t{constructor(t){this.host=t,this.file=null}emitFiles(t){const e=t&&t.item(0);this.onChange(e),this.file=e}writeValue(t){this.host.nativeElement.value="",this.file=null}registerOnChange(t){this.onChange=t}registerOnTouched(t){}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(T.l))},t.\u0275cmp=T.Ib({type:t,selectors:[["app-file-upload"]],hostBindings:function(t,e){1&t&&T.cc("change",(function(t){return e.emitFiles(t.target.files)}))},inputs:{progress:"progress"},features:[T.Ab([{provide:s.p,useExisting:t,multi:!0}])],decls:8,vars:2,consts:[[1,"w-100-p"],[1,"file-drop-area"],[1,"fake-btn"],[1,"file-msg"],["type","file",1,"file-input"],[3,"progress"]],template:function(t,e){1&t&&(T.Ub(0,"div",0),T.Ub(1,"div",1),T.Ub(2,"span",2),T.Lc(3,"Choose file"),T.Tb(),T.Ub(4,"span",3),T.Lc(5),T.Tb(),T.Pb(6,"input",4),T.Tb(),T.Pb(7,"app-progress",5),T.Tb()),2&t&&(T.Bb(5),T.Mc(e.file?e.file.name:"or drag and drop file here"),T.Bb(2),T.mc("progress",e.progress))},directives:[Gi],styles:["@import url(https://fonts.googleapis.com/css?family=Lato:400,300,700);.file-drop-area[_ngcontent-%COMP%]{border:1px dashed #7c7db3;border-radius:3px;position:relative;width:450px;max-width:100%;margin:0 auto;padding:26px 20px 30px;transition:.2s}.fake-btn[_ngcontent-%COMP%], .file-drop-area.is-active[_ngcontent-%COMP%]{background-color:#3f4069}.fake-btn[_ngcontent-%COMP%]{border:1px solid #9e9ec4;border-radius:3px;padding:8px 15px;margin-right:8px;font-size:12px;text-transform:uppercase}.file-msg[_ngcontent-%COMP%]{font-size:small;font-weight:300;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:inline-block;max-width:calc(100% - 130px);vertical-align:middle}.file-input[_ngcontent-%COMP%]{position:absolute;left:0;top:0;height:100%;width:100%;cursor:pointer;opacity:0}.file-input[_ngcontent-%COMP%]:focus{outline:none}"]}),t})();function Wi(t,e){1&t&&(T.Ub(0,"div"),T.Lc(1," Description is required "),T.Tb())}function Yi(t,e){if(1&t&&(T.Ub(0,"div",18),T.Jc(1,Wi,2,0,"div",14),T.Tb()),2&t){const t=T.gc();T.Bb(1),T.mc("ngIf",t.f.description.errors.required)}}function Zi(t,e){1&t&&(T.Ub(0,"div"),T.Lc(1,"This field is required"),T.Tb())}function Qi(t,e){1&t&&(T.Ub(0,"div"),T.Lc(1,"Attach a PDF File"),T.Tb())}let Xi=(()=>{class t{constructor(t,e,i,n,a){this.http=t,this._formBuilder=e,this._dialogRef=i,this._dataLayer=n,this.data=a,this.progress=0,this.sUrl=Hi.a.serverURL}formInit(){this.uploadForm=this._formBuilder.group({description:[""],attachment:["",[s.D.required,Ki("pdf")]]})}get f(){return this.uploadForm.controls}submitForm(t){if(console.log(t,this.uploadForm),!t.valid)return void function(t){for(const e of Object.keys(t.controls))t.controls[e].markAsDirty()}(this.uploadForm);this.loading=!0;const{attachment:e,description:i}=this.uploadForm.value;let n={attachment:"",description:i,document_type:this.data.document_type.id,organization:this.data.organization};var a;this.http.post(this.sUrl+"/common/attachments/",function(t){const e=new FormData;for(const i of Object.keys(t))e.append(i,t[i]);return e}({file:e,attachment_type:"APPLICATION_DOCUMENT"}),{reportProgress:!0,observe:"events"}).pipe((a=t=>this.progress=t,Object(Ji.a)(t=>{t.type===ji.d.UploadProgress&&a(Math.round(100*t.loaded/t.total))})),Object(Ri.a)(Object(Jt.a)(t=>t.type===ji.d.Response),Object(Vi.a)(t=>t.body))).subscribe(t=>{this.progress=0,n=Object.assign(Object.assign({},n),{attachment:t.id}),this._dataLayer.create("organization-attachments",n).subscribe(t=>{console.log(t),this.uploadForm.reset(),this.loading=!1,this.closeDialog("refresh"),this._dataLayer.openDynamicSnackBar("File sucessfully uploaded","success")},t=>{console.log(t),this.loading=!1})},t=>{console.log(t),this.loading=!1})}closeDialog(t){this._dialogRef.close(t)}hasError(t,e){const i=this.uploadForm.get(t);return i.dirty&&i.hasError(e)}ngOnInit(){console.log(this.data),this.formInit()}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(ji.b),T.Ob(s.g),T.Ob(kt.g),T.Ob(xe.a),T.Ob(kt.a))},t.\u0275cmp=T.Ib({type:t,selectors:[["attachment-dialog"]],features:[T.Ab([xe.a])],decls:28,vars:8,consts:[[1,""],[1,"d-flex","algin-items-center","mb-n3"],[1,"flex-fill"],["mat-dialog-title","",1,"pb-2","font"],["mat-dialog-content","",1,"text-muted","fullwidth"],["name","frm",1,"w-100-p",3,"formGroup","ngSubmit"],[1,"w-100-p","pt-1"],[1,"input-wrapper","fullwidth"],["appearance","outline","color","primary",1,"pb-0","mb-0","w-100-p"],["name","description","id","","matInput","","cols","30","rows","2","formControlName","description","placeholder","Kindly enter a file descripition..."],["class","invalid-feedback",4,"ngIf"],[1,"w-100-p"],["formControlName","attachment",3,"progress"],[1,"invalid-feedback","d-flex"],[4,"ngIf"],[1,"btn-container","d-flex","justify-content-end","w-100-p"],["mat-button","","mat-dialog-close","","type","button",3,"click"],["mat-button","","type","submit",3,"disabled"],[1,"invalid-feedback"]],template:function(t,e){1&t&&(T.Ub(0,"div",0),T.Ub(1,"div",1),T.Ub(2,"div",2),T.Ub(3,"h4",3),T.Lc(4," Upload Attachment "),T.Tb(),T.Tb(),T.Tb(),T.Ub(5,"div",4),T.Ub(6,"div"),T.Ub(7,"p"),T.Lc(8," Kindly complete the following form below "),T.Tb(),T.Ub(9,"div"),T.Ub(10,"form",5),T.cc("ngSubmit",(function(){return e.submitForm(e.uploadForm)})),T.Ub(11,"div",6),T.Ub(12,"div",7),T.Ub(13,"mat-form-field",8),T.Ub(14,"mat-label"),T.Lc(15,"File Description"),T.Tb(),T.Pb(16,"textarea",9),T.Tb(),T.Tb(),T.Jc(17,Yi,2,1,"div",10),T.Tb(),T.Ub(18,"div",11),T.Pb(19,"app-file-upload",12),T.Ub(20,"div",13),T.Jc(21,Zi,2,0,"div",14),T.Jc(22,Qi,2,0,"div",14),T.Tb(),T.Tb(),T.Ub(23,"div",15),T.Ub(24,"button",16),T.cc("click",(function(){return e.closeDialog()})),T.Lc(25,"CLOSE"),T.Tb(),T.Ub(26,"button",17),T.Lc(27,"SUBMIT"),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb()),2&t&&(T.Bb(10),T.mc("formGroup",e.uploadForm),T.Bb(7),T.mc("ngIf",e.f.description.invalid&&(e.f.description.touched||e.f.description.dirty)),T.Bb(2),T.mc("progress",e.progress),T.Bb(2),T.mc("ngIf",e.hasError("attachment","required")),T.Bb(1),T.mc("ngIf",e.hasError("attachment","requiredFileType")),T.Bb(4),T.Gb("spiner",e.loading),T.mc("disabled",e.loading))},directives:[kt.h,kt.e,s.F,s.s,s.l,Bt.c,Bt.g,p.b,s.e,s.r,s.j,c.t,qi,b.b,kt.d],styles:['[_nghost-%COMP%]     .spinner:before{content:"";box-sizing:border-box;position:absolute;top:50%;left:50%;width:20px;height:20px;margin-top:-10px;margin-left:-10px;border-radius:50%;border:2px solid #fff;border-top-color:#000;-webkit-animation:spinner .8s linear infinite;animation:spinner .8s linear infinite}']}),t})();function tn(t,e){if(1&t&&(T.Ub(0,"span"),T.Lc(1),T.Tb()),2&t){const t=T.gc().$implicit;T.Eb("badge py-2 px-3 font-size-12 ",null!=t&&t.required?"badge-danger":"badge-info",""),T.Bb(1),T.Nc(" ",null!=t&&t.required?"Required":"Not Required"," ")}}function en(t,e){1&t&&(T.Ub(0,"span",19),T.Lc(1," Uploaded "),T.Tb())}function nn(t,e){if(1&t){const t=T.Vb();T.Ub(0,"button",20),T.cc("click",(function(){T.zc(t);const e=T.gc().$implicit;return T.gc().selectDocType(e)})),T.Ub(1,"mat-icon",21),T.Lc(2,"cloud_upload"),T.Tb(),T.Lc(3,"\xa0 Upload "),T.Tb()}}function an(t,e){if(1&t&&(T.Ub(0,"a",22),T.Ub(1,"mat-icon"),T.Lc(2,"cloud_download"),T.Tb(),T.Lc(3,"\xa0 Download "),T.Tb()),2&t){const t=T.gc().$implicit;T.Cb("href",null==t?null:t.attachment_data.file,T.Bc)}}function on(t,e){if(1&t&&(T.Ub(0,"tr"),T.Ub(1,"td",12),T.Lc(2),T.Tb(),T.Ub(3,"td",13),T.Jc(4,tn,2,4,"span",14),T.Jc(5,en,2,0,"span",15),T.Tb(),T.Ub(6,"td",13),T.Lc(7),T.Tb(),T.Ub(8,"td",16),T.Jc(9,nn,4,0,"button",17),T.Jc(10,an,4,1,"a",18),T.Tb(),T.Tb()),2&t){const t=e.$implicit;T.Bb(2),T.Nc(" ",null==t?null:t.name," "),T.Bb(2),T.mc("ngIf",!(null!=t&&t.attachment_data)),T.Bb(1),T.mc("ngIf",null==t?null:t.attachment_data),T.Bb(2),T.Nc(" ",null==t?null:t.description," "),T.Bb(2),T.mc("ngIf",!(null!=t&&t.attachment_data)),T.Bb(1),T.mc("ngIf",null==t?null:t.attachment_data)}}function sn(t,e){1&t&&(T.Ub(0,"tr"),T.Ub(1,"td",23),T.Ub(2,"div",24),T.Pb(3,"mat-spinner",25),T.Tb(),T.Tb(),T.Tb())}function cn(t,e){1&t&&(T.Ub(0,"tr"),T.Ub(1,"td",23),T.Ub(2,"div",26),T.Ub(3,"div",27),T.Ub(4,"div",28),T.Ub(5,"div",29),T.Ub(6,"mat-icon"),T.Lc(7," info_circle "),T.Tb(),T.Tb(),T.Ub(8,"div",30),T.Lc(9," There is currently no documents setup for this organization. Kindly contact the administrator "),T.Tb(),T.Pb(10,"div",31),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb())}let rn=(()=>{class t{constructor(t,e,i,n){this._dataLayer=t,this._authConfig=e,this._dialog=i,this._route=n,this.loading=!0,this.list=[]}fileChange(t,e){const i={file:t.target.files[0],attachment_type:"APPLICATION_DOCUMENT",document_type:e.id,organization:this.organization},n=new FormData;n.append("file",i.file),n.append("attachment_type",i.attachment_type);let a={attachment:"",organization:this.organization,document_type:i.document_type};this._dataLayer.uploadFile("attachments",n).subscribe(t=>{a=Object.assign(Object.assign({},a),{attachment:t.id}),this._dataLayer.create("organization-attachments",a,void 0,{key:"current_org_id",value:this.organization}).subscribe(t=>{this.getApplicationAttachments()},t=>console.log(t))},t=>console.log(t))}selectDocType(t){this._dialog.open(Xi,{data:{organization:this.organization,document_type:t}}).afterClosed().subscribe(t=>{console.log(t),"refresh"===t&&this.getDocumentTypes()})}getApplicationAttachments(){this._dataLayer.list("organization-attachments",{organization:this.organization,current_org_id:this.organization}).subscribe(t=>{const e=t.results;Object(h.each)(e,t=>{const e=Object(h.indexOf)(this.list,Object(h.find)(this.list,{id:t.document_type}));e>=0&&this._dataLayer.get("attachments",t.attachment).subscribe(t=>{this.list[e].attachment_data=t},t=>console.log(t))})},t=>console.log(t))}getDocumentTypes(){const t={org_type:this.linkedOrganization.org_type,current_org_id:this.organization};this.loading=!0,this._dataLayer.list("document-types",Object.assign({},t)).subscribe(t=>{this.loading=!1,this.list=t.results,this.getApplicationAttachments()},t=>{this.loading=!1,console.log(t)})}getOrgnization(t){this._dataLayer.get("organizations",t,{current_org_id:this.organization}).subscribe(t=>{this.linkedOrganization=t,this.getDocumentTypes()},t=>console.log(t))}getParams(){this._route.queryParams.subscribe(t=>{this.linkedOrgId=t.organization,this.getOrgnization(t.organization)})}ngOnInit(){this.organization=Object(h.get)(JSON.parse(this._authConfig.getOrganization()),"organization",null),this.getParams()}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(xe.a),T.Ob(Ee.a),T.Ob(kt.b),T.Ob(n.a))},t.\u0275cmp=T.Ib({type:t,selectors:[["attachments-listing"]],inputs:{tab:"tab",item:"item"},decls:26,vars:3,consts:[[1,"w-100-p"],[1,"card"],[1,"card-header","bg-white","pt-2","pb-1"],[1,"title","flex-fill","font-weight-600","font-size-16","pt-2","pl-3","d-flex","align-items-center"],[1,"flex-fill","pl-3","mt-n2"],[1,"card-body","px-0","pb-1","pt-0"],[1,"table","borderless","font-size-13","mb-0"],[1,"thead-light","font-size-12"],[1,"pl-24"],[2,"width","1px"],[4,"ngFor","ngForOf"],[4,"ngIf"],["valign","middle",1,"pl-24","valign-middle"],["valign","middle",1,"valign-middle"],[3,"class",4,"ngIf"],["class","badge badge-success \n                                py-2 px-3 font-size-12",4,"ngIf"],[1,"pr-24"],["mat-stroked-button","",3,"click",4,"ngIf"],["mat-stroked-button","","download","","target","_blank",4,"ngIf"],[1,"badge","badge-success","py-2","px-3","font-size-12"],["mat-stroked-button","",3,"click"],[1,"mt-2"],["mat-stroked-button","","download","","target","_blank"],["colspan","3",1,"pb-0","mb-0","pl-24"],[1,"w-100-p","px-3","d-flex","justify-content-center","py-16"],["diameter","45"],[1,"w-100-p","px-3"],[1,"alert","alert-primary","mb-0","pb-2","pt-3"],[1,"d-flex","align-items-center"],[1,"pr-20"],[1,"flex-fill"],[1,"pr-8"]],template:function(t,e){1&t&&(T.Ub(0,"div",0),T.Ub(1,"div",1),T.Ub(2,"div",2),T.Ub(3,"div",3),T.Ub(4,"div"),T.Ub(5,"mat-icon"),T.Lc(6,"attachment"),T.Tb(),T.Lc(7,"\xa0 "),T.Tb(),T.Ub(8,"div",4),T.Lc(9,"Attachments"),T.Tb(),T.Tb(),T.Tb(),T.Ub(10,"div",5),T.Ub(11,"div"),T.Ub(12,"table",6),T.Ub(13,"thead",7),T.Ub(14,"th",8),T.Lc(15," File "),T.Tb(),T.Ub(16,"th"),T.Lc(17," Required "),T.Tb(),T.Ub(18,"th"),T.Lc(19," Description "),T.Tb(),T.Ub(20,"th",9),T.Lc(21," Action "),T.Tb(),T.Tb(),T.Ub(22,"tbody"),T.Jc(23,on,11,6,"tr",10),T.Jc(24,sn,4,0,"tr",11),T.Jc(25,cn,11,0,"tr",11),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb()),2&t&&(T.Bb(23),T.mc("ngForOf",e.list),T.Bb(1),T.mc("ngIf",!(null!=e.list&&e.list.length)&&e.loading),T.Bb(1),T.mc("ngIf",!(null!=e.list&&e.list.length||e.loading)))},directives:[r.a,c.s,c.t,b.b,b.a,g.b],encapsulation:2}),t})();const ln=[{key:"budget-items",configs:{modelKey:"budget_activity",content:"grid",listParams:{member_null:!0},gridConf:{getStore:"organization-budget-activity-items",editStore:"organization-budget-activity-items"},topActions:[{btnText:"ADD ITEM",status:"info",icon:"true",action:"inline",conf:{context:"ITEM",store:"organization-budget-activity-items",btnText:"SAVE"}}],rows:[{key:"item",type:"compact-line",context:"billable-item",fieldType:"nested_string",primaryField:"item_data.name"},{key:"item",type:"compact-line",context:"billable-item",fieldType:"nested_status_total",primaryField:"item_data.name"},{key:"item",type:"compact-line",context:"billable-item",fieldType:"nested_totals",primaryField:"item_data.name"}],headers:[{title:"Item"},{title:"Applied Total"},{title:"Approved Totals"},{title:"Actions",oderable:!1,searchable:!1}],actions:[{btnText:"Edit",status:"info",icon:"edit",disableStatus:"FINISHED",action:"inline",modalConf:{store:"organization-budget-activity-items",titleKey:"item",context:"Billable Item",btnText:"SAVE"}},{btnText:"Rationalize",status:"draft",icon:"compare_arrows",disableStatus:"FINISHED",class:"text-success",action:"modal",modalConf:{store:"organization-budget-activity-items",titleKey:"item",context:"rationalize",btnText:"SAVE",width:"50%"}},{btnText:"Approve",status:"rationalized",icon:"check",class:"text-success",disableStatus:"FINISHED",action:"modal",modalConf:{store:"organization-budget-activity-items",titleKey:"item",context:"approve",btnText:"SAVE",width:"50%"}},{btnText:"Reject",status:"rationalize",icon:"close",class:"text-danger",disableStatus:"FINISHED",action:"modal",modalConf:{store:"organization-budget-activity-items",titleKey:"item",context:"reject",btnText:"SAVE",width:"50%"}}]}},{key:"budget-attendees",configs:{modelKey:"budget_activity",listParams:{member_null:!1},gridConf:{getStore:"organization-budget-activity-attendees",editStore:"organization-budget-activity-attendees"},topActions:[{btnText:"ADD ATTENDEE",status:"info",icon:"true",action:"inline",conf:{context:"ATTENDEE",store:"organization-budget-activity-attendees",btnText:"SAVE"}}],rows:[{key:"item",type:"compact-line",context:"attendees",fieldType:"nested_string",primaryField:"item_data.name"},{key:"item",type:"compact-line",context:"billable-item",fieldType:"nested_status_total",primaryField:"item_data.name"},{key:"item",type:"compact-line",context:"billable-item",fieldType:"nested_totals",primaryField:"item_data.name"}],headers:[{title:"Item & Member Details"},{title:"Applied Totals"},{title:"Approved Totals"},{title:"Actions",oderable:!1,searchable:!1}],actions:[{btnText:"Edit",status:"info",icon:"edit",disableStatus:"FINISHED",action:"inline",modalConf:{store:"organization-budget-activity-attendees",titleKey:"item",context:"Attendee",btnText:"SAVE"}},{btnText:"Rationalize",status:"draft",icon:"compare_arrows",disableStatus:"FINISHED",class:"text-success",action:"modal",modalConf:{store:"organization-budget-activity-attendees",titleKey:"item",context:"rationalize",btnText:"SAVE",width:"50%"}},{btnText:"Approve",status:"rationalized",icon:"check",class:"text-success",disableStatus:"FINISHED",action:"modal",modalConf:{store:"organization-budget-activity-attendees",titleKey:"item",context:"approve",btnText:"SAVE",width:"50%"}},{btnText:"Reject",status:"rationalize",icon:"close",class:"text-danger",disableStatus:"FINISHED",action:"modal",modalConf:{store:"organization-budget-activity-attendees",titleKey:"item",context:"reject",btnText:"SAVE",width:"50%"}}]}},{key:"budget-allowances",configs:{modelKey:"budget_activity",listParams:{member_null:!1},gridConf:{getStore:"organization-budget-activity-allowances",editStore:"organization-budget-activity-allowances"},topActions:[{btnText:"ADD ALLOWANCE",status:"info",icon:"true",action:"inline",conf:{context:"ALLOWANCE",store:"organization-budget-activity-allowances",btnText:"SAVE"}}],rows:[{key:"item",type:"compact-line",context:"allowances",fieldType:"nested_string",primaryField:"item_data.name"},{key:"item",type:"compact-line",context:"billable-item",fieldType:"nested_status_total",primaryField:"item_data.name"},{key:"item",type:"compact-line",context:"billable-item",fieldType:"nested_totals",primaryField:"item_data.name"}],headers:[{title:"Allowance"},{title:"Applied Total"},{title:"Approved Totals"},{title:"Actions",oderable:!1,searchable:!1}],actions:[{btnText:"Edit",status:"info",icon:"edit",disableStatus:"FINISHED",action:"inline",modalConf:{store:"organization-budget-activity-allowances",titleKey:"allowance",context:"Allowance",btnText:"SAVE"}},{btnText:"Rationalize",status:"draft",icon:"compare_arrows",disableStatus:"FINISHED",class:"text-success",action:"modal",modalConf:{store:"organization-budget-activity-allowances",titleKey:"item",context:"rationalize",btnText:"SAVE",width:"50%"}},{btnText:"Approve",status:"rationalized",icon:"check",class:"text-success",disableStatus:"FINISHED",action:"modal",modalConf:{store:"organization-budget-activity-allowances",titleKey:"item",context:"approve",btnText:"SAVE",width:"50%"}},{btnText:"Reject",status:"rationalize",icon:"close",class:"text-danger",disableStatus:"FINISHED",action:"modal",modalConf:{store:"organization-budget-activity-allowances",titleKey:"item",context:"reject",btnText:"SAVE",width:"50%"}}]}}];function bn(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div",8),T.Ub(1,"dynamic-form",9),T.cc("cancelFxn",(function(){return T.zc(t),T.gc().closeDialog()}))("submitModel",(function(e){return T.zc(t),T.gc().receiveModel(e)})),T.Tb(),T.Tb()}if(2&t){const t=T.gc();T.Bb(1),T.mc("submitted",t.submitted)("baseCancel",!0)("model",t.model)}}function dn(t,e){if(1&t&&(T.Ub(0,"div"),T.Ub(1,"div"),T.Ub(2,"div"),T.Ub(3,"div"),T.Ub(4,"p"),T.Lc(5),T.Tb(),T.Ub(6,"div",11),T.Ub(7,"div",12),T.Ub(8,"div",13),T.Lc(9," Applied Total: "),T.Tb(),T.Ub(10,"div",14),T.Lc(11),T.hc(12,"currency"),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Ub(13,"p"),T.Lc(14," Ensure that you have rationalized each activity line item, otherwise the applied item amount will be used as the rationalized amount. If you would like to proceed click the "),T.Ub(15,"b"),T.Lc(16,"SUBMIT"),T.Tb(),T.Lc(17," button below. "),T.Tb(),T.Tb(),T.Tb(),T.Tb()),2&t){const t=T.gc(2);T.Bb(5),T.Nc(" Kindly confirm that you would like to rationalize ",null==t.item?null:t.item.title," "),T.Bb(6),T.Nc(" ",T.jc(12,2,null==t.item?null:t.item.total,"Kshs ")," ")}}function pn(t,e){if(1&t&&(T.Ub(0,"div"),T.Ub(1,"div"),T.Ub(2,"div"),T.Ub(3,"p"),T.Lc(4),T.Tb(),T.Ub(5,"div",11),T.Ub(6,"div",12),T.Ub(7,"div",13),T.Lc(8," Applied Total: "),T.Tb(),T.Ub(9,"div",14),T.Lc(10),T.hc(11,"currency"),T.Tb(),T.Tb(),T.Ub(12,"div",12),T.Ub(13,"div",15),T.Lc(14," Rationalized: "),T.Tb(),T.Ub(15,"div",14),T.Lc(16),T.hc(17,"currency"),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Ub(18,"p"),T.Lc(19," Ensure you have approved each activity line item otherwise the rationalized amount will be used as the approved amount. If you would stil like to proceed click the "),T.Ub(20,"b"),T.Lc(21,"SUBMIT"),T.Tb(),T.Lc(22," button below: "),T.Tb(),T.Tb(),T.Tb()),2&t){const t=T.gc(2);T.Bb(4),T.Nc(" Kindly confirm that you would like to approve ",null==t.item?null:t.item.title," "),T.Bb(6),T.Nc(" ",T.jc(11,3,null==t.item?null:t.item.total,"Kshs ")," "),T.Bb(6),T.Nc(" ",T.jc(17,6,null==t.item?null:t.item.rationalized_total,"Kshs ")," ")}}function gn(t,e){if(1&t&&(T.Ub(0,"div",8),T.Ub(1,"div"),T.Lc(2),T.Tb(),T.Jc(3,dn,18,5,"div",10),T.Jc(4,pn,23,9,"div",10),T.Tb()),2&t){const t=T.gc();T.Bb(2),T.Mc(null==t.configs?null:t.configs.description),T.Bb(1),T.mc("ngIf","rationalize"===t.context),T.Bb(1),T.mc("ngIf","approve"===t.context)}}function mn(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div",16),T.Ub(1,"button",17),T.cc("click",(function(){return T.zc(t),T.gc().closeDialog()})),T.Lc(2,"CLOSE"),T.Tb(),T.Ub(3,"button",18),T.cc("click",(function(){return T.zc(t),T.gc().transitionActions()})),T.Lc(4),T.Tb(),T.Tb()}if(2&t){const t=T.gc();T.Bb(3),T.Gb("spinner",t.loading),T.mc("disabled",t.loading),T.Bb(1),T.Nc(" ",(null==t.configs?null:t.configs.action)||"SUBMIT"," ")}}function un(t,e){1&t&&(T.Ub(0,"div"),T.Lc(1," Comment is required "),T.Tb())}function hn(t,e){if(1&t&&(T.Ub(0,"div",30),T.Jc(1,un,2,0,"div",10),T.Tb()),2&t){const t=T.gc(2);T.Bb(1),T.mc("ngIf",t.f.comment.errors.required)}}function fn(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div",19),T.Ub(1,"div",20),T.Ub(2,"p"),T.Lc(3," Kindly confirm that you would like to reject the following activity: "),T.Tb(),T.Ub(4,"div",11),T.Ub(5,"div",12),T.Ub(6,"div",13),T.Lc(7," Applied Amount: "),T.Tb(),T.Ub(8,"div",14),T.Lc(9),T.hc(10,"currency"),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Ub(11,"form",21),T.cc("ngSubmit",(function(){T.zc(t);const e=T.gc();return e.submitForm(e.commentForm)})),T.Ub(12,"div",22),T.Ub(13,"div",23),T.Ub(14,"mat-form-field",24),T.Ub(15,"mat-label"),T.Lc(16,"Enter comment*"),T.Tb(),T.Pb(17,"textarea",25),T.Tb(),T.Tb(),T.Jc(18,hn,2,1,"div",26),T.Tb(),T.Ub(19,"div",27),T.Ub(20,"button",28),T.cc("click",(function(){return T.zc(t),T.gc().closeDialog()})),T.Lc(21,"CLOSE"),T.Tb(),T.Ub(22,"button",29),T.Lc(23," SUBMIT "),T.Tb(),T.Tb(),T.Tb(),T.Tb()}if(2&t){const t=T.gc();T.Bb(9),T.Nc(" ",T.jc(10,6,null==t.item?null:t.item.total,"Kshs ")," "),T.Bb(2),T.mc("formGroup",t.commentForm),T.Bb(7),T.mc("ngIf",t.f.comment.invalid&&(t.f.comment.touched||t.f.comment.dirty)),T.Bb(4),T.Gb("spinner",t.loading),T.mc("disabled",t.loading)}}let Tn=(()=>{class t{constructor(t,e,i,n){this._formBuilder=t,this._dialogRef=e,this._dataLayer=i,this.data=n,this.dialogActions={approveApplication:()=>{this.getUserOrganization(),this.loading=!0}}}formInit(){this.commentForm=this._formBuilder.group({comment:["",s.D.required]}),this.adjustedAmountForm=this._formBuilder.group({adjustedAmount:["",s.D.required]})}get f(){return this.commentForm.controls}get aF(){return this.adjustedAmountForm.controls}submitTransition(t,e){const i=this.data.store;this.loading=!0,this._dataLayer.update(i,this.item.id,t,{key:"current_org_id",value:this.organization}).subscribe(t=>{console.log(t),this.loading=!1,this.closeDialog("refresh"),this._dataLayer.openDynamicSnackBar(e.succMsg,"success")},t=>{console.log(t),this.loading=!1,this._dataLayer.openDynamicSnackBar(e.errMsg,"error")})}transitionActions(t){let e=t=>`Item ${t} successfully`,i=t=>`An error occurred during ${t}ing`;switch(this.context){case"rationalize":const n={status:"RATIONALIZED"},a={succMsg:e("rationalized"),errMsg:i("rationaliz")};this.submitTransition(n,a);break;case"approve":const o={status:"SASDEF_APPROVED"},s={succMsg:e("approved"),errMsg:i("approv")};this.submitTransition(o,s);break;case"reject":const c={succMsg:e("rejected"),errMsg:i("reject")},r=Object.assign({},t);this.submitTransition(r,c);break;default:throw new Error("No relevant transition action given")}}submitForm(t){console.log(t),t.valid&&"rejected"===this.context&&this.transitionActions({comment:t.value.comment,status:"REJECTED"})}closeDialog(t){this._dialogRef.close(t)}getUserOrganization(){const t=JSON.parse(localStorage.getItem("organization"));this.organization=Object(h.get)(t,"organization",null)}receiveModel(t){console.log(t)}setConfigs(){const t=this.data.context;switch(this.context=this.data.context,this.formInit(),this.getUserOrganization(),t){case"edit":return{title:"Update Activity",type:"form"};case"approve":return{title:"Approve Activity",type:"dialog"};case"rationalize":return{title:"Rationalize Activity",type:"dialog",validationKey:"rationalized_total"};case"reject":return{title:"Reject Activity",type:"comment"};default:throw new Error("Provide a valid option")}}ngOnInit(){this.model=this.data.activity,this.item=this.data.activity,this.configs=this.setConfigs()}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(s.g),T.Ob(kt.g),T.Ob(xe.a),T.Ob(kt.a))},t.\u0275cmp=T.Ib({type:t,selectors:[["nested-crud-dialog"]],features:[T.Ab([xe.a])],decls:10,vars:5,consts:[[1,""],[1,"d-flex","align-items-center","mb-n3"],[1,"flex-fill"],["mat-dialog-title","",1,"pb-2","font"],["mat-dialog-content","","class","text-muted fullwidth",4,"ngIf"],["mat-dialog-actions","","class","pt-5 pb-20 d-flex justify-content-end",4,"ngIf"],["mat-dialog-actions","",4,"ngIf"],[1,"py-2"],["mat-dialog-content","",1,"text-muted","fullwidth"],["btnClass","tiny mr-3","btnStatus","primary","store","organization-budget-activities","btnText","SAVE",3,"submitted","baseCancel","model","cancelFxn","submitModel"],[4,"ngIf"],[1,"mb-3"],[1,"d-flex"],[1,"text-muted","pr-3"],[1,"font-weight-600"],[1,"text-muted","pr-16"],["mat-dialog-actions","",1,"pt-5","pb-20","d-flex","justify-content-end"],["mat-button","","mat-dialog-close","",3,"click"],["mat-button","",3,"disabled","click"],["mat-dialog-actions",""],[1,"context","===","'reject'"],["name","frm",1,"w-100-p",3,"formGroup","ngSubmit"],[1,"w-100-p","pt-1"],[1,"input-wrapper","fullwidth"],["appearance","outline","color","primary",1,"pb-0","mb-0","w-100-p"],["name","comment","id","","matInput","","cols","30","rows","6","formControlName","comment","placeholder","Kindly enter a comment..."],["class","invalid-feedback",4,"ngIf"],[1,"btn-container","d-flex","justify-content-end","w-100-p"],["mat-button","","mat-dialog-close","","type","button",3,"click"],["mat-button","","type","submit",3,"disabled"],[1,"invalid-feedback"]],template:function(t,e){1&t&&(T.Ub(0,"div",0),T.Ub(1,"div",1),T.Ub(2,"div",2),T.Ub(3,"h4",3),T.Lc(4),T.Tb(),T.Tb(),T.Tb(),T.Jc(5,bn,2,3,"div",4),T.Jc(6,gn,5,3,"div",4),T.Jc(7,mn,5,4,"div",5),T.Jc(8,fn,24,9,"div",6),T.Pb(9,"div",7),T.Tb()),2&t&&(T.Bb(4),T.Nc(" ",null==e.configs?null:e.configs.title," "),T.Bb(1),T.mc("ngIf","form"===(null==e.configs?null:e.configs.type)),T.Bb(1),T.mc("ngIf","dialog"===(null==e.configs?null:e.configs.type)),T.Bb(1),T.mc("ngIf","dialog"===(null==e.configs?null:e.configs.type)),T.Bb(1),T.mc("ngIf","comment"===(null==e.configs?null:e.configs.type)))},directives:[kt.h,c.t,kt.e,Ve.a,kt.c,b.b,kt.d,s.F,s.s,s.l,Bt.c,Bt.g,p.b,s.e,s.r,s.j],pipes:[c.d],encapsulation:2}),t})(),vn=(()=>{class t{constructor(t,e,i){this._dialogRef=t,this._dataLayer=e,this.data=i}receiveModel(t){this.submitted=!0,t=Object.assign(Object.assign({},t),{org_budget:this.data.budget.id,organization:this.orgId}),this._dataLayer.create("organization-budget-activities",t,void 0,{key:"current_org_id",value:this.orgId}).subscribe(t=>{this.submitted=!1,this._dataLayer.openDynamicSnackBar("Activity successfuilly added","success"),this.closeDialog(t)},t=>{this.submitted=!1,this._dataLayer.openDynamicSnackBar("An error occurred while adding activity. Try again","error")})}closeDialog(t){this._dialogRef.close(t)}ngOnInit(){const t=JSON.parse(localStorage.getItem("organization"));this.orgId=Object(h.get)(t,"organization",null)}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(kt.g),T.Ob(xe.a),T.Ob(kt.a))},t.\u0275cmp=T.Ib({type:t,selectors:[["nested-main-dialog"]],features:[T.Ab([xe.a])],decls:7,vars:2,consts:[[1,"font-size-14"],[1,"d-flex","align-items-center","mb-n3"],[1,"flex-fill"],["mat-dialog-title","",1,"pb-3"],["mat-dialog-content","",1,"text-muted","fullwidth"],["btnClass","tiny mr-3","btnStatus","primary","store","organization-budget-activities","btnText","SAVE",3,"submitted","baseCancel","cancelFxn","submitModel"]],template:function(t,e){1&t&&(T.Ub(0,"div",0),T.Ub(1,"div",1),T.Ub(2,"div",2),T.Ub(3,"h3",3),T.Lc(4,"Add Activity"),T.Tb(),T.Tb(),T.Tb(),T.Ub(5,"div",4),T.Ub(6,"dynamic-form",5),T.cc("cancelFxn",(function(){return e.closeDialog()}))("submitModel",(function(t){return e.receiveModel(t)})),T.Tb(),T.Tb(),T.Tb()),2&t&&(T.Bb(6),T.mc("submitted",e.submitted)("baseCancel",!0))},directives:[kt.h,kt.e,Ve.a],styles:[""]}),t})();var yn=i("VDRc");function _n(t,e){if(1&t&&(T.Ub(0,"table",4),T.Ub(1,"thead"),T.Ub(2,"tr",5),T.Ub(3,"th",6),T.Lc(4," Applied Total "),T.Tb(),T.Ub(5,"th",7),T.Lc(6," Rationalized Total "),T.Tb(),T.Ub(7,"th",7),T.Lc(8," Actual Total "),T.Tb(),T.Tb(),T.Tb(),T.Ub(9,"tbody"),T.Ub(10,"tr"),T.Ub(11,"td",8),T.Lc(12),T.hc(13,"currency"),T.Tb(),T.Ub(14,"td",9),T.Lc(15),T.hc(16,"currency"),T.Tb(),T.Ub(17,"td",9),T.Lc(18),T.hc(19,"currency"),T.Tb(),T.Tb(),T.Tb(),T.Tb()),2&t){const t=T.gc();T.Bb(12),T.Nc(" ",T.jc(13,3,(null==t.item?null:t.item.total)||0,"Kshs ")," "),T.Bb(3),T.Nc(" ",T.jc(16,6,(null==t.item?null:t.item.rationalized_total)||0,"Kshs ")," "),T.Bb(3),T.Nc(" ",T.jc(19,9,(null==t.item?null:t.item.actual_total)||0,"Kshs ")," ")}}let xn=(()=>{class t{constructor(t){this._dataLayer=t}refreshItem(){const t=Object(h.get)(JSON.parse(localStorage.getItem("organization")),"organization",null);this._dataLayer.get("organization-budget-activities",this.item.id,{current_org_id:t}).subscribe(t=>{this.item=Object.assign(Object.assign({},this.item),t)})}ngOnInit(){}ngOnChanges(t){Object(h.has)(t,"item")&&!t.item.firstChange&&this.refreshItem()}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(xe.a))},t.\u0275cmp=T.Ib({type:t,selectors:[["nested-totals-summary"]],inputs:{item:"item"},features:[T.zb],decls:5,vars:1,consts:[[1,"pt-20","pb-8","px-16"],[1,"fullwidth","mat-elevation-z1"],[1,"bg-light","py-12","pl-20","border-bottom"],["class","table",4,"ngIf"],[1,"table"],[1,"font-size-12"],[1,"border-0","pl-20"],[1,"border-0"],[1,"pl-20","py-12"],[1,"py-12"]],template:function(t,e){1&t&&(T.Ub(0,"div",0),T.Ub(1,"div",1),T.Ub(2,"div",2),T.Lc(3," Total Summary "),T.Tb(),T.Jc(4,_n,20,12,"table",3),T.Tb(),T.Tb()),2&t&&(T.Bb(4),T.mc("ngIf",e.item))},directives:[c.t],pipes:[c.d],styles:[""]}),t})();function Un(t,e){1&t&&T.Pb(0,"mat-spinner",18)}function On(t,e){1&t&&(T.Ub(0,"mat-icon",19),T.Lc(1,"folder_open"),T.Tb())}function wn(t,e){1&t&&(T.Ub(0,"div",20),T.Lc(1," Add an activity and activity item which should be submitted for review "),T.Tb())}function Cn(t,e){if(1&t&&(T.Ub(0,"div",10),T.Ub(1,"div",11),T.Ub(2,"div",12),T.Ub(3,"div",13),T.Jc(4,Un,1,0,"mat-spinner",14),T.Jc(5,On,2,0,"mat-icon",15),T.Tb(),T.Tb(),T.Ub(6,"div",16),T.Lc(7),T.Tb(),T.Jc(8,wn,2,0,"div",17),T.Tb(),T.Tb()),2&t){const t=T.gc();T.Bb(4),T.mc("ngIf",t.loading),T.Bb(1),T.mc("ngIf",!t.loading),T.Bb(2),T.Nc(" ",t.loading?"Loading...":"Activity yet to be added for"," "),T.Bb(1),T.mc("ngIf",!t.loading)}}function An(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div",25),T.cc("click",(function(){T.zc(t);const i=e.index;return T.gc(2).selectActivity(i)})),T.Ub(1,"div",26),T.Lc(2),T.Tb(),T.Ub(3,"div",27),T.Ub(4,"div",28),T.Ub(5,"div",29),T.Ub(6,"mat-icon",30),T.Lc(7,"attach_money"),T.Tb(),T.Tb(),T.Ub(8,"div",31),T.Lc(9),T.hc(10,"currency"),T.Tb(),T.Tb(),T.Ub(11,"div",32),T.Ub(12,"div",29),T.Ub(13,"mat-icon",33),T.Lc(14,"calendar_today"),T.Tb(),T.Tb(),T.Ub(15,"div",34),T.Lc(16),T.hc(17,"date"),T.Tb(),T.Tb(),T.Tb(),T.Ub(18,"div"),T.Ub(19,"span"),T.hc(20,"lowercase"),T.Lc(21),T.hc(22,"removeUnderscore"),T.Tb(),T.Tb(),T.Tb()}if(2&t){const t=e.$implicit;T.Gb("active",t.active),T.Bb(2),T.Nc(" ",null==t?null:t.title," "),T.Bb(7),T.Nc(" ",T.jc(10,9,null==t?null:t.total,"Kshs ")," "),T.Bb(7),T.Nc(" ",T.jc(17,12,null==t?null:t.activity_date,"dd-MM-yyyy")," "),T.Bb(3),T.Eb("badge ",T.ic(20,15,null==t?null:t.status),"\n                            font-size-10 pt-2 font-size-10 px-8"),T.Bb(2),T.Nc(" ",T.ic(22,17,null==t?null:t.status)," ")}}function In(t,e){if(1&t&&(T.Ub(0,"div",21),T.Ub(1,"div",22),T.Ub(2,"div",23),T.Jc(3,An,23,19,"div",24),T.Tb(),T.Tb(),T.Tb()),2&t){const t=T.gc();T.Bb(3),T.mc("ngForOf",t.list)}}function Ln(t,e){if(1&t){const t=T.Vb();T.Ub(0,"button",57),T.cc("click",(function(){T.zc(t);const i=e.$implicit;return T.gc(2).openCRUDDialog(i.context)})),T.Ub(1,"mat-icon"),T.Lc(2),T.Tb(),T.Lc(3),T.Tb()}if(2&t){const t=e.$implicit;T.Bb(1),T.Db(null==t?null:t.iconClass),T.Bb(1),T.Nc(" ",null==t?null:t.icon," "),T.Bb(1),T.Nc(" ",null==t?null:t.text," ")}}function Sn(t,e){if(1&t&&(T.Ub(0,"mat-icon",63),T.Lc(1),T.Tb(),T.Lc(2)),2&t){const t=T.gc().$implicit;T.Bb(1),T.Mc(t.icon),T.Bb(1),T.Nc(" \xa0\xa0",t.label," ")}}function kn(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div",64),T.Ub(1,"dynamic-table",65),T.cc("postCRUDFxn",(function(){return T.zc(t),T.gc(4).refreshSelected()})),T.Tb(),T.Tb()}if(2&t){const t=T.gc(4);T.Bb(1),T.mc("tabbedItem",t.selectedAct)("largeForms",!0)("addOrg",!0)("modelKey",null==t.tabConfigs?null:t.tabConfigs.modelKey)("cmptParams",t.cmptParams)("headers",null==t.tabConfigs?null:t.tabConfigs.headers)("no-card",!0)("has-action",!0)("store",null==t.tabConfigs?null:t.tabConfigs.gridConf.getStore)("topActions",null==t.tabConfigs?null:t.tabConfigs.topActions)("hasSearch",!0)("dropDownActions",null==t.tabConfigs?null:t.tabConfigs.actions)("rows",t.tabConfigs.rows)}}function zn(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div",64),T.Ub(1,"dynamic-table",65),T.cc("postCRUDFxn",(function(){return T.zc(t),T.gc(4).refreshSelected()})),T.Tb(),T.Tb()}if(2&t){const t=T.gc(4);T.Bb(1),T.mc("tabbedItem",t.selectedAct)("largeForms",!0)("addOrg",!0)("modelKey",null==t.tabConfigs?null:t.tabConfigs.modelKey)("cmptParams",t.cmptParams)("headers",null==t.tabConfigs?null:t.tabConfigs.headers)("no-card",!0)("has-action",!0)("store",null==t.tabConfigs?null:t.tabConfigs.gridConf.getStore)("topActions",null==t.tabConfigs?null:t.tabConfigs.topActions)("hasSearch",!0)("dropDownActions",null==t.tabConfigs?null:t.tabConfigs.actions)("rows",t.tabConfigs.rows)}}function Bn(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div",64),T.Ub(1,"dynamic-table",65),T.cc("postCRUDFxn",(function(){return T.zc(t),T.gc(4).refreshSelected()})),T.Tb(),T.Tb()}if(2&t){const t=T.gc(4);T.Bb(1),T.mc("tabbedItem",t.selectedAct)("largeForms",!0)("addOrg",!0)("modelKey",null==t.tabConfigs?null:t.tabConfigs.modelKey)("cmptParams",t.cmptParams)("headers",null==t.tabConfigs?null:t.tabConfigs.headers)("no-card",!0)("has-action",!0)("store",null==t.tabConfigs?null:t.tabConfigs.gridConf.getStore)("topActions",null==t.tabConfigs?null:t.tabConfigs.topActions)("hasSearch",!0)("dropDownActions",null==t.tabConfigs?null:t.tabConfigs.actions)("rows",t.tabConfigs.rows)}}function Pn(t,e){if(1&t&&(T.Ub(0,"mat-tab"),T.Jc(1,Sn,3,2,"ng-template",61),T.Jc(2,kn,2,13,"div",62),T.Jc(3,zn,2,13,"div",62),T.Jc(4,Bn,2,13,"div",62),T.Tb()),2&t){const t=T.gc(3);T.Bb(2),T.mc("ngIf",0===t.selectedIndexBinding&&t.cmptParams),T.Bb(1),T.mc("ngIf",1===t.selectedIndexBinding&&t.cmptParams),T.Bb(1),T.mc("ngIf",2===t.selectedIndexBinding&&t.cmptParams)}}function En(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div",58),T.Ub(1,"mat-tab-group",59),T.cc("selectedTabChange",(function(e){return T.zc(t),T.gc(2).onTabChange(e)})),T.Jc(2,Pn,5,3,"mat-tab",60),T.hc(3,"async"),T.Tb(),T.Tb()}if(2&t){const t=T.gc(2);T.Bb(2),T.mc("ngForOf",T.ic(3,1,t.asyncTabs))}}function Mn(t,e){if(1&t&&(T.Ub(0,"div",35),T.Ub(1,"div",36),T.Ub(2,"mat-card",37),T.Ub(3,"div",38),T.Ub(4,"div",39),T.Ub(5,"div",40),T.Lc(6),T.Tb(),T.Ub(7,"div",29),T.Ub(8,"button",41),T.Ub(9,"mat-icon",42),T.Lc(10,"more_vert"),T.Tb(),T.Tb(),T.Ub(11,"mat-menu",null,43),T.Jc(13,Ln,4,4,"button",44),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Ub(14,"mat-card-body",45),T.Ub(15,"div",46),T.Ub(16,"div",47),T.Ub(17,"div",39),T.Ub(18,"div",48),T.Ub(19,"div",49),T.Lc(20,"DATE"),T.Tb(),T.Ub(21,"div"),T.Lc(22),T.hc(23,"date"),T.Tb(),T.Tb(),T.Ub(24,"div",50),T.Ub(25,"mat-icon",51),T.Lc(26,"calendar_today"),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Ub(27,"div",52),T.Ub(28,"div",39),T.Ub(29,"div",48),T.Ub(30,"div",49),T.Lc(31,"AMOUNT"),T.Tb(),T.Ub(32,"div"),T.Lc(33),T.hc(34,"currency"),T.Tb(),T.Tb(),T.Ub(35,"div",50),T.Ub(36,"mat-icon",53),T.Lc(37,"attach_money"),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Ub(38,"div",54),T.Ub(39,"div",39),T.Ub(40,"div",48),T.Ub(41,"div",49),T.Lc(42,"STATUS"),T.Tb(),T.Ub(43,"div"),T.Ub(44,"span"),T.hc(45,"lowercase"),T.Lc(46),T.hc(47,"removeUnderscore"),T.Tb(),T.Tb(),T.Tb(),T.Ub(48,"div",50),T.Ub(49,"mat-icon",53),T.Lc(50,"assessment"),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Pb(51,"nested-totals-summary",55),T.Jc(52,En,4,3,"div",56),T.Tb(),T.Tb(),T.Tb(),T.Tb()),2&t){const t=T.vc(12),e=T.gc();T.Bb(6),T.Nc(" ",null==e.selectedAct?null:e.selectedAct.title," "),T.Bb(2),T.mc("matMenuTriggerFor",t),T.Bb(5),T.mc("ngForOf",e.actActions),T.Bb(9),T.Mc(T.jc(23,11,null==e.selectedAct?null:e.selectedAct.activity_date,"dd-MM-yyyy")),T.Bb(11),T.Mc(T.jc(34,14,null==e.selectedAct?null:e.selectedAct.total,"Kshs ")),T.Bb(11),T.Eb("badge font-size-10\n                                            ",T.ic(45,17,null==e.selectedAct?null:e.selectedAct.status)," p-2"),T.Bb(2),T.Nc(" ",T.ic(47,19,null==e.selectedAct?null:e.selectedAct.status)," "),T.Bb(5),T.mc("item",e.selectedAct),T.Bb(1),T.mc("ngIf",e.list.length&&e.selectedAct)}}function Dn(t,e){if(1&t){const t=T.Vb();T.Ub(0,"button",72),T.cc("click",(function(){return T.zc(t),T.gc(2).changeStep("next")})),T.Lc(1," NEXT\xa0 "),T.Ub(2,"mat-icon",69),T.Lc(3,"keyboard_arrow_right"),T.Tb(),T.Ub(4,"mat-icon",69),T.Lc(5,"keyboard_arrow_right"),T.Tb(),T.Tb()}}function Fn(t,e){if(1&t){const t=T.Vb();T.Ub(0,"button",73),T.cc("click",(function(){return T.zc(t),T.gc(2).changeStep("next")})),T.Lc(1," COMPLETE "),T.Tb()}}function Nn(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div",66),T.Ub(1,"div",67),T.Ub(2,"button",68),T.cc("click",(function(){return T.zc(t),T.gc().changeStep("prev")})),T.Ub(3,"mat-icon",69),T.Lc(4,"keyboard_arrow_left"),T.Tb(),T.Ub(5,"mat-icon",69),T.Lc(6,"keyboard_arrow_left"),T.Tb(),T.Lc(7," \xa0\xa0BACK "),T.Tb(),T.Jc(8,Dn,6,0,"button",70),T.Jc(9,Fn,2,0,"button",71),T.Tb(),T.Tb()}if(2&t){const t=T.gc();T.Bb(8),T.mc("ngIf",!t.isLast),T.Bb(1),T.mc("ngIf",t.isLast)}}let jn=(()=>{class t{constructor(t,e,i){this._dataLayer=t,this._route=e,this._dialog=i,this.steps=[],this.onNavigate=new T.n,this.selectedIndexBinding=0,this.list=[],this.organization={},this.tabConfigs=ln[0].configs,this.actActions=[],this.tabsList=[{label:"Items",icon:"list"},{label:"Attendees",icon:"people"},{label:"Allowances",icon:"account_balance_wallet"}]}changeStep(t){this.onNavigate.emit(t)}openDialog(){this._dialog.open(vn,{data:{context:"Budget Activity",budget:this.item},width:"50%"}).afterClosed().subscribe(t=>{Object(h.isObject)(t)&&this.fetchList(t.id)})}openCRUDDialog(t){this._dialog.open(Tn,{data:{context:t,store:"organization-budget-activities",activity:this.selectedAct},width:"50%"}).afterClosed().subscribe(t=>{console.log(t),"refresh"===t&&(this.loading=!0,this.refreshSelected())})}refreshSelected(){const t={current_org_id:Object(h.get)(this.organization,"organization",null)};this._dataLayer.get("organization-budget-activities",this.selectedAct.id,t).subscribe(t=>{this.selectedAct=Object.assign(Object.assign({},t),{active:!0}),this.list=this.list.map(e=>(e.id===t.id&&(e=Object.assign(Object.assign({},t),{active:!0})),e)),this.loading=!1},t=>{this.loading=!1,console.log(t)})}onTabChange(t){this.selectedIndexBinding=t.index,1===t.index?(this.tabConfigs=ln[1].configs,this.cmptParams=Object.assign(Object.assign({},this.cmptParams),{member_null:!1,budget_activity:this.selectedAct.id})):2===t.index?(this.tabConfigs=ln[2].configs,delete this.cmptParams.member_null,this.cmptParams=Object.assign(Object.assign({},this.cmptParams),{budget_activity:this.selectedAct.id})):(this.tabConfigs=ln[0].configs,this.cmptParams=Object.assign(Object.assign({},this.cmptParams),{member_null:!0,budget_activity:this.selectedAct.id}))}loadTabs(){this.asyncTabs=new _e.a(t=>{setTimeout(()=>{t.next([...this.tabsList])},250)})}loadActActions(){const t=Object(h.get)(JSON.parse(localStorage.getItem("organization")),"org_type",null);this.actActions=[{text:"Edit",icon:"edit",iconClass:"text-primary",context:"edit",status:["DRAFT"],bpType:["SPORTS_ORGANIZATION","GOVERNMENT_AGENCY"]},{text:"Rationalize",icon:"compare_arrows",iconClass:"text-success",context:"rationalize",status:["DRAFT"],bpType:["MINISTRY","SASDEF"]},{text:"Approve",icon:"check",iconClass:"text-success",context:"approve",status:["RATIONALIZED"],bpType:["SASDEF"]},{text:"Reject",icon:"close",iconClass:"text-danger",context:"reject",status:["DRAFT","RATIONALIZED"],bpType:["MINISTRY","SASDEF"]}].filter(e=>{const i=Object(h.indexOf)(e.bpType,t),n=Object(h.indexOf)(e.status,this.selectedAct.status);if(i>=0&&n>=0)return e})}selectActivity(t){this.loading=!0;const e=Object(h.indexOf)(this.list,Object(h.find)(this.list,{active:!0}));this.selectedAct=void 0,e>=0&&(this.list[e].active=!1),this.list[t].active=!0;const i={current_org_id:Object(h.get)(this.organization,"organization",null)};this._dataLayer.get("organization-budget-activities",this.list[t].id,i).subscribe(e=>{this.selectedAct=this.list[t],this.cmptParams=Object.assign(Object.assign({},this.cmptParams),{budget_activity:this.selectedAct.id,member_null:!0}),this.loadTabs(),this.loading=!1,this.loadActActions()},t=>{console.log(t),this.loading=!1})}setSelected(t){if(this.list.length){let e=Object(h.find)(this.list,{active:!0});if(Object(h.isUndefined)(e)&&Object(h.isUndefined)(t))this.list[0].active=!0,this.selectedAct=void 0,this.selectActivity(0),this.cmptParams={budget_activity:this.list[0].id,member_null:!0};else if(Object(h.isUndefined)(t))this.selectedAct=Object(h.indexOf)(this.list,e);else{const e=Object(h.indexOf)(this.list,Object(h.find)(this.list,{id:t}));this.selectedAct=void 0,this.selectActivity(e)}}}fetchList(t){const e={current_org_id:Object(h.get)(this.organization,"organization",null),org_budget:Object(h.get)(this.item,"id",this.itemId||null)};this._dataLayer.list("organization-budget-activities",e).subscribe(e=>{this.list=e.results,this.setSelected(t)},t=>console.log(t))}getItem(){this._route.queryParams.subscribe(t=>{const e=parseInt(t.current,10);this.itemId=parseInt(t.id,10);const i=Object(h.findIndex)(this.steps,{count:e});this.configs=this.steps[i].gridConf,this._dataLayer.get("organization-budgets",this.itemId,{current_org_id:this.organization.organization}).subscribe(t=>{this.item=t},t=>console.log(t)),this.fetchList()})}ngOnInit(){this.organization=JSON.parse(localStorage.getItem("organization")),this.steps.length?this.getItem():this.fetchList()}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(xe.a),T.Ob(n.a),T.Ob(kt.b))},t.\u0275cmp=T.Ib({type:t,selectors:[["nested-list"]],inputs:{item:"item",steps:"steps",current:"current"},outputs:{onNavigate:"onNavigate"},features:[T.Ab([xe.a])],decls:14,vars:4,consts:[[1,"content","page-layout","simple","d-flex","flex-column","main-wrapper"],[1,"fullwidth","mat-elevation-z1","py-3","px-20","d-flex","flex-row"],[1,"font-size-16","font-weight-600","text-muted","flex-fill","pl-3","pt-2"],[1,"action"],["mat-raised-button","","color","accent",1,"pl-2","pr-3","py-0","font-size-12",3,"click"],[1,"fullwidth","flex-row","row","px-16"],["class","page-layout col-lg-12 pt-32 pb-36",4,"ngIf"],["class","h-100-p overflow-auto innerScroll \n        page-layout col-lg-3 main-list",4,"ngIf"],["class","col-lg-9 overflow-auto innerScroll px-0 mt-1 \n        main-card-content bg-light pb-12 border-left",4,"ngIf"],["class","btn-cont px-20 pb-12 pt-3 border-top",4,"ngIf"],[1,"page-layout","col-lg-12","pt-32","pb-36"],[1,"w-100-p","py-80","col-12"],[1,"w-100-p","pb-32"],[1,"d-flex","w-100-p","justify-content-center"],["diameter","45",4,"ngIf"],["class","ml-n5 font-size-80",4,"ngIf"],[1,"col-12","text-center","font-size-18","text-muted","pt-20","pl-32"],["class","col-12 text-center font-size-14 text-muted\n                pt-2 pl-32",4,"ngIf"],["diameter","45"],[1,"ml-n5","font-size-80"],[1,"col-12","text-center","font-size-14","text-muted","pt-2","pl-32"],[1,"h-100-p","overflow-auto","innerScroll","page-layout","col-lg-3","main-list"],[1,"ps"],["fuseperfectscrollbar","",1,"mail-list","overflow-auto"],["class","list-item",3,"active","click",4,"ngFor","ngForOf"],[1,"list-item",3,"click"],[1,"pb-0"],[1,"d-flex","flex-column","align-items-start"],[1,"d-flex","flex-row","align-items-center","fullwidth","ml-n1"],[1,"pt-2"],[1,"font-size-18","text-muted"],[1,"font-size-14","text-muted","pl-1"],[1,"d-flex","flex-row","align-items-center","fullwidth","pt-0","mt-n2"],[1,"font-size-16","text-muted"],[1,"font-size-14","text-muted"],[1,"col-lg-9","overflow-auto","innerScroll","px-0","mt-1","main-card-content","bg-light","pb-12","border-left"],[1,"fullwidht","h-100-p","bg-light","px-16","pt-12","pb-32"],[1,"mat-elevation-1","p-0","mb-20"],[1,"card-header","bg-white","font-size-16"],[1,"d-flex","flex-row"],[1,"title","pt-12","pb-8","pl-8","flex-fill"],["mat-mini-fab","","color","default","aria-label","Activity actions",1,"mat-elevation-z0","border","bg-light","h-32","w-32",3,"matMenuTriggerFor"],[1,"mt-n2","fonnt-size-20"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[1,"p-0"],["fxLayout","row",1,"fullwidth","bg-light","d-flex","border-bottom","mb-2"],[1,"col-lg-4","border-right","pl-20","py-12","pr-16"],[1,"flex-fill"],[1,"text-muted","font-size-12"],[1,"pt-3"],[1,"size-40"],[1,"col-lg-4","border-right","pr-16","py-12","pl-20"],[1,"size-50"],[1,"col-lg-4","pr-16","py-12","pl-20"],[3,"item"],["class","fullwidth mt-2 px-0",4,"ngIf"],["mat-menu-item","",3,"click"],[1,"fullwidth","mt-2","px-0"],[3,"selectedTabChange"],[4,"ngFor","ngForOf"],["mat-tab-label",""],["class","",4,"ngIf"],[1,"font-size-24"],[1,""],["title","Listing",1,"w-100-p",3,"tabbedItem","largeForms","addOrg","modelKey","cmptParams","headers","no-card","has-action","store","topActions","hasSearch","dropDownActions","rows","postCRUDFxn"],[1,"btn-cont","px-20","pb-12","pt-3","border-top"],[1,"btn-cont","mb-3","pt-12","w-100-p","d-flex","justify-content-between"],["mat-raised-button","",1,"float-left",3,"click"],[1,"btn-icon"],["mat-raised-button","","class","mt-10 float-right mr-0","color","accent",3,"click",4,"ngIf"],["mat-raised-button","","color","success","class","mt-10 float-right mr-0",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",1,"mt-10","float-right","mr-0",3,"click"],["mat-raised-button","","color","success",1,"mt-10","float-right","mr-0",3,"click"]],template:function(t,e){1&t&&(T.Ub(0,"div",0),T.Ub(1,"div",1),T.Ub(2,"div",2),T.Lc(3," Activities "),T.Tb(),T.Ub(4,"div",3),T.Ub(5,"button",4),T.cc("click",(function(){return e.openDialog()})),T.Ub(6,"mat-icon"),T.Lc(7,"add"),T.Tb(),T.Lc(8," \xa0ADD ACTIVITY "),T.Tb(),T.Tb(),T.Tb(),T.Ub(9,"div",5),T.Jc(10,Cn,9,4,"div",6),T.Jc(11,In,4,1,"div",7),T.Jc(12,Mn,53,21,"div",8),T.Tb(),T.Tb(),T.Jc(13,Nn,10,2,"div",9)),2&t&&(T.Bb(10),T.mc("ngIf",!(null!=e.list&&e.list.length)),T.Bb(1),T.mc("ngIf",e.list.length),T.Bb(1),T.mc("ngIf",e.selectedAct&&!1===e.loading),T.Bb(1),T.mc("ngIf",e.steps.length))},directives:[b.b,r.a,c.t,g.b,c.s,l.a,d.c,d.d,yn.c,xn,d.a,xt,dt,st,ve.a],pipes:[c.d,c.f,c.p,De.a,c.b],styles:["[_nghost-%COMP%]     .main-wrapper{flex:1 1 auto;flex-direction:column;box-sizing:border-box}[_nghost-%COMP%]     .main-wrapper .main-card-content{min-height:65vh;max-height:85.5vh;border-left:1px solid #e0e0e0}[_nghost-%COMP%]     .main-wrapper .main-list{flex:1 1 0%;box-sizing:border-box;position:relative;display:flex;flex-direction:column;flex:1;padding:0;overflow-y:auto;-webkit-overflow-scrolling:touch}[_nghost-%COMP%]     .main-wrapper .main-list .mail-list{position:relative;display:flex;flex-direction:column;flex:1;min-height:65vh;max-height:85.5vh}[_nghost-%COMP%]     .main-wrapper .main-list .list-item{flex-shrink:0;position:relative;padding:16px 24px;cursor:pointer;border-bottom:1px solid rgba(0,0,0,.12)}[_nghost-%COMP%]     .main-wrapper .main-list .list-item.active{background:rgba(0,0,0,.04)}[_nghost-%COMP%]     .main-wrapper .badge.created, [_nghost-%COMP%]     .main-wrapper .badge.draft, [_nghost-%COMP%]     .main-wrapper .badge.on_going, [_nghost-%COMP%]     .main-wrapper .badge.open, [_nghost-%COMP%]     .main-wrapper .badge.pending{background-color:#ffc107;color:#212529}[_nghost-%COMP%]     .main-wrapper .badge.assigned, [_nghost-%COMP%]     .main-wrapper .badge.first_level_approved, [_nghost-%COMP%]     .main-wrapper .badge.rationalized, [_nghost-%COMP%]     .main-wrapper .badge.submitted{background-color:#2196f3;color:#fff}[_nghost-%COMP%]     .main-wrapper .badge.cancelled, [_nghost-%COMP%]     .main-wrapper .badge.rejected{background-color:#dc3545;color:#fff}[_nghost-%COMP%]     .main-wrapper .badge.overdue{background-color:#343a40;color:#fff}[_nghost-%COMP%]     .main-wrapper .badge.accepted, [_nghost-%COMP%]     .main-wrapper .badge.approved, [_nghost-%COMP%]     .main-wrapper .badge.completed, [_nghost-%COMP%]     .main-wrapper .badge.final_approved, [_nghost-%COMP%]     .main-wrapper .badge.finished{background-color:#28a745;color:#fff}[_nghost-%COMP%]     .mat-mini-fab .mat-button-wrapper{padding-top:0!important}[_nghost-%COMP%]     .btn-icon{min-width:1rem;width:1rem}[_nghost-%COMP%]     .btn-icon:first-of-type{margin-left:-.5rem}[_nghost-%COMP%]     .mat-tab-header{padding-left:1.75rem!important;padding-right:1.75rem!important}"]}),t})();function Rn(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div",8),T.Ub(1,"dynamic-form",9),T.cc("cancelFxn",(function(){return T.zc(t),T.gc().closeDialog()}))("submitModel",(function(e){return T.zc(t),T.gc().receiveModel(e)})),T.Tb(),T.Tb()}if(2&t){const t=T.gc();T.Bb(1),T.mc("submitted",t.submitted)("baseCancel",!0)("model",t.model)}}function Jn(t,e){if(1&t&&(T.Ub(0,"div"),T.Ub(1,"div"),T.Ub(2,"div"),T.Ub(3,"div"),T.Ub(4,"p"),T.Lc(5),T.Tb(),T.Ub(6,"div",11),T.Ub(7,"div",12),T.Ub(8,"div",13),T.Lc(9," Applied Total: "),T.Tb(),T.Ub(10,"div",14),T.Lc(11),T.hc(12,"currency"),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Ub(13,"p"),T.Lc(14," Ensure that you have rationalized each activity line item, otherwise the applied item amount will be used as the rationalized amount. If you would like to proceed click the "),T.Ub(15,"b"),T.Lc(16,"SUBMIT"),T.Tb(),T.Lc(17," button below. "),T.Tb(),T.Tb(),T.Tb(),T.Tb()),2&t){const t=T.gc(2);T.Bb(5),T.Nc(" Kindly confirm that you would like to rationalize ",null==t.item?null:t.item.title," "),T.Bb(6),T.Nc(" ",T.jc(12,2,null==t.item?null:t.item.total,"Kshs ")," ")}}function Vn(t,e){if(1&t&&(T.Ub(0,"div"),T.Ub(1,"div"),T.Ub(2,"div"),T.Ub(3,"p"),T.Lc(4),T.Tb(),T.Ub(5,"div",11),T.Ub(6,"div",12),T.Ub(7,"div",13),T.Lc(8," Applied Total: "),T.Tb(),T.Ub(9,"div",14),T.Lc(10),T.hc(11,"currency"),T.Tb(),T.Tb(),T.Ub(12,"div",12),T.Ub(13,"div",15),T.Lc(14," Rationalized: "),T.Tb(),T.Ub(15,"div",14),T.Lc(16),T.hc(17,"currency"),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Ub(18,"p"),T.Lc(19," Ensure you have approved each activity line item otherwise the rationalized amount will be used as the approved amount. If you would stil like to proceed click the "),T.Ub(20,"b"),T.Lc(21,"SUBMIT"),T.Tb(),T.Lc(22," button below: "),T.Tb(),T.Tb(),T.Tb()),2&t){const t=T.gc(2);T.Bb(4),T.Nc(" Kindly confirm that you would like to approve ",null==t.item?null:t.item.title," "),T.Bb(6),T.Nc(" ",T.jc(11,3,null==t.item?null:t.item.total,"Kshs ")," "),T.Bb(6),T.Nc(" ",T.jc(17,6,null==t.item?null:t.item.rationalized_total,"Kshs ")," ")}}function Kn(t,e){if(1&t&&(T.Ub(0,"div",8),T.Ub(1,"div"),T.Lc(2),T.Tb(),T.Jc(3,Jn,18,5,"div",10),T.Jc(4,Vn,23,9,"div",10),T.Tb()),2&t){const t=T.gc();T.Bb(2),T.Mc(null==t.configs?null:t.configs.description),T.Bb(1),T.mc("ngIf","rationalize"===t.context),T.Bb(1),T.mc("ngIf","approve"===t.context)}}function Hn(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div",16),T.Ub(1,"button",17),T.cc("click",(function(){return T.zc(t),T.gc().closeDialog()})),T.Lc(2,"CLOSE"),T.Tb(),T.Ub(3,"button",18),T.cc("click",(function(){return T.zc(t),T.gc().transitionActions()})),T.Lc(4),T.Tb(),T.Tb()}if(2&t){const t=T.gc();T.Bb(3),T.Gb("spinner",t.loading),T.mc("disabled",t.loading),T.Bb(1),T.Nc(" ",(null==t.configs?null:t.configs.action)||"SUBMIT"," ")}}function $n(t,e){1&t&&(T.Ub(0,"div"),T.Lc(1," Comment is required "),T.Tb())}function Gn(t,e){if(1&t&&(T.Ub(0,"div",30),T.Jc(1,$n,2,0,"div",10),T.Tb()),2&t){const t=T.gc(2);T.Bb(1),T.mc("ngIf",t.f.comment.errors.required)}}function qn(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div",19),T.Ub(1,"div",20),T.Ub(2,"p"),T.Lc(3," Kindly confirm that you would like to reject the following activity: "),T.Tb(),T.Ub(4,"div",11),T.Ub(5,"div",12),T.Ub(6,"div",13),T.Lc(7," Applied Amount: "),T.Tb(),T.Ub(8,"div",14),T.Lc(9),T.hc(10,"currency"),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Ub(11,"form",21),T.cc("ngSubmit",(function(){T.zc(t);const e=T.gc();return e.submitForm(e.commentForm)})),T.Ub(12,"div",22),T.Ub(13,"div",23),T.Ub(14,"mat-form-field",24),T.Ub(15,"mat-label"),T.Lc(16,"Enter comment*"),T.Tb(),T.Pb(17,"textarea",25),T.Tb(),T.Tb(),T.Jc(18,Gn,2,1,"div",26),T.Tb(),T.Ub(19,"div",27),T.Ub(20,"button",28),T.cc("click",(function(){return T.zc(t),T.gc().closeDialog()})),T.Lc(21,"CLOSE"),T.Tb(),T.Ub(22,"button",29),T.Lc(23," SUBMIT "),T.Tb(),T.Tb(),T.Tb(),T.Tb()}if(2&t){const t=T.gc();T.Bb(9),T.Nc(" ",T.jc(10,6,null==t.item?null:t.item.total,"Kshs ")," "),T.Bb(2),T.mc("formGroup",t.commentForm),T.Bb(7),T.mc("ngIf",t.f.comment.invalid&&(t.f.comment.touched||t.f.comment.dirty)),T.Bb(4),T.Gb("spinner",t.loading),T.mc("disabled",t.loading)}}let Wn=(()=>{class t{constructor(t,e,i,n){this._formBuilder=t,this._dialogRef=e,this._dataLayer=i,this.data=n,this.dialogActions={approveApplication:()=>{this.getUserOrganization(),this.loading=!0}}}formInit(){this.commentForm=this._formBuilder.group({comment:["",s.D.required]}),this.adjustedAmountForm=this._formBuilder.group({adjustedAmount:["",s.D.required]})}get f(){return this.commentForm.controls}get aF(){return this.adjustedAmountForm.controls}submitTransition(t,e){const i=this.data.store;this.loading=!0,this._dataLayer.update(i,this.item.id,t,{key:"current_org_id",value:this.organization}).subscribe(t=>{console.log(t),this.loading=!1,this.closeDialog("refresh"),this._dataLayer.openDynamicSnackBar(e.succMsg,"success")},t=>{console.log(t),this.loading=!1,this._dataLayer.openDynamicSnackBar(e.errMsg,"error")})}transitionActions(t){let e=t=>`Item ${t} successfully`,i=t=>`An error occurred during ${t}ing`;switch(this.context){case"rationalize":const n={status:"RATIONALIZED"},a={succMsg:e("rationalized"),errMsg:i("rationaliz")};this.submitTransition(n,a);break;case"approve":const o={status:"SASDEF_APPROVED"},s={succMsg:e("approved"),errMsg:i("approv")};this.submitTransition(o,s);break;case"reject":const c={succMsg:e("rejected"),errMsg:i("reject")},r=Object.assign({},t);this.submitTransition(r,c);break;default:throw new Error("No relevant transition action given")}}submitForm(t){console.log(t),t.valid&&"rejected"===this.context&&this.transitionActions({comment:t.value.comment,status:"REJECTED"})}closeDialog(t){this._dialogRef.close(t)}getUserOrganization(){const t=JSON.parse(localStorage.getItem("organization"));this.organization=Object(h.get)(t,"organization",null)}receiveModel(t){console.log(t)}setConfigs(){const t=this.data.context;switch(this.context=this.data.context,this.formInit(),this.getUserOrganization(),t){case"edit":return{title:"Update Activity",type:"form"};case"approve":return{title:"Approve Activity",type:"dialog"};case"rationalize":return{title:"Rationalize Activity",type:"dialog",validationKey:"rationalized_total"};case"reject":return{title:"Reject Activity",type:"comment"};default:throw new Error("Provide a valid option")}}ngOnInit(){this.model=this.data.activity,this.item=this.data.activity,this.configs=this.setConfigs()}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(s.g),T.Ob(kt.g),T.Ob(xe.a),T.Ob(kt.a))},t.\u0275cmp=T.Ib({type:t,selectors:[["nested-crud-dialog"]],features:[T.Ab([xe.a])],decls:10,vars:5,consts:[[1,""],[1,"d-flex","align-items-center","mb-n3"],[1,"flex-fill"],["mat-dialog-title","",1,"pb-2","font"],["mat-dialog-content","","class","text-muted fullwidth",4,"ngIf"],["mat-dialog-actions","","class","pt-5 pb-20 d-flex justify-content-end",4,"ngIf"],["mat-dialog-actions","",4,"ngIf"],[1,"py-2"],["mat-dialog-content","",1,"text-muted","fullwidth"],["btnClass","tiny mr-3","btnStatus","primary","store","organization-budget-activities","btnText","SAVE",3,"submitted","baseCancel","model","cancelFxn","submitModel"],[4,"ngIf"],[1,"mb-3"],[1,"d-flex"],[1,"text-muted","pr-3"],[1,"font-weight-600"],[1,"text-muted","pr-16"],["mat-dialog-actions","",1,"pt-5","pb-20","d-flex","justify-content-end"],["mat-button","","mat-dialog-close","",3,"click"],["mat-button","",3,"disabled","click"],["mat-dialog-actions",""],[1,"context","===","'reject'"],["name","frm",1,"w-100-p",3,"formGroup","ngSubmit"],[1,"w-100-p","pt-1"],[1,"input-wrapper","fullwidth"],["appearance","outline","color","primary",1,"pb-0","mb-0","w-100-p"],["name","comment","id","","matInput","","cols","30","rows","6","formControlName","comment","placeholder","Kindly enter a comment..."],["class","invalid-feedback",4,"ngIf"],[1,"btn-container","d-flex","justify-content-end","w-100-p"],["mat-button","","mat-dialog-close","","type","button",3,"click"],["mat-button","","type","submit",3,"disabled"],[1,"invalid-feedback"]],template:function(t,e){1&t&&(T.Ub(0,"div",0),T.Ub(1,"div",1),T.Ub(2,"div",2),T.Ub(3,"h4",3),T.Lc(4),T.Tb(),T.Tb(),T.Tb(),T.Jc(5,Rn,2,3,"div",4),T.Jc(6,Kn,5,3,"div",4),T.Jc(7,Hn,5,4,"div",5),T.Jc(8,qn,24,9,"div",6),T.Pb(9,"div",7),T.Tb()),2&t&&(T.Bb(4),T.Nc(" ",null==e.configs?null:e.configs.title," "),T.Bb(1),T.mc("ngIf","form"===(null==e.configs?null:e.configs.type)),T.Bb(1),T.mc("ngIf","dialog"===(null==e.configs?null:e.configs.type)),T.Bb(1),T.mc("ngIf","dialog"===(null==e.configs?null:e.configs.type)),T.Bb(1),T.mc("ngIf","comment"===(null==e.configs?null:e.configs.type)))},directives:[kt.h,c.t,kt.e,Ve.a,kt.c,b.b,kt.d,s.F,s.s,s.l,Bt.c,Bt.g,p.b,s.e,s.r,s.j],pipes:[c.d],encapsulation:2}),t})();function Yn(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div",11),T.cc("click",(function(){T.zc(t);const i=e.$implicit;return T.gc().setSelected(i.id)})),T.Ub(1,"div",12),T.Lc(2),T.Tb(),T.Ub(3,"div",13),T.Ub(4,"div",14),T.Ub(5,"div",15),T.Ub(6,"mat-icon",16),T.Lc(7,"attach_money"),T.Tb(),T.Tb(),T.Ub(8,"div",17),T.Lc(9),T.hc(10,"currency"),T.Tb(),T.Tb(),T.Ub(11,"div",18),T.Ub(12,"div",15),T.Ub(13,"mat-icon",19),T.Lc(14,"people"),T.Tb(),T.Tb(),T.Ub(15,"div",20),T.Lc(16),T.Ub(17,"span",21),T.Lc(18," \xa0For\xa0 "),T.Tb(),T.Lc(19),T.hc(20,"number"),T.Tb(),T.Tb(),T.Tb(),T.Tb()}if(2&t){const t=e.$implicit;T.Gb("active",t.active),T.Bb(2),T.Nc(" ",null==t?null:t.allowance_data.name," "),T.Bb(7),T.Nc(" ",T.jc(10,6,null==t?null:t.actual_total,"Kshs ")," "),T.Bb(7),T.Nc(" ",null==t?null:t.head_count," "),T.Bb(3),T.Nc(" ",T.jc(20,9,null==t?null:t.days,"1.0")," day(s) ")}}function Zn(t,e){if(1&t){const t=T.Vb();T.Ub(0,"button",34),T.cc("click",(function(){T.zc(t);const i=e.$implicit;return T.gc(2).openDialog(i.context)})),T.Ub(1,"mat-icon"),T.Lc(2),T.Tb(),T.Lc(3),T.Tb()}if(2&t){const t=e.$implicit;T.Bb(1),T.Db(null==t?null:t.iconClass),T.Bb(1),T.Nc(" ",null==t?null:t.icon," "),T.Bb(1),T.Nc(" ",null==t?null:t.text," ")}}function Qn(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div",22),T.Ub(1,"div",23),T.Ub(2,"mat-card",24),T.Ub(3,"div",25),T.Ub(4,"div",26),T.Ub(5,"div",27),T.Lc(6," Select Members "),T.Tb(),T.Ub(7,"div",28),T.Ub(8,"mat-menu",null,29),T.Jc(10,Zn,4,4,"button",30),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Ub(11,"mat-card-body",31),T.Ub(12,"div",32),T.Ub(13,"dynamic-table",33),T.cc("postCRUDFxn",(function(){return T.zc(t),T.gc().refreshSelected()})),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb()}if(2&t){const t=T.gc();T.Bb(10),T.mc("ngForOf",t.actActions),T.Bb(3),T.mc("tabbedItem",t.item)("largeForms",!0)("addOrg",!0)("customHeader",!0)("modelKey",null==t.configs?null:t.configs.modelKey)("cmptParams",t.cmptParams)("headers",null==t.configs?null:t.configs.headers)("no-card",!0)("has-action",!0)("store",null==t.configs?null:t.configs.getStore)("topActions",null==t.configs?null:t.configs.topActions)("hasSearch",!0)("dropDownActions",null==t.configs?null:t.configs.actions)("rows",t.configs.rows)}}let Xn=(()=>{class t{constructor(t,e,i){this._route=t,this._dataLayer=e,this._dialog=i,this.onNavigate=new T.n,this.list=[],this.nestedList=[],this.loading=!0,this.cmptParams={},this.actActions=[]}changeStep(t){this.onNavigate.emit(t)}loadActions(){const t=Object(h.get)(JSON.parse(localStorage.getItem("organization")),"org_type",null);this.actActions=[{text:"Edit",icon:"edit",iconClass:"text-primary",context:"edit",status:["DRAFT"],bpType:["SPORTS_ORGANIZATION","GOVERNMENT_AGENCY"]},{text:"Rationalize",icon:"compare_arrows",iconClass:"text-success",context:"rationalize",status:["DRAFT"],bpType:["MINISTRY","SASDEF"]},{text:"Approve",icon:"check",iconClass:"text-success",context:"approve",status:["RATIONALIZED"],bpType:["SASDEF"]},{text:"Reject",icon:"close",iconClass:"text-danger",context:"reject",status:["DRAFT","RATIONALIZED"],bpType:["MINISTRY","SASDEF"]}].filter(e=>{const i=Object(h.indexOf)(e.bpType,t),n=Object(h.indexOf)(e.status,this.item.status);if(i>=0&&n>=0)return e})}openDialog(t){this._dialog.open(Wn,{data:{context:t,store:"application-allowances",activity:this.selectedAllowance},width:"50%"}).afterClosed().subscribe(t=>{console.log(t),"refresh"===t&&(this.loading=!1,this.refreshSelected())})}refreshSelected(){this._dataLayer.get("application-allowances",this.selectedAllowance.id,{current_org_id:this.orgId}).subscribe(t=>{this.selectedAllowance=Object.assign(Object.assign({},t),{active:!0}),this.list=this.list.map(e=>(e.id===t.id&&(e=Object.assign(Object.assign({},t),{active:!0})),e))},t=>{this.loading=!1,console.log(t)})}setSelected(t){if(this.list.length){let e=Object(h.find)(this.list,{active:!0});if(Object(h.isUndefined)(e)&&Object(h.isUndefined)(t))this.list[0].active=!0,this.selectedAllowance=void 0,this.presetAllowance(0);else if(Object(h.isUndefined)(t))this.selectedAllowance=Object(h.indexOf)(this.list,e);else{const e=Object(h.indexOf)(this.list,Object(h.find)(this.list,{id:t}));console.log(e),this.selectedAllowance=void 0,this.presetAllowance(e)}}}presetAllowance(t){this.loading=!0;const e=Object(h.indexOf)(this.list,Object(h.find)(this.list,{active:!0}));this.selectedAllowance=void 0,e>=0&&(this.list[e].active=!1),this.list[t].active=!0,this.getNestedList(this.list[t].id),this._dataLayer.get("organization-budget-activity-allowances",this.list[t].id,{current_org_id:this.orgId}).subscribe(e=>{this.selectedAllowance=this.list[t]||e,this.cmptParams=Object.assign(Object.assign({},this.cmptParams),{budget_activity_allowance:this.list[t].id}),this.loading=!1},t=>{console.log(t),this.loading=!1})}getNestedList(t){this._dataLayer.list("application-allowances",{current_org_id:this.orgId,budget_activity_allowance:t}).subscribe(t=>{this.nestedList=t.results},t=>console.log(t))}getMainList(){this._dataLayer.list("organization-budget-activity-allowances",{current_org_id:this.orgId,budget_activity:this.item.activity}).subscribe(t=>{this.list=t.results,this.setSelected()},t=>console.log(t))}getItem(){this._dataLayer.get("applications",this.itemId,{current_org_id:this.orgId}).subscribe(t=>{console.log(t),this.item=t,this.getMainList()},t=>console.log(t))}getItemId(){this._route.queryParams.subscribe(t=>{parseInt(t.current,10),this.itemId=parseInt(t.id,10),this.configs=this.tab,console.log(this.configs),this.getItem()})}ngOnInit(){this.orgId=Object(h.get)(JSON.parse(localStorage.getItem("organization")),"organization",null),console.log("Called",this.orgId),this.getItemId()}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(n.a),T.Ob(xe.a),T.Ob(kt.b))},t.\u0275cmp=T.Ib({type:t,selectors:[["nested-inline-tabbed-list"]],inputs:{tab:"tab",current:"current"},outputs:{onNavigate:"onNavigate"},features:[T.Ab([xe.a])],decls:16,vars:2,consts:[[1,"card","main-wrapper"],[1,"card-header","pt-3","bg-white"],[1,"pl-3","text-muted","font-weight-bold","pb-2","d-flex","align-items-center"],[1,"pt-2","pr-2"],[1,"card-body","px-0","pb-0","pt-0"],[1,"w-100-p","d-flex","flex-row","px-0"],[1,"h-100-p","overflow-auto","innerScroll","page-layout","col-lg-3","main-list"],[1,"ps"],["fuseperfectscrollbar","",1,"mail-list","overflow-auto"],["class","list-item",3,"active","click",4,"ngFor","ngForOf"],["class","col-lg-9 overflow-auto innerScroll px-0 mt-1\n                bg-light pb-12",4,"ngIf"],[1,"list-item",3,"click"],[1,"pb-0"],[1,"d-flex","flex-column","align-items-start"],[1,"d-flex","flex-row","align-items-center","fullwidth","ml-n1"],[1,"pt-2"],[1,"font-size-18","text-muted"],[1,"font-size-14","text-muted","pl-1"],[1,"d-flex","flex-row","align-items-center","fullwidth","pt-0","mt-n2"],[1,"font-size-16","text-muted"],[1,"font-size-14","text-muted"],[1,"font-weight-bold"],[1,"col-lg-9","overflow-auto","innerScroll","px-0","mt-1","bg-light","pb-12"],[1,"full-width","bg-light","px-16","pt-12","pb-2"],[1,"mat-elevation-z1","p-0","mb-2","w-100-p"],[1,"card-header","bg-white","font-size-16"],[1,"d-flex","flex-row"],[1,"flex-fill","pb-1","pl-8","title","pt-2"],[1,"pt-1","pr-3"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[1,"p-0"],[1,"w-100-p","mt-0","px-0"],["title","Listing",1,"w-100-p",3,"tabbedItem","largeForms","addOrg","customHeader","modelKey","cmptParams","headers","no-card","has-action","store","topActions","hasSearch","dropDownActions","rows","postCRUDFxn"],["mat-menu-item","",3,"click"]],template:function(t,e){1&t&&(T.Ub(0,"div",0),T.Ub(1,"div",1),T.Ub(2,"div",2),T.Ub(3,"div",3),T.Ub(4,"mat-icon"),T.Lc(5,"account_balance_wallet"),T.Tb(),T.Tb(),T.Ub(6,"div"),T.Lc(7," Allowances "),T.Tb(),T.Tb(),T.Tb(),T.Ub(8,"div",4),T.Ub(9,"div"),T.Ub(10,"div",5),T.Ub(11,"div",6),T.Ub(12,"div",7),T.Ub(13,"div",8),T.Jc(14,Yn,21,12,"div",9),T.Tb(),T.Tb(),T.Tb(),T.Jc(15,Qn,14,15,"div",10),T.Tb(),T.Tb(),T.Tb(),T.Tb()),2&t&&(T.Bb(14),T.mc("ngForOf",e.list),T.Bb(1),T.mc("ngIf",e.selectedAllowance&&!e.loading))},directives:[r.a,c.s,c.t,l.a,d.d,ve.a,d.a],pipes:[c.d,c.g],styles:["[_nghost-%COMP%]     .btn-icon{min-width:1rem;width:1rem}[_nghost-%COMP%]     .btn-icon:first-of-type{margin-left:-.5rem}[_nghost-%COMP%]     .mat-success{background-color:teal!important;color:#fff!important}[_nghost-%COMP%]     .main-wrapper{flex:1 1 auto;flex-direction:column;box-sizing:border-box}[_nghost-%COMP%]     .main-wrapper .main-card-content{min-height:55.5vh;max-height:85.5vh;border-left:1px solid #e0e0e0}[_nghost-%COMP%]     .main-wrapper .main-list{flex:1 1 0%;box-sizing:border-box;position:relative;display:flex;flex-direction:column;flex:1;padding:0;overflow-y:auto;-webkit-overflow-scrolling:touch}[_nghost-%COMP%]     .main-wrapper .main-list .mail-list{position:relative;display:flex;flex-direction:column;flex:1;min-height:55vh;max-height:85.5vh}[_nghost-%COMP%]     .main-wrapper .main-list .list-item{flex-shrink:0;position:relative;padding:16px 24px;cursor:pointer;border-bottom:1px solid rgba(0,0,0,.12)}[_nghost-%COMP%]     .main-wrapper .main-list .list-item.active{background:rgba(0,0,0,.04)}[_nghost-%COMP%]     .main-wrapper .badge.created, [_nghost-%COMP%]     .main-wrapper .badge.draft, [_nghost-%COMP%]     .main-wrapper .badge.on_going, [_nghost-%COMP%]     .main-wrapper .badge.open, [_nghost-%COMP%]     .main-wrapper .badge.pending{background-color:#ffc107;color:#212529}[_nghost-%COMP%]     .main-wrapper .badge.assigned, [_nghost-%COMP%]     .main-wrapper .badge.first_level_approved, [_nghost-%COMP%]     .main-wrapper .badge.rationalized, [_nghost-%COMP%]     .main-wrapper .badge.submitted{background-color:#2196f3;color:#fff}[_nghost-%COMP%]     .main-wrapper .badge.cancelled, [_nghost-%COMP%]     .main-wrapper .badge.rejected{background-color:#dc3545;color:#fff}[_nghost-%COMP%]     .main-wrapper .badge.overdue{background-color:#343a40;color:#fff}[_nghost-%COMP%]     .main-wrapper .badge.accepted, [_nghost-%COMP%]     .main-wrapper .badge.approved, [_nghost-%COMP%]     .main-wrapper .badge.completed, [_nghost-%COMP%]     .main-wrapper .badge.final_approved, [_nghost-%COMP%]     .main-wrapper .badge.finished{background-color:#28a745;color:#fff}[_nghost-%COMP%]     .mat-mini-fab .mat-button-wrapper{padding-top:0!important}"]}),t})();var ta=i("ura0");function ea(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div",20),T.Ub(1,"span",21),T.cc("click",(function(){return T.zc(t),T.gc().goBack()})),T.Ub(2,"mat-icon",22),T.Lc(3," arrow_back "),T.Tb(),T.Tb(),T.Tb()}}function ia(t,e){if(1&t&&(T.Ub(0,"mat-icon"),T.Lc(1),T.Tb()),2&t){const t=T.gc(2).$implicit;T.Bb(1),T.Mc(null==t?null:t.icon)}}function na(t,e){if(1&t){const t=T.Vb();T.Ub(0,"button",27),T.cc("click",(function(){T.zc(t);const e=T.gc().$implicit;return T.gc(3).headerActions[e.action](null==e?null:e.configs,null==e?null:e.btnText)})),T.Jc(1,ia,2,1,"mat-icon",13),T.Lc(2),T.Tb()}if(2&t){const t=T.gc().$implicit;T.mc("color",t.color),T.Bb(1),T.mc("ngIf",null==t?null:t.icon),T.Bb(1),T.Nc(" \xa0",null==t?null:t.btnText," ")}}function aa(t,e){if(1&t&&(T.Ub(0,"span"),T.Jc(1,na,3,3,"button",26),T.Tb()),2&t){const t=e.$implicit,i=T.gc(3);T.Bb(1),T.mc("ngIf",i.statusChecker(t)&&i.authChecker(t))}}function oa(t,e){if(1&t&&(T.Ub(0,"div",25),T.Jc(1,aa,2,1,"span",16),T.Tb()),2&t){const t=T.gc(2);T.Bb(1),T.mc("ngForOf",null==t.headerConfig?null:t.headerConfig.actions)}}function sa(t,e){if(1&t&&(T.Ub(0,"div",23),T.Jc(1,oa,2,1,"div",24),T.Tb()),2&t){const t=T.gc();T.Bb(1),T.mc("ngIf",null==t.item?null:t.item.id)}}function ca(t,e){1&t&&(T.Sb(0),T.Lc(1," Loading tabs... "),T.Rb())}function ra(t,e){if(1&t&&T.Lc(0),2&t){const t=T.gc().$implicit;T.Mc(t.label)}}function la(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div",39),T.Ub(1,"button",40),T.cc("click",(function(){return T.zc(t),T.gc(3).downloadSummary()})),T.Ub(2,"mat-icon",41),T.Lc(3," get_app "),T.Tb(),T.Lc(4," \xa0"),T.Ub(5,"span",42),T.Lc(6,"SUMMARY"),T.Tb(),T.Tb(),T.Tb()}}function ba(t,e){if(1&t&&(T.Ub(0,"div"),T.Lc(1),T.hc(2,"currency"),T.Tb()),2&t){const t=T.gc(2).$implicit,e=T.gc(3);T.Bb(1),T.Nc(" ",T.jc(2,1,e.item[t.key],"Kshs ")," ")}}function da(t,e){if(1&t&&(T.Ub(0,"div"),T.Lc(1),T.hc(2,"date"),T.Tb()),2&t){const t=T.gc(2).$implicit,e=T.gc(3);T.Bb(1),T.Nc(" ",T.jc(2,1,e.item[t.key],"dd-MM-yyyy")," ")}}function pa(t,e){if(1&t&&(T.Ub(0,"div"),T.Ub(1,"span"),T.hc(2,"lowercase"),T.Lc(3),T.hc(4,"removeUnderscore"),T.Tb(),T.Tb()),2&t){const t=T.gc(2).$implicit,e=T.gc(3);T.Bb(1),T.Eb("badge ",T.ic(2,4,e.item[t.key])," \n                                                        px-2 pb-1 pt-2 font-size-10"),T.Bb(2),T.Nc(" ",T.ic(4,6,e.item[t.key])," ")}}function ga(t,e){if(1&t&&(T.Ub(0,"div"),T.Pb(1,"nested-string",49),T.Tb()),2&t){const t=T.gc(2).$implicit,e=T.gc(3);T.Bb(1),T.mc("type",t.fieldType)("config",t)("item",e.item)}}function ma(t,e){if(1&t&&(T.Ub(0,"div"),T.Jc(1,ba,3,4,"div",13),T.Jc(2,da,3,4,"div",13),T.Jc(3,pa,5,8,"div",13),T.Jc(4,ga,2,3,"div",13),T.Tb()),2&t){const t=T.gc().$implicit,e=T.gc(3);T.Bb(1),T.mc("ngIf","currency"===t.type),T.Bb(1),T.mc("ngIf","date"===t.type),T.Bb(1),T.mc("ngIf","status"===t.type&&(null==e.item?null:e.item.id)),T.Bb(1),T.mc("ngIf","nested"===t.type&&e.item.organization)}}function ua(t,e){if(1&t&&(T.Ub(0,"div",50),T.Lc(1),T.Tb()),2&t){const t=T.gc().$implicit,e=T.gc(3);T.Bb(1),T.Nc(" ",e.removeUnderscore(e.item[t.key])," ")}}function ha(t,e){1&t&&(T.Ub(0,"span"),T.Ub(1,"mat-icon"),T.Lc(2," remove "),T.Tb(),T.Tb())}function fa(t,e){if(1&t&&(T.Ub(0,"div",43),T.Ub(1,"div",44),T.Ub(2,"div",25),T.Ub(3,"mat-icon",45),T.Lc(4),T.Tb(),T.Tb(),T.Ub(5,"div",46),T.Ub(6,"div",47),T.Lc(7),T.Tb(),T.Ub(8,"div"),T.Jc(9,ma,5,4,"div",13),T.Jc(10,ua,2,1,"div",48),T.Jc(11,ha,3,0,"span",13),T.Tb(),T.Tb(),T.Tb(),T.Tb()),2&t){const t=e.$implicit,i=T.gc(3);T.Bb(4),T.Nc(" ",t.icon," "),T.Bb(3),T.Nc(" ",t.label," "),T.Bb(2),T.mc("ngIf",t.type),T.Bb(1),T.mc("ngIf",!t.type),T.Bb(1),T.mc("ngIf",!i.item[t.key])}}function Ta(t,e){1&t&&T.Qb(0)}function va(t,e){if(1&t&&(T.Ub(0,"div",51),T.Jc(1,Ta,1,0,"ng-container",52),T.Tb()),2&t){T.gc(3);const t=T.vc(25);T.Bb(1),T.mc("ngTemplateOutlet",t)}}function ya(t,e){1&t&&T.Qb(0)}function _a(t,e){if(1&t&&(T.Ub(0,"div",51),T.Jc(1,ya,1,0,"ng-container",52),T.Tb()),2&t){T.gc(3);const t=T.vc(27);T.Bb(1),T.mc("ngTemplateOutlet",t)}}function xa(t,e){if(1&t&&(T.Ub(0,"div",53),T.Pb(1,"organization-summary",54),T.Tb()),2&t){const t=T.gc(3);T.Bb(1),T.mc("organization",t.item.organization_data)}}function Ua(t,e){if(1&t&&(T.Ub(0,"div"),T.Pb(1,"application-me",55),T.Tb()),2&t){const t=T.gc(3);T.Bb(1),T.mc("item",t.item)}}function Oa(t,e){if(1&t&&(T.Ub(0,"div",56),T.Pb(1,"tabbed-inline-list",57),T.Tb()),2&t){const t=T.gc(2).$implicit,e=T.gc();T.Bb(1),T.mc("tab",t)("item",e.item)("parentKey",null==t?null:t.parentKey)}}function wa(t,e){if(1&t&&(T.Ub(0,"div",53),T.Pb(1,"activity-summary",58),T.Tb()),2&t){const t=T.gc(3);T.Bb(1),T.mc("activity",t.item.organization_data)("item",t.item)}}function Ca(t,e){if(1&t&&(T.Ub(0,"div",53),T.Pb(1,"audit-trail",59),T.Tb()),2&t){const t=T.gc(2).$implicit,e=T.gc();T.Bb(1),T.mc("context",t.context)("item",e.item)}}function Aa(t,e){if(1&t&&(T.Ub(0,"div",53),T.Pb(1,"header-attachments",59),T.Tb()),2&t){const t=T.gc(2).$implicit,e=T.gc();T.Bb(1),T.mc("context",t.context)("item",e.item)}}function Ia(t,e){if(1&t&&(T.Ub(0,"div",30),T.Ub(1,"div",31),T.Ub(2,"div",32),T.Lc(3),T.hc(4,"uppercase"),T.Tb(),T.Jc(5,la,7,0,"div",33),T.Tb(),T.Ub(6,"div",34),T.Jc(7,fa,12,5,"div",35),T.Tb(),T.Jc(8,va,2,1,"div",36),T.Jc(9,_a,2,1,"div",36),T.Jc(10,xa,2,1,"div",37),T.Jc(11,Ua,2,1,"div",13),T.Jc(12,Oa,2,3,"div",38),T.Jc(13,wa,2,2,"div",37),T.Jc(14,Ca,2,2,"div",37),T.Jc(15,Aa,2,2,"div",37),T.Tb()),2&t){const t=T.gc().$implicit,e=T.gc();T.Bb(2),T.Gb("pt-3","Application"===t.context),T.Bb(1),T.Nc(" ",T.ic(4,13,t.context||"ORAGNIZATION")," DETAILS "),T.Bb(2),T.mc("ngIf","Application"===(null==t?null:t.context)&&"SASDEF"===e.orgType),T.Bb(2),T.mc("ngForOf",t.detailsConf),T.Bb(1),T.mc("ngIf",(null==e.item?null:e.item.id)&&(null==t?null:t.extraDetails)),T.Bb(1),T.mc("ngIf",(null==e.item?null:e.item.id)&&(null==t?null:t.totalsSummary)),T.Bb(1),T.mc("ngIf",null==t?null:t.orgSummary),T.Bb(1),T.mc("ngIf",(null==t?null:t.applicationME)&&(null==e.item?null:e.item.id)),T.Bb(1),T.mc("ngIf",(null==t?null:t.bankConfs)&&(null==e.item?null:e.item.id)),T.Bb(1),T.mc("ngIf",(null==e.item?null:e.item.id)&&(null==t?null:t.activitySummary)),T.Bb(1),T.mc("ngIf",(null==t?null:t.auditTrail)&&(null==e.item?null:e.item.id)),T.Bb(1),T.mc("ngIf",(null==t?null:t.attachments)&&(null==e.item?null:e.item.id))}}function La(t,e){if(1&t&&(T.Ub(0,"div"),T.Pb(1,"dynamic-table",60),T.Tb()),2&t){const t=T.gc().$implicit,e=T.gc();T.Bb(1),T.mc("tabbedItem",e.item)("addOrg",!0)("modelKey",null==t?null:t.modelKey)("cmptParams",null==t?null:t.cmptParams)("headers",null==t?null:t.headers)("no-card",!0)("has-action",!0)("store",null==t?null:t.gridConf.getStore)("dropDownActions",null==t?null:t.dropDownActions)("topActions",null==t?null:t.topActions)("hasSearch",!0)("actions",null==t?null:t.actions)("rows",t.rows)}}function Sa(t,e){if(1&t&&(T.Ub(0,"div"),T.Pb(1,"attachments-listing",61),T.Tb()),2&t){const t=T.gc().$implicit,e=T.gc();T.Bb(1),T.mc("tab",t)("item",e.item)}}function ka(t,e){if(1&t&&(T.Ub(0,"div"),T.Pb(1,"nested-list",55),T.Tb()),2&t){const t=T.gc(2);T.Bb(1),T.mc("item",t.item)}}function za(t,e){if(1&t&&(T.Ub(0,"div"),T.Pb(1,"nested-inline-tabbed-list",62),T.Tb()),2&t){const t=T.gc().$implicit,e=T.gc();T.Bb(1),T.mc("item",e.item)("tab",t)}}function Ba(t,e){if(1&t&&(T.Ub(0,"mat-tab"),T.Jc(1,ra,1,1,"ng-template",28),T.Jc(2,Ia,16,15,"div",29),T.Jc(3,La,2,13,"div",13),T.Jc(4,Sa,2,2,"div",13),T.Jc(5,ka,2,1,"div",13),T.Jc(6,za,2,2,"div",13),T.Tb()),2&t){const t=e.$implicit,i=e.index,n=T.gc();T.Bb(2),T.mc("ngIf","form"===t.content&&i===n.currIndex),T.Bb(1),T.mc("ngIf","grid"===t.content&&i===n.currIndex&&(null==n.item?null:n.item.id)),T.Bb(1),T.mc("ngIf","attachments"===t.content&&i===n.currIndex&&(null==n.item?null:n.item.id)),T.Bb(1),T.mc("ngIf","nested-list"===t.content&&(null==n.item?null:n.item.id)&&i==n.currIndex),T.Bb(1),T.mc("ngIf","nested-inline-list"===t.content&&(null==n.item?null:n.item.id))}}function Pa(t,e){1&t&&(T.Ub(0,"mat-icon"),T.Lc(1,"remove"),T.Tb())}function Ea(t,e){1&t&&(T.Ub(0,"mat-icon"),T.Lc(1,"remove"),T.Tb())}const Ma=function(t,e){return{"text-danger":t,"text-success":e}};function Da(t,e){if(1&t&&(T.Ub(0,"span",75),T.Lc(1),T.hc(2,"number"),T.Ub(3,"span"),T.Lc(4,"%"),T.Tb(),T.Tb()),2&t){const t=T.gc(2);T.mc("ngClass",T.qc(5,Ma,(null==t.item?null:t.item.total)>t.item.activity_actual_total,(null==t.item?null:t.item.total)<t.item.activity_actual_total)),T.Bb(1),T.Nc(" ",T.jc(2,2,(null==t.item?null:t.item.total)/(null==t.item?null:t.item.activity_actual_total),"1.1-2")," ")}}function Fa(t,e){if(1&t&&(T.Ub(0,"div",63),T.Ub(1,"div",64),T.Ub(2,"div",65),T.Ub(3,"div",66),T.Ub(4,"div",67),T.Ub(5,"div",68),T.Ub(6,"mat-icon"),T.Lc(7,"assignment"),T.Tb(),T.Lc(8,"\xa0 "),T.Tb(),T.Ub(9,"div"),T.Lc(10,"Other Application Details"),T.Tb(),T.Tb(),T.Tb(),T.Ub(11,"div",69),T.Ub(12,"div"),T.Ub(13,"table",70),T.Ub(14,"thead",71),T.Ub(15,"th",72),T.Lc(16," Type "),T.Tb(),T.Ub(17,"th"),T.Lc(18," Organization "),T.Tb(),T.Ub(19,"th"),T.Lc(20," Organization Type "),T.Tb(),T.Ub(21,"th"),T.Lc(22," Rationalized "),T.Tb(),T.Ub(23,"th"),T.Lc(24," Approved "),T.Tb(),T.Ub(25,"th"),T.Lc(26," Variance "),T.Tb(),T.Tb(),T.Ub(27,"tbody"),T.Ub(28,"tr"),T.Ub(29,"td",72),T.Ub(30,"span",73),T.Lc(31),T.Tb(),T.Tb(),T.Ub(32,"td"),T.Lc(33),T.Tb(),T.Ub(34,"td",50),T.Lc(35),T.hc(36,"removeUnderscore"),T.Tb(),T.Ub(37,"td"),T.Lc(38),T.hc(39,"currency"),T.Jc(40,Pa,2,0,"mat-icon",13),T.Tb(),T.Ub(41,"td"),T.Lc(42),T.hc(43,"currency"),T.Jc(44,Ea,2,0,"mat-icon",13),T.Tb(),T.Ub(45,"td"),T.Jc(46,Da,5,8,"span",74),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb()),2&t){const t=T.gc();T.Bb(31),T.Nc(" ",null==t.item?null:t.item.application_type," "),T.Bb(2),T.Nc(" ",null==t.item?null:t.item.organization_data.name," "),T.Bb(2),T.Nc(" ",T.ic(36,8,null==t.item?null:t.item.organization_data.org_type_code)," "),T.Bb(3),T.Nc(" ",T.jc(39,10,null==t.item?null:t.item.rationalized_total,"Kshs ")," "),T.Bb(2),T.mc("ngIf",!(null!=t.item&&t.item.rationalized_total)),T.Bb(2),T.Nc(" ",T.jc(43,13,null==t.item?null:t.item.actual_total,"Kshs ")," "),T.Bb(2),T.mc("ngIf",!(null!=t.item&&t.item.actual_total)),T.Bb(2),T.mc("ngIf",null==t.item?null:t.item.total)}}function Na(t,e){1&t&&(T.Ub(0,"mat-icon"),T.Lc(1,"remove"),T.Tb())}function ja(t,e){1&t&&(T.Ub(0,"mat-icon"),T.Lc(1,"remove"),T.Tb())}function Ra(t,e){if(1&t&&(T.Ub(0,"div",63),T.Ub(1,"div",76),T.Ub(2,"div",65),T.Ub(3,"div",66),T.Ub(4,"div",67),T.Ub(5,"div",68),T.Ub(6,"mat-icon"),T.Lc(7,"monetization_on"),T.Tb(),T.Lc(8,"\xa0 "),T.Tb(),T.Ub(9,"div"),T.Lc(10,"Totals Summary"),T.Tb(),T.Tb(),T.Tb(),T.Ub(11,"div",77),T.Ub(12,"div"),T.Ub(13,"table",78),T.Ub(14,"thead",79),T.Ub(15,"th",72),T.Lc(16," Applied Total "),T.Tb(),T.Ub(17,"th"),T.Lc(18," Rationalized Total "),T.Tb(),T.Ub(19,"th"),T.Lc(20," Approved Total "),T.Tb(),T.Tb(),T.Ub(21,"tbody"),T.Ub(22,"tr"),T.Ub(23,"td",72),T.Lc(24),T.hc(25,"currency"),T.Tb(),T.Ub(26,"td"),T.Lc(27),T.hc(28,"currency"),T.Jc(29,Na,2,0,"mat-icon",13),T.Tb(),T.Ub(30,"td"),T.Lc(31),T.hc(32,"currency"),T.Jc(33,ja,2,0,"mat-icon",13),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb()),2&t){const t=T.gc();T.Bb(24),T.Nc(" ",T.jc(25,5,null==t.item?null:t.item.total,"Kshs ")," "),T.Bb(3),T.Nc(" ",T.jc(28,8,null==t.item?null:t.item.rationalized_total,"Kshs ")," "),T.Bb(2),T.mc("ngIf",!(null!=t.item&&t.item.rationalized_total)),T.Bb(2),T.Nc(" ",T.jc(32,11,null==t.item?null:t.item.actual_total,"Kshs ")," "),T.Bb(2),T.mc("ngIf",!(null!=t.item&&t.item.actual_total))}}function Ja(t,e){if(1&t&&(T.Ub(0,"div",80),T.Ub(1,"div",81),T.Ub(2,"div",82),T.Ub(3,"div",83),T.Ub(4,"h1"),T.Lc(5),T.Tb(),T.Tb(),T.Tb(),T.Ub(6,"div",82),T.Ub(7,"div",83),T.Pb(8,"img",84),T.Tb(),T.Ub(9,"div",83),T.Pb(10,"div",85),T.Tb(),T.Tb(),T.Ub(11,"div",86),T.Ub(12,"div",87),T.Ub(13,"p"),T.Lc(14,"Financial Year:"),T.Tb(),T.Ub(15,"p"),T.Lc(16,"Required By:"),T.Tb(),T.Tb(),T.Ub(17,"div",88),T.Ub(18,"div",89),T.Ub(19,"div",90),T.Ub(20,"mat-icon"),T.Lc(21,"minimize"),T.Tb(),T.Lc(22,"\xa0 "),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Ub(23,"div",86),T.Ub(24,"div",87),T.Ub(25,"p"),T.Lc(26,"Approved Amount:"),T.Tb(),T.Ub(27,"p"),T.Lc(28,"Applied Amount:"),T.Tb(),T.Ub(29,"p"),T.Lc(30,"Rationalized:"),T.Tb(),T.Ub(31,"p"),T.Lc(32,"Approved:"),T.Tb(),T.Tb(),T.Ub(33,"div",88),T.Pb(34,"p"),T.Pb(35,"p"),T.Pb(36,"p"),T.Tb(),T.Tb(),T.Tb(),T.Tb()),2&t){const t=T.gc();T.Bb(5),T.Nc(" Application N\xba ",null==t.item?null:t.item.id," ")}}let Va=(()=>{class t{constructor(t,e,i,n,a,o,s){this._router=t,this._route=e,this._authConfig=i,this._tabsService=n,this._dataLayer=a,this._dialog=o,this._authChecker=s,this.item={},this.tabs=[],this.currIndex=0,this.cmptParams={},this.headerActions={submit:(t,e)=>{this.openDialog(t,e)},rationalize:(t,e)=>{this.openDialog(t,e)},approve:(t,e)=>{this.openDialog(t,e)},reject:(t,e)=>{this.openDialog(t,e)}}}goBack(){this._router.navigate([this.listRoute])}openDialog(t,e){this._dialog.open(Be,{data:{item:this.item,configs:t,action:e},width:"40%"}).afterClosed().subscribe(t=>{console.log(t),"refresh"===t&&this.getItem()})}statusChecker(t){return Object(h.indexOf)(t.activeStates,this.item.status)>=0}authChecker(t){return!Object(h.has)(t,"bpType")||this._authChecker.isActionAllowed(t.bpType,t.roles)}setCmptParams(){this.tabs.tabs=this.tabs.tabs.map(t=>{if(Object(h.has)(t,"modelKey")){const e=Object(h.get)(t,"listParams",{});return Object.assign(Object.assign({},t),{cmptParams:Object.assign({[t.modelKey]:this.item.id},e)})}return t}),this.loadTabs(this.tabs.tabs)}getItem(){this.item={},this._dataLayer.get(this.apiStore,this.itemId,{current_org_id:this.organization}).subscribe(t=>{this.item=t,this.setCmptParams()},t=>console.log(t))}loadTabs(t){this.asyncTabs=new _e.a(e=>{setTimeout(()=>{e.next([...t])},250)})}getNested(t){return!h.isUndefined(t)&&h.isString(t)?h.get(this.item,t,null):t}removeUnderscore(t){return!h.isUndefined(t)&&h.isString(t)?t.replace(/_/g," "):t}getRouteConfigs(){this._route.data.subscribe(t=>{this.store=t.store,this.apiStore=t.endPoint,this.listRoute=t.listRoute,this.tabs=this._tabsService.getTabs(this.store);const e=this.tabs.tabs;this.headerConfig=Object.assign({},this.tabs.headerConfig),this.loadTabs(e),this.configs=t.itemConfig,this.getItem()})}setParams(){this._route.queryParams.subscribe(t=>{this.itemId=t.id,this.listParams={organization:t.id},this.getRouteConfigs()})}tabSelectChange(t){this.currIndex=t.index}printPage(){window.print()}downloadSummary(){console.log("Called"),this._dataLayer.get("applications",this.itemId+"/summary_report",{current_org_id:this.organization}).subscribe(t=>{console.log(t),this.printPage()},t=>{console.log(t),this.printPage()})}ngOnInit(){this.headerConfig={},this.user=JSON.parse(this._authConfig.getUser()),this.organization=JSON.parse(this._authConfig.getOrganization()).organization,this.orgType=Object(h.get)(JSON.parse(localStorage.getItem("organization")),"org_type",null),this.setParams()}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(n.g),T.Ob(n.a),T.Ob(Ee.a),T.Ob(ue),T.Ob(xe.a),T.Ob(kt.b),T.Ob(Pe.a))},t.\u0275cmp=T.Ib({type:t,selectors:[["tabbed-wrapper"]],features:[T.Ab([xe.a,Pe.a])],decls:29,vars:16,consts:[["id","no-print"],[1,"main-cont","header"],[1,"d-flex","w-100-p","align-items-center","pl-3"],["class","pt-12 pr-3",4,"ngIf"],[1,"text-light","px-3","pt-3"],[1,"font-size-48"],[1,"flex-fill","title-cont","pl-5"],[1,"title-text","pt-3","text-light","font-size-20"],[1,"desc-text","text-light","font-size-14","pt-2"],["class","actions pr-4",4,"ngIf"],[1,"px-5"],[1,"w-100-p","raised","mb-5","p-0"],[1,"p-0"],[4,"ngIf"],[3,"selectedTabChange"],["mainTabs",""],[4,"ngFor","ngForOf"],["extraDetails",""],["totalsSummary",""],["id","print",4,"ngIf"],[1,"pt-12","pr-3"],["mat-icon-button","","aria-label","Back to list",1,"back-btn",3,"click"],[1,"font-size-28"],[1,"actions","pr-4"],["class","pr-3",4,"ngIf"],[1,"pr-3"],["mat-raised-button","","class","pl-3 mr-3",3,"color","click",4,"ngIf"],["mat-raised-button","",1,"pl-3","mr-3",3,"color","click"],["mat-tab-label",""],["class","mb-5",4,"ngIf"],[1,"mb-5"],[1,"d-flex","px-5","pt-5","pb-3"],[1,"flex-fill","pl-3","text-muted","font-weight-bold","font-size-12"],["class","pb-16 pr-12",4,"ngIf"],[1,"d-flex","w-100-p","px-5","pt-3"],["class","col-lg-3 col-12",4,"ngFor","ngForOf"],["class","px-3",4,"ngIf"],["class","px-3 pt-3",4,"ngIf"],["class","px-40 pt-5 pb-0",4,"ngIf"],[1,"pb-16","pr-12"],["mat-stroked-button","",1,"pl-3",3,"click"],[1,"font-size-22","mt-1"],[1,"font-size-12"],[1,"col-lg-3","col-12"],[1,"d-flex","w-100-p","align-items-center"],[1,"font-size-32","text-success"],[1,"pl-3"],[1,"text-muted","font-size-13"],["class","font-size-13",4,"ngIf"],[3,"type","config","item"],[1,"font-size-13"],[1,"px-3"],[4,"ngTemplateOutlet"],[1,"px-3","pt-3"],[3,"organization"],[3,"item"],[1,"px-40","pt-5","pb-0"],[3,"tab","item","parentKey"],[3,"activity","item"],[3,"context","item"],["title","Listing",1,"w-100-p",3,"tabbedItem","addOrg","modelKey","cmptParams","headers","no-card","has-action","store","dropDownActions","topActions","hasSearch","actions","rows"],[3,"tab","item"],[3,"item","tab"],[1,"w-100-p","pt-3"],[1,"px-5","pt-5","pb-3"],[1,"card"],[1,"card-header","pt-3","pb-1","bg-white"],[1,"pl-3","text-muted","font-weight-bold","pb-2","d-flex","align-items-center"],[1,"pt-2","pr-2"],[1,"card-body","px-0","pb-3","pt-0"],[1,"table","borderless","font-size-14"],[1,"thead-light"],[1,"pl-20"],[1,"badge","badge-secondary","px-3","py-2"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"px-5","pt-5","pb-0"],[1,"card-body","px-0","pb-0","pt-0"],[1,"table","borderless","font-size-13"],[1,"thead-light","font-size-12"],["id","print"],[1,"container-fluid"],[1,"row","no-gutters"],[1,"col"],["src","../../../../../assets/images/logos/logo.png","alt","logotipo",1,"logotipo"],[1,"address"],[1,"row","no-gutters","items-group"],[1,"col-3","label"],[1,"col-9"],[1,"d-flex"],[2,"margin-top","-1.05rem"]],template:function(t,e){1&t&&(T.Ub(0,"div",0),T.Ub(1,"div",1),T.Ub(2,"div",2),T.Jc(3,ea,4,0,"div",3),T.Ub(4,"div",4),T.Ub(5,"mat-icon",5),T.Lc(6),T.Tb(),T.Tb(),T.Ub(7,"div",6),T.Ub(8,"div",7),T.Lc(9),T.Tb(),T.Ub(10,"div",8),T.Lc(11),T.hc(12,"removeUnderscore"),T.Tb(),T.Tb(),T.Jc(13,sa,2,1,"div",9),T.Tb(),T.Tb(),T.Ub(14,"div",10),T.Ub(15,"div",10),T.Ub(16,"mat-card",11),T.Ub(17,"mat-card-content",12),T.Jc(18,ca,2,0,"ng-container",13),T.hc(19,"async"),T.Ub(20,"mat-tab-group",14,15),T.cc("selectedTabChange",(function(t){return e.tabSelectChange(t)})),T.Jc(22,Ba,7,5,"mat-tab",16),T.hc(23,"async"),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Jc(24,Fa,47,16,"ng-template",null,17,T.Kc),T.Jc(26,Ra,34,14,"ng-template",null,18,T.Kc),T.Jc(28,Ja,37,1,"div",19)),2&t&&(T.Bb(3),T.mc("ngIf",e.listRoute),T.Bb(3),T.Nc(" ",e.headerConfig.icon||"business"," "),T.Bb(3),T.Oc(" ",e.headerConfig.headerLabel," ",e.headerConfig.headerValue?e.item[e.headerConfig.headerValue]:null==e.item?null:e.item.name," "),T.Bb(2),T.Oc(" ",e.headerConfig.subTitleLabel," ",e.headerConfig.subTitleValue?e.getNested(e.headerConfig.subTitleValue):T.ic(12,10,null==e.item?null:e.item.org_type_code)," "),T.Bb(2),T.mc("ngIf",null==e.headerConfig?null:e.headerConfig.actions),T.Bb(5),T.mc("ngIf",null===T.ic(19,12,e.asyncTabs)),T.Bb(4),T.mc("ngForOf",T.ic(23,14,e.asyncTabs)),T.Bb(6),T.mc("ngIf",null==e.item?null:e.item.id))},directives:[c.t,r.a,l.a,l.b,xt,c.s,b.b,dt,st,Me.a,c.A,Je,ei,bi,Ai,Ei,Ni,ve.a,rn,jn,Xn,c.q,ta.a],pipes:[De.a,c.b,c.G,c.d,c.f,c.p,c.g],styles:["[_nghost-%COMP%]    {width:100%}[_nghost-%COMP%]     .back-arrow i:hover{cursor:pointer;text-shadow:1px 3px 1px rgba(0,0,0,.3)}[_nghost-%COMP%]     .main-cont{background-color:#146b3a!important;width:auto!important;transition:all .5s cubic-bezier(0,0,.2,1)!important;left:13rem;right:0;padding:3.05rem 4.5rem 7.5rem;margin-bottom:-4.75rem}[_nghost-%COMP%]     .main-cont .title{font-size:2rem;color:#fff}[_nghost-%COMP%]     .back-btn{color:#fff}[_nghost-%COMP%]     .back-btn:hover{cursor:pointer;text-shadow:1px 3px 1px rgba(0,0,0,.3)}[_nghost-%COMP%]     .badge.created, [_nghost-%COMP%]     .badge.draft, [_nghost-%COMP%]     .badge.on_going, [_nghost-%COMP%]     .badge.open, [_nghost-%COMP%]     .badge.pending{background-color:#ffc107;color:#212529}[_nghost-%COMP%]     .badge.assigned, [_nghost-%COMP%]     .badge.first_level_approved, [_nghost-%COMP%]     .badge.rationalized, [_nghost-%COMP%]     .badge.submitted{background-color:#2196f3;color:#fff}[_nghost-%COMP%]     .badge.cancelled, [_nghost-%COMP%]     .badge.rejected{background-color:#dc3545;color:#fff}[_nghost-%COMP%]     .badge.overdue{background-color:#343a40;color:#fff}[_nghost-%COMP%]     .badge.accepted, [_nghost-%COMP%]     .badge.approved, [_nghost-%COMP%]     .badge.completed, [_nghost-%COMP%]     .badge.final_approved, [_nghost-%COMP%]     .badge.finished, [_nghost-%COMP%]     .badge.sasdef_approved{background-color:#28a745;color:#fff}[_nghost-%COMP%]     #print{display:none}@media print{[_nghost-%COMP%]     #no-print{display:none!important}[_nghost-%COMP%]     #print{display:flex}[_nghost-%COMP%]     #print body, [_nghost-%COMP%]     #print h1, [_nghost-%COMP%]     #print h2, [_nghost-%COMP%]     #print h3, [_nghost-%COMP%]     #print h4, [_nghost-%COMP%]     #print html, [_nghost-%COMP%]     #print img, [_nghost-%COMP%]     #print p{margin:0}[_nghost-%COMP%]     #print h1{font-size:18pt;font-weight:500;margin-bottom:.5cm}[_nghost-%COMP%]     #print h2{font-size:16pt;font-weight:500}[_nghost-%COMP%]     #print p{font-size:12pt}[_nghost-%COMP%]     #print .items-group{border:1pt solid #000;border-radius:5pt;padding:3pt;margin:9pt 0}[_nghost-%COMP%]     #print .logotipo{margin-top:.25cm;margin-left:.35cm;width:2.95cm;height:3.15cm}[_nghost-%COMP%]     #print .label{font-weight:500}[_nghost-%COMP%]     #print .address p, [_nghost-%COMP%]     #print .disclaimer{font-size:10pt}[_nghost-%COMP%]     #print .signature-field{padding-bottom:24pt;border-bottom:1pt solid #000}}"]}),t})();function Ka(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div",0),T.Ub(1,"dynamic-form",5),T.cc("onBack",(function(){return T.zc(t),T.gc().stepBack()}))("onPrestine",(function(e){return T.zc(t),T.gc().noChanges(e)}))("submitModel",(function(e){return T.zc(t),T.gc().receiveModel(e)})),T.Tb(),T.Tb()}if(2&t){const t=T.gc();T.Bb(1),T.mc("model",t.item)("submitted",t.submitted)("cancelBtn",!0)("store",t.formStore)("stepConfig",t.configs)("multiStep",t.multistepConfig)("cancelTxt",null==t.configs?null:t.configs.cancelTxt)("btnTxt",null==t.configs?null:t.configs.nextTxt)}}let Ha=(()=>{class t{constructor(t,e,i,n){this._router=t,this._route=e,this._authConfig=i,this._dataLayer=n,this.tabbed=!1,this.onNavigate=new T.n,this.item={},this.organization={}}showToast(t){}stepperNext(t){this.onNavigate.emit(t)}stepBack(){this.onNavigate.emit("prev")}toggleModal(){this.showModal=!this.showModal}postCrud(t){this.onNavigate.emit({direction:"next",params:{id:t.id}}),this.showToast()}receiveModel(t){const e=h.isUndefined(this.modelId)?this.configs.addStore:this.configs.editStore,i=Object(h.isUndefined)(this.organization)?{}:{key:"current_org_id",value:this.organization};h.isUndefined(this.modelId)?(t=Object.assign(Object.assign({},t),{organization:this.organization}),this._dataLayer.create(e,t,void 0,i).subscribe(t=>{this.postCrud(t)},t=>console.log(t))):this._dataLayer.update(e,this.modelId,t,i).subscribe(t=>{this.postCrud(t)},t=>console.log(t))}noChanges(t){this.stepperNext("next")}getItem(t){if(this.item={},h.has(t,"id")){this.modelId=t.id;const e={current_org_id:this.organization},i=h.isUndefined(this.configs)?this.inlineConfs.getStore:this.configs.getStore;this._dataLayer.get(i,this.modelId,e).subscribe(t=>{this.readItem=t,this.item=t},t=>console.log(t))}}getConfs(){this._route.queryParams.subscribe(t=>{if(this.tabbed);else{this.multistepConfig={back:{}};const e=parseInt(t.current,10),i=h.findIndex(this.steps,{count:e});h.has(this.steps[i],"formConf")&&(this.configs=this.steps[i].formConf,this.formStore=this.configs.store),h.has(this.steps[i],"inlineConf")&&(this.inlineConfs=this.steps[i].inlineConf),this.getItem(t)}})}ngOnInit(){const t=JSON.parse(this._authConfig.getOrganization());this.organization=h.isUndefined(t)||h.isNull(t)?null:t.organization,this.getConfs()}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(n.g),T.Ob(n.a),T.Ob(Ee.a),T.Ob(xe.a))},t.\u0275cmp=T.Ib({type:t,selectors:[["form-wrapper"]],inputs:{steps:"steps",current:"current",tabbed:"tabbed"},outputs:{onNavigate:"onNavigate"},features:[T.Ab([xe.a])],decls:6,vars:1,consts:[[1,"w-100-p"],[1,"title-cont","py-12","px-32","border-bottom"],[1,"font-size-18","text-muted"],[1,"w-100-p","px-32","pb-12","pt-20"],["class","w-100-p",4,"ngIf"],["btnClass","tiny mr-3","btnStatus","primary",3,"model","submitted","cancelBtn","store","stepConfig","multiStep","cancelTxt","btnTxt","onBack","onPrestine","submitModel"]],template:function(t,e){1&t&&(T.Ub(0,"div",0),T.Ub(1,"div",1),T.Ub(2,"div",2),T.Lc(3," Manage Details "),T.Tb(),T.Tb(),T.Ub(4,"div",3),T.Jc(5,Ka,2,8,"div",4),T.Tb(),T.Tb()),2&t&&(T.Bb(5),T.mc("ngIf",e.configs&&e.formStore))},directives:[c.t,Ve.a],styles:[""]}),t})();function $a(t,e){1&t&&(T.Ub(0,"div",7),T.Ub(1,"div",8),T.Pb(2,"mat-spinner",9),T.Tb(),T.Tb())}function Ga(t,e){if(1&t&&(T.Ub(0,"div",7),T.Pb(1,"dynamic-table",10),T.Tb()),2&t){const t=T.gc();T.Bb(1),T.mc("tabbedItem",t.item)("modelKey",null==t.configs?null:t.configs.modelKey)("cmptParams",null==t.configs?null:t.configs.cmptParams)("addOrg",!0)("headers",null==t.configs?null:t.configs.headers)("no-card",!0)("has-action",!0)("store",null==t.configs?null:t.configs.getStore)("topActions",null==t.configs?null:t.configs.topActions)("hasSearch",!0)("actions",null==t.configs?null:t.configs.actions)("rows",t.configs.rows)}}function qa(t,e){if(1&t){const t=T.Vb();T.Ub(0,"button",11),T.cc("click",(function(){return T.zc(t),T.gc().changeStep("next")})),T.Lc(1," NEXT\xa0 "),T.Ub(2,"mat-icon",4),T.Lc(3,"keyboard_arrow_right"),T.Tb(),T.Ub(4,"mat-icon",4),T.Lc(5,"keyboard_arrow_right"),T.Tb(),T.Tb()}}function Wa(t,e){if(1&t){const t=T.Vb();T.Ub(0,"button",12),T.cc("click",(function(){return T.zc(t),T.gc().changeStep("next")})),T.Lc(1," COMPLETE "),T.Tb()}}let Ya=(()=>{class t{constructor(t,e,i){this._route=t,this._authConfig=e,this._dataLayer=i,this.onNavigate=new T.n,this.headers=[],this.rows=[],this.actions=[]}toggleModal(){this.showModal=!this.showModal}changeStep(t){this.onNavigate.emit(t)}setCmptParams(){if(Object(h.has)(this.configs,"modelKey")){const t=Object(h.get)(this.configs,"listParams",{});this.configs.cmptParams=Object.assign(Object.assign({},t),{[this.configs.modelKey]:this.item.id})}}getItem(t){const e=Object(h.get)(JSON.parse(this._authConfig.getOrganization()),"organization");this._dataLayer.get(this.configs.store,t.id,{current_org_id:e}).subscribe(t=>{this.item=t,this.setCmptParams(),this.loading=!1},t=>{console.log(t),this.loading=!1})}getItemId(){this._route.queryParams.subscribe(t=>{const e=parseInt(t.current,10),i=Object(h.findIndex)(this.steps,{count:e});this.isLast=this.steps.length===i+1,this.configs=this.steps[i].gridConf,this.loading=!0,this.getItem(t)})}ngOnInit(){this.multistepConfig={back:{name:"CANCEL"}},this.getItemId()}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(n.a),T.Ob(Ee.a),T.Ob(xe.a))},t.\u0275cmp=T.Ib({type:t,selectors:[["list-wrapper"]],inputs:{steps:"steps",current:"current"},outputs:{onNavigate:"onNavigate"},decls:12,vars:4,consts:[["class","w-100-p",4,"ngIf"],[1,"btn-cont","px-20","pb-12","pt-3","border-top"],[1,"btn-cont","mb-3","pt-12","w-100-p","d-flex","justify-content-between"],["mat-raised-button","",1,"float-left",3,"click"],[1,"btn-icon"],["mat-raised-button","","class","mt-10 float-right mr-0","color","accent",3,"click",4,"ngIf"],["mat-raised-button","","color","success","class","mt-10 float-right mr-0",3,"click",4,"ngIf"],[1,"w-100-p"],[1,"w-100-p","d-flex","justify-content-center","py-28"],["diameter","45"],["title","Listing",1,"w-100-p",3,"tabbedItem","modelKey","cmptParams","addOrg","headers","no-card","has-action","store","topActions","hasSearch","actions","rows"],["mat-raised-button","","color","accent",1,"mt-10","float-right","mr-0",3,"click"],["mat-raised-button","","color","success",1,"mt-10","float-right","mr-0",3,"click"]],template:function(t,e){1&t&&(T.Jc(0,$a,3,0,"div",0),T.Jc(1,Ga,2,12,"div",0),T.Ub(2,"div",1),T.Ub(3,"div",2),T.Ub(4,"button",3),T.cc("click",(function(){return e.changeStep("prev")})),T.Ub(5,"mat-icon",4),T.Lc(6,"keyboard_arrow_left"),T.Tb(),T.Ub(7,"mat-icon",4),T.Lc(8,"keyboard_arrow_left"),T.Tb(),T.Lc(9," \xa0\xa0BACK "),T.Tb(),T.Jc(10,qa,6,0,"button",5),T.Jc(11,Wa,2,0,"button",6),T.Tb(),T.Tb()),2&t&&(T.mc("ngIf",e.loading),T.Bb(1),T.mc("ngIf",null==e.item?null:e.item.id),T.Bb(9),T.mc("ngIf",!e.isLast),T.Bb(1),T.mc("ngIf",e.isLast))},directives:[c.t,b.b,r.a,g.b,ve.a],styles:["[_nghost-%COMP%]     .btn-icon{min-width:1rem;width:1rem}[_nghost-%COMP%]     .btn-icon:first-of-type{margin-left:-.5rem}[_nghost-%COMP%]     .mat-success{background-color:teal!important;color:#fff!important}"]}),t})();function Za(t,e){1&t&&(T.Ub(0,"div"),T.Lc(1," Description is required "),T.Tb())}function Qa(t,e){if(1&t&&(T.Ub(0,"div",18),T.Jc(1,Za,2,0,"div",14),T.Tb()),2&t){const t=T.gc();T.Bb(1),T.mc("ngIf",t.f.description.errors.required)}}function Xa(t,e){1&t&&(T.Ub(0,"div"),T.Lc(1,"This field is required"),T.Tb())}function to(t,e){1&t&&(T.Ub(0,"div"),T.Lc(1,"Attach a PDF File"),T.Tb())}let eo=(()=>{class t{constructor(t,e,i,n,a){this.http=t,this._formBuilder=e,this._dialogRef=i,this._dataLayer=n,this.data=a,this.progress=0,this.sUrl=Hi.a.serverURL}formInit(){this.uploadForm=this._formBuilder.group({description:[""],attachment:["",[s.D.required,Ki("pdf")]]})}get f(){return this.uploadForm.controls}submitForm(t){if(console.log(t,this.uploadForm),!t.valid)return void function(t){for(const e of Object.keys(t.controls))t.controls[e].markAsDirty()}(this.uploadForm);this.loading=!0;const{attachment:e,description:i}=this.uploadForm.value;let n={attachment:"",description:i,document_type:this.data.document_type,organization:this.data.organization};var a;this.http.post(this.sUrl+"/common/attachments/",function(t){const e=new FormData;for(const i of Object.keys(t))e.append(i,t[i]);return e}({file:e,attachment_type:"APPLICATION_DOCUMENT"}),{reportProgress:!0,observe:"events"}).pipe((a=t=>this.progress=t,Object(Ji.a)(t=>{t.type===ji.d.UploadProgress&&a(Math.round(100*t.loaded/t.total))})),Object(Ri.a)(Object(Jt.a)(t=>t.type===ji.d.Response),Object(Vi.a)(t=>t.body))).subscribe(t=>{this.progress=0,n=Object.assign(Object.assign({},n),{attachment:t.id}),this._dataLayer.create("organization-attachments",n).subscribe(t=>{console.log(t),this.uploadForm.reset(),this.loading=!1,this.closeDialog("regresh"),this._dataLayer.openDynamicSnackBar("File sucessfully uploaded","success")},t=>{console.log(t),this.loading=!1})},t=>{console.log(t),this.loading=!1})}closeDialog(t){this._dialogRef.close(t)}hasError(t,e){const i=this.uploadForm.get(t);return i.dirty&&i.hasError(e)}ngOnInit(){console.log(this.data),this.formInit()}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(ji.b),T.Ob(s.g),T.Ob(kt.g),T.Ob(xe.a),T.Ob(kt.a))},t.\u0275cmp=T.Ib({type:t,selectors:[["attachment-dialog"]],features:[T.Ab([xe.a])],decls:28,vars:8,consts:[[1,""],[1,"d-flex","algin-items-center","mb-n3"],[1,"flex-fill"],["mat-dialog-title","",1,"pb-2","font"],["mat-dialog-content","",1,"text-muted","fullwidth"],["name","frm",1,"w-100-p",3,"formGroup","ngSubmit"],[1,"w-100-p","pt-1"],[1,"input-wrapper","fullwidth"],["appearance","outline","color","primary",1,"pb-0","mb-0","w-100-p"],["name","description","id","","matInput","","cols","30","rows","2","formControlName","description","placeholder","Kindly enter a file descripition..."],["class","invalid-feedback",4,"ngIf"],[1,"w-100-p"],["formControlName","attachment",3,"progress"],[1,"invalid-feedback","d-flex"],[4,"ngIf"],[1,"btn-container","d-flex","justify-content-end","w-100-p"],["mat-button","","mat-dialog-close","","type","button",3,"click"],["mat-button","","type","submit",3,"disabled"],[1,"invalid-feedback"]],template:function(t,e){1&t&&(T.Ub(0,"div",0),T.Ub(1,"div",1),T.Ub(2,"div",2),T.Ub(3,"h4",3),T.Lc(4," Upload Attachment "),T.Tb(),T.Tb(),T.Tb(),T.Ub(5,"div",4),T.Ub(6,"div"),T.Ub(7,"p"),T.Lc(8," Kindly complete the following form below "),T.Tb(),T.Ub(9,"div"),T.Ub(10,"form",5),T.cc("ngSubmit",(function(){return e.submitForm(e.uploadForm)})),T.Ub(11,"div",6),T.Ub(12,"div",7),T.Ub(13,"mat-form-field",8),T.Ub(14,"mat-label"),T.Lc(15,"File Description"),T.Tb(),T.Pb(16,"textarea",9),T.Tb(),T.Tb(),T.Jc(17,Qa,2,1,"div",10),T.Tb(),T.Ub(18,"div",11),T.Pb(19,"app-file-upload",12),T.Ub(20,"div",13),T.Jc(21,Xa,2,0,"div",14),T.Jc(22,to,2,0,"div",14),T.Tb(),T.Tb(),T.Ub(23,"div",15),T.Ub(24,"button",16),T.cc("click",(function(){return e.closeDialog()})),T.Lc(25,"CLOSE"),T.Tb(),T.Ub(26,"button",17),T.Lc(27,"SUBMIT"),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb()),2&t&&(T.Bb(10),T.mc("formGroup",e.uploadForm),T.Bb(7),T.mc("ngIf",e.f.description.invalid&&(e.f.description.touched||e.f.description.dirty)),T.Bb(2),T.mc("progress",e.progress),T.Bb(2),T.mc("ngIf",e.hasError("attachment","required")),T.Bb(1),T.mc("ngIf",e.hasError("attachment","requiredFileType")),T.Bb(4),T.Gb("spiner",e.loading),T.mc("disabled",e.loading))},directives:[s.F,s.s,s.l,Bt.c,Bt.g,p.b,s.e,s.r,s.j,c.t,qi,b.b],styles:['[_nghost-%COMP%]     .spinner:before{content:"";box-sizing:border-box;position:absolute;top:50%;left:50%;width:20px;height:20px;margin-top:-10px;margin-left:-10px;border-radius:50%;border:2px solid #fff;border-top-color:#000;-webkit-animation:spinner .8s linear infinite;animation:spinner .8s linear infinite}']}),t})();function io(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div",16),T.Ub(1,"input",17),T.cc("change",(function(e){return T.zc(t),T.gc().budgetAttachmentUpload(e)})),T.Tb(),T.Ub(2,"label",18),T.Ub(3,"mat-icon",19),T.Lc(4,"cloud_upload"),T.Tb(),T.Lc(5,"\xa0 \xa0UPLOAD FILE "),T.Tb(),T.Tb()}if(2&t){const t=T.gc();T.Bb(1),T.mc("hidden",!0),T.Bb(1),T.Gb("spinner",t.uploadLoader)}}function no(t,e){1&t&&(T.Ub(0,"thead",20),T.Ub(1,"th",21),T.Lc(2," File "),T.Tb(),T.Ub(3,"th"),T.Lc(4," Required "),T.Tb(),T.Ub(5,"th"),T.Lc(6," Description "),T.Tb(),T.Ub(7,"th",22),T.Lc(8," Action "),T.Tb(),T.Tb())}function ao(t,e){if(1&t&&(T.Ub(0,"span"),T.Lc(1),T.Tb()),2&t){const t=T.gc().$implicit;T.Eb("badge py-2 px-3 font-size-12 ",null!=t&&t.required?"badge-danger":"badge-info",""),T.Bb(1),T.Nc(" ",null!=t&&t.required?"Required":"Not Required"," ")}}function oo(t,e){1&t&&(T.Ub(0,"span",31),T.Lc(1," Uploaded "),T.Tb())}function so(t,e){if(1&t){const t=T.Vb();T.Ub(0,"button",32),T.cc("click",(function(){T.zc(t);const e=T.gc().$implicit;return T.gc(2).selectDocType(e)})),T.Ub(1,"mat-icon",19),T.Lc(2,"cloud_upload"),T.Tb(),T.Lc(3,"\xa0 Upload "),T.Tb()}}function co(t,e){if(1&t&&(T.Ub(0,"a",33),T.Ub(1,"mat-icon"),T.Lc(2,"cloud_download"),T.Tb(),T.Lc(3,"\xa0 Download "),T.Tb()),2&t){const t=T.gc().$implicit;T.Cb("href",null==t?null:t.attachment_data.file,T.Bc)}}function ro(t,e){if(1&t&&(T.Ub(0,"tr"),T.Ub(1,"td",24),T.Lc(2),T.Tb(),T.Ub(3,"td",25),T.Jc(4,ao,2,4,"span",26),T.Jc(5,oo,2,0,"span",27),T.Tb(),T.Ub(6,"td",25),T.Lc(7),T.Tb(),T.Ub(8,"td",28),T.Jc(9,so,4,0,"button",29),T.Jc(10,co,4,1,"a",30),T.Tb(),T.Tb()),2&t){const t=e.$implicit;T.Bb(2),T.Nc(" ",null==t?null:t.name," "),T.Bb(2),T.mc("ngIf",!(null!=t&&t.attachment_data)),T.Bb(1),T.mc("ngIf",null==t?null:t.attachment_data),T.Bb(2),T.Nc(" ",null==t?null:t.description," "),T.Bb(2),T.mc("ngIf",!(null!=t&&t.attachment_data)),T.Bb(1),T.mc("ngIf",null==t?null:t.attachment_data)}}function lo(t,e){if(1&t){const t=T.Vb();T.Ub(0,"tr"),T.Ub(1,"td",34),T.Ub(2,"div",35),T.Ub(3,"div",36),T.Ub(4,"div",37),T.Ub(5,"div",38),T.Ub(6,"mat-icon"),T.Lc(7," info_circle "),T.Tb(),T.Tb(),T.Ub(8,"div",39),T.Lc(9," There is currently no documents setup for this organization. Kindly contact the administrator "),T.Tb(),T.Ub(10,"div",40),T.Ub(11,"button",41),T.cc("click",(function(){return T.zc(t),T.gc(2).toggleCreateForm()})),T.Ub(12,"mat-icon"),T.Lc(13,"add"),T.Tb(),T.Lc(14,"\xa0 ADD ACCOUNT "),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb()}}function bo(t,e){if(1&t&&(T.Ub(0,"tbody"),T.Jc(1,ro,11,6,"tr",23),T.Jc(2,lo,15,0,"tr",9),T.Tb()),2&t){const t=T.gc();T.Bb(1),T.mc("ngForOf",t.list),T.Bb(1),T.mc("ngIf",!(null!=t.list&&t.list.length||t.loading))}}function po(t,e){1&t&&(T.Ub(0,"thead",20),T.Ub(1,"th",21),T.Lc(2," Name "),T.Tb(),T.Ub(3,"th"),T.Lc(4," Uploaded At "),T.Tb(),T.Ub(5,"th",22),T.Lc(6," Action "),T.Tb(),T.Tb())}function go(t,e){if(1&t&&(T.Ub(0,"td",45),T.Lc(1),T.Tb()),2&t){const t=T.gc().$implicit;T.Bb(1),T.Nc(" ",(null==t?null:t.file.name)||"Unknown"," ")}}function mo(t,e){1&t&&(T.Ub(0,"mat-icon"),T.Lc(1," remove "),T.Tb())}function uo(t,e){if(1&t&&(T.Ub(0,"td",45),T.Lc(1),T.hc(2,"date"),T.Jc(3,mo,2,0,"mat-icon",9),T.Tb()),2&t){const t=T.gc().$implicit;T.Bb(1),T.Nc(" ",T.jc(2,2,null==t?null:t.file.created,"medium")," "),T.Bb(2),T.mc("ngIf",!(null!=t&&t.file.created))}}function ho(t,e){if(1&t&&(T.Ub(0,"tr"),T.Jc(1,go,2,1,"td",42),T.Jc(2,uo,4,5,"td",42),T.Ub(3,"td",43),T.Ub(4,"a",44),T.Ub(5,"mat-icon"),T.Lc(6,"cloud_download"),T.Tb(),T.Lc(7," \xa0Download "),T.Tb(),T.Tb(),T.Tb()),2&t){const t=e.$implicit;T.Bb(1),T.mc("ngIf",null==t?null:t.file),T.Bb(1),T.mc("ngIf",null==t?null:t.file),T.Bb(2),T.Cb("href",null==t?null:t.file.file,T.Bc)}}function fo(t,e){if(1&t&&(T.Ub(0,"tr"),T.Ub(1,"td",46),T.Ub(2,"div",35),T.Ub(3,"div",36),T.Ub(4,"div",47),T.Ub(5,"div",38),T.Ub(6,"mat-icon"),T.Lc(7," info_circle "),T.Tb(),T.Tb(),T.Ub(8,"div"),T.Lc(9),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb()),2&t){const t=T.gc(2);T.Bb(9),T.Nc(" There are currently no attachments for this ",t.context," ")}}function To(t,e){if(1&t&&(T.Ub(0,"tbody"),T.Jc(1,ho,8,3,"tr",23),T.Jc(2,fo,10,1,"tr",9),T.Tb()),2&t){const t=T.gc();T.Bb(1),T.mc("ngForOf",t.list),T.Bb(1),T.mc("ngIf",!(null!=t.attachmentsList&&t.attachmentsList.length))}}function vo(t,e){if(1&t){const t=T.Vb();T.Ub(0,"button",48),T.cc("click",(function(){return T.zc(t),T.gc().changeStep("next")})),T.Lc(1," NEXT\xa0 "),T.Ub(2,"mat-icon",13),T.Lc(3,"keyboard_arrow_right"),T.Tb(),T.Ub(4,"mat-icon",13),T.Lc(5,"keyboard_arrow_right"),T.Tb(),T.Tb()}}function yo(t,e){if(1&t){const t=T.Vb();T.Ub(0,"button",49),T.cc("click",(function(){return T.zc(t),T.gc().changeStep("next")})),T.Lc(1," COMPLETE "),T.Tb()}}let _o=(()=>{class t{constructor(t,e,i,n){this._route=t,this._authConfig=e,this._dialog=i,this._dataLayer=n,this.onNavigate=new T.n,this.list=[],this.attachmentsList=[],this.loading=!0,this.isLast=!1}changeStep(t){this.onNavigate.emit(t)}budgetAttachmentUpload(t){const e={file:t.target.files[0],attachment_type:"ORGANIZATION_BUDGET",budget:this.itemId};let i={attachment:"",organization:this.organization.organization,org_budget:this.itemId};const n=new FormData;n.append("file",e.file),n.append("attachment_type",e.attachment_type),this.uploadLoader=!0,this._dataLayer.uploadFile("attachments",n).subscribe(t=>{i=Object.assign(Object.assign({},i),{attachment:t.id}),this._dataLayer.create(this.configs.attachmentStore,i,void 0,{key:"current_org_id",value:this.organization.organization}).subscribe(t=>{this._dataLayer.openDynamicSnackBar("File succesfully uploaded","success"),this.getBudgetAttachments(),this.uploadLoader=!1},t=>{console.log(t),this._dataLayer.openDynamicSnackBar("An error occurred while uploading file. Kindly try again","error"),this.uploadLoader=!1})},t=>{this.uploadLoader=!1,console.log(t)})}fileChange(t,e){const i={file:t.target.files[0],attachment_type:"APPLICATION_DOCUMENT",document_type:e.id,organization:this.organization.organization},n=new FormData;n.append("file",i.file),n.append("attachment_type",i.attachment_type);let a={attachment:"",organization:this.organization.organization,document_type:i.document_type};this._dataLayer.uploadFile("attachments",n).subscribe(t=>{const e={key:"current_org_id",value:this.organization.organization};a=Object.assign(Object.assign({},a),{attachment:t.id}),this._dataLayer.create("organization-attachments",a,void 0,e).subscribe(t=>{console.log(t),this.getApplicationAttachments()},t=>console.log(t))},t=>console.log(t))}selectDocType(t){this._dialog.open(eo,{data:{organization:this.organization,document_type:t}}).afterClosed().subscribe(t=>{console.log(t),"refresh"===t&&this.getDocumentTypes()})}getApplicationAttachments(){this._dataLayer.list("organization-attachments",{organization:this.organization.organization,current_org_id:this.organization.organization}).subscribe(t=>{const e=t.results;Object(h.each)(e,t=>{const e=Object(h.indexOf)(this.list,Object(h.find)(this.list,{id:t.document_type}));e>=0&&this._dataLayer.get("attachments",t.attachment).subscribe(t=>{this.list[e].attachment_data=t},t=>console.log(t))})},t=>console.log(t))}getBudgetAttachments(){this.organization=JSON.parse(localStorage.getItem("organization"))||{};const t={current_org_id:this.organization.organization,org_budget:this.itemId};this.loading=!0,this._dataLayer.list(this.configs.attachmentStore,Object.assign({},t)).subscribe(t=>{t.results.map(t=>{this._dataLayer.get("attachments",t.attachment,{current_org_id:this.organization.organization}).subscribe(e=>{t.file=e,this.attachmentsList.push(t),this.list.push(t)})}),this.loading=!1},t=>{console.log(t),this.loading=!1,this._dataLayer.openDynamicSnackBar("An error message occurred while retrieving list","error")})}getDocumentTypes(){this._dataLayer.list("document-types",Object.assign({},{org_type__org_type_code:this.organization.org_type,current_org_id:this.organization.organization})).subscribe(t=>{this.loading=!1,this.list=t.results,this.getApplicationAttachments()},t=>console.log(t))}getItem(t){this.organization=JSON.parse(localStorage.getItem("organization"))||{},this.getDocumentTypes()}getItemId(){this._route.queryParams.subscribe(t=>{const e=parseInt(t.current,10);this.itemId=t.id;const i=Object(h.findIndex)(this.steps,{count:e});this.isLast=this.steps.length===i+1,this.configs=this.steps[i].gridConf,Object(h.has)(this.configs,"attachmentStore")?this.getBudgetAttachments():this.getItem(t)})}ngOnInit(){this.getItemId()}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(n.a),T.Ob(Ee.a),T.Ob(kt.b),T.Ob(xe.a))},t.\u0275cmp=T.Ib({type:t,selectors:[["attachment-wrapper"]],inputs:{steps:"steps",current:"current"},outputs:{onNavigate:"onNavigate"},decls:28,vars:7,consts:[[1,"w-100-p"],[1,"card"],[1,"card-header","bg-white"],[1,"title","flex-fill","font-weight-600","font-size-16","pt-2","pl-3","d-flex","align-items-center"],[1,"flex-fill","pl-3","mt-n2"],["class","actions",4,"ngIf"],[1,"card-body","p-0"],[1,"table","borderless"],["class","thead-light",4,"ngIf"],[4,"ngIf"],[1,"btn-cont","px-20","pb-12","pt-3","border-top"],[1,"btn-cont","mb-3","pt-12","w-100-p","d-flex","justify-content-between"],["mat-raised-button","",1,"float-left",3,"click"],[1,"btn-icon"],["mat-raised-button","","class","mt-10 float-right mr-0","color","accent",3,"click",4,"ngIf"],["mat-raised-button","","color","success","class","mt-10 float-right mr-0",3,"click",4,"ngIf"],[1,"actions"],["type","file","id","input-file-id",1,"ng-hide",3,"hidden","change"],["for","input-file-id",1,"mat-button","mat-stroked-button","md-primary","d-flex","pl-3"],[1,"mt-2"],[1,"thead-light"],[1,"pl-24"],[2,"width","1px"],[4,"ngFor","ngForOf"],["valign","middle",1,"pl-24","valign-middle"],["valign","middle",1,"valign-middle"],[3,"class",4,"ngIf"],["class","badge badge-success \n                                py-2 px-3 font-size-12",4,"ngIf"],[1,"pr-24"],["mat-stroked-button","",3,"click",4,"ngIf"],["mat-stroked-button","","download","","target","_blank",4,"ngIf"],[1,"badge","badge-success","py-2","px-3","font-size-12"],["mat-stroked-button","",3,"click"],["mat-stroked-button","","download","","target","_blank"],["colspan","3",1,"pb-0","mb-0","pl-24"],[1,"w-100-p","px-3"],[1,"alert","alert-primary","mb-0","pb-2","pt-3"],[1,"d-flex","align-items-center"],[1,"pr-20"],[1,"flex-fill"],[1,"pr-8"],["mat-raised-button","","color","default",1,"pl-3","mt-n2",3,"click"],["class","pl-20",4,"ngIf"],[1,"pr-20",2,"width","1px"],["mat-raised-button","","download","","target","_blank"],[1,"pl-20"],["colspan","3",1,"pb-0","mb-0"],[1,"d-flex"],["mat-raised-button","","color","accent",1,"mt-10","float-right","mr-0",3,"click"],["mat-raised-button","","color","success",1,"mt-10","float-right","mr-0",3,"click"]],template:function(t,e){1&t&&(T.Ub(0,"div",0),T.Ub(1,"div",1),T.Ub(2,"div",2),T.Ub(3,"div",3),T.Ub(4,"div"),T.Ub(5,"mat-icon"),T.Lc(6,"attachment"),T.Tb(),T.Lc(7,"\xa0 "),T.Tb(),T.Ub(8,"div",4),T.Lc(9,"Attachments"),T.Tb(),T.Jc(10,io,6,3,"div",5),T.Tb(),T.Tb(),T.Ub(11,"div",6),T.Ub(12,"div"),T.Ub(13,"table",7),T.Jc(14,no,9,0,"thead",8),T.Jc(15,bo,3,2,"tbody",9),T.Jc(16,po,7,0,"thead",8),T.Jc(17,To,3,2,"tbody",9),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Ub(18,"div",10),T.Ub(19,"div",11),T.Ub(20,"button",12),T.cc("click",(function(){return e.changeStep("prev")})),T.Ub(21,"mat-icon",13),T.Lc(22,"keyboard_arrow_left"),T.Tb(),T.Ub(23,"mat-icon",13),T.Lc(24,"keyboard_arrow_left"),T.Tb(),T.Lc(25," \xa0BACK "),T.Tb(),T.Jc(26,vo,6,0,"button",14),T.Jc(27,yo,2,0,"button",15),T.Tb(),T.Tb()),2&t&&(T.Bb(10),T.mc("ngIf",null==e.configs?null:e.configs.headerAction),T.Bb(4),T.mc("ngIf",!(null!=e.configs&&e.configs.attachmentStore)),T.Bb(1),T.mc("ngIf",!(null!=e.configs&&e.configs.attachmentStore)),T.Bb(1),T.mc("ngIf",null==e.configs?null:e.configs.attachmentStore),T.Bb(1),T.mc("ngIf",null==e.configs?null:e.configs.attachmentStore),T.Bb(9),T.mc("ngIf",!e.isLast),T.Bb(1),T.mc("ngIf",e.isLast))},directives:[r.a,c.t,b.b,c.s,b.a],pipes:[c.f],styles:["[_nghost-%COMP%]     .btn-icon{min-width:1rem;width:1rem}[_nghost-%COMP%]     .btn-icon:first-of-type{margin-left:-.5rem}[_nghost-%COMP%]     .mat-success{background-color:teal!important;color:#fff!important}",'@-webkit-keyframes spinner{to{transform:rotate(1turn)}}@keyframes spinner{to{transform:rotate(1turn)}}[_nghost-%COMP%]     .spinner:before{content:"";box-sizing:border-box;position:absolute;top:50%;left:50%;width:20px;height:20px;margin-top:-10px;margin-left:-10px;border-radius:50%;border:2px solid #fff;border-top-color:#000;-webkit-animation:spinner .8s linear infinite;animation:spinner .8s linear infinite}']}),t})();function xo(t,e){if(1&t&&(T.Ub(0,"th",16),T.Lc(1),T.Tb()),2&t){const t=e.$implicit;T.Bb(1),T.Nc(" ",t.name," ")}}function Uo(t,e){1&t&&(T.Ub(0,"mat-icon"),T.Lc(1," remove "),T.Tb())}function Oo(t,e){if(1&t&&(T.Ub(0,"td",18),T.Lc(1),T.Jc(2,Uo,2,0,"mat-icon",9),T.Tb()),2&t){const t=e.$implicit,i=T.gc(),n=i.index,a=i.$implicit,o=T.gc();T.Gb("pl-24",0===n),T.mc("hidden",o.showForm),T.Bb(1),T.Nc(" ",a[t.key]," "),T.Bb(1),T.mc("ngIf",!a[t.key])}}function wo(t,e){if(1&t){const t=T.Vb();T.Ub(0,"td",21),T.Ub(1,"div",22),T.Ub(2,"mat-card",23),T.Ub(3,"div",24),T.Ub(4,"div",25),T.Ub(5,"div",26),T.Lc(6," EDIT BANK DETAILS "),T.Tb(),T.Ub(7,"div"),T.Ub(8,"span",27),T.cc("click",(function(){T.zc(t);const e=T.gc().$implicit;return T.gc().toggleForm(e)})),T.Lc(9," \xd7 "),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Ub(10,"div",28),T.Ub(11,"dynamic-form",29),T.cc("cancelFxn",(function(){T.zc(t);const e=T.gc().$implicit;return T.gc().toggleForm(e)}))("submitModel",(function(e){return T.zc(t),T.gc(2).receiveModel(e)})),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb()}if(2&t){const t=T.gc().$implicit,e=T.gc();T.Cb("colspan",e.gridConf.length+1),T.Bb(11),T.mc("model",t)("submitted",e.submitted)("baseCancel",!0)}}function Co(t,e){if(1&t){const t=T.Vb();T.Ub(0,"tr"),T.Jc(1,Oo,3,5,"td",17),T.Ub(2,"td",18),T.Ub(3,"button",19),T.cc("click",(function(){T.zc(t);const i=e.$implicit;return T.gc().toggleForm(i)})),T.Lc(4,"Edit"),T.Tb(),T.Tb(),T.Jc(5,wo,12,4,"td",20),T.Tb()}if(2&t){const t=T.gc();T.Bb(1),T.mc("ngForOf",t.gridConf),T.Bb(1),T.mc("hidden",t.showForm),T.Bb(3),T.mc("ngIf",t.showForm)}}function Ao(t,e){if(1&t){const t=T.Vb();T.Ub(0,"tr"),T.Ub(1,"td",21),T.Ub(2,"div",22),T.Ub(3,"mat-card",23),T.Ub(4,"div",30),T.Ub(5,"div",25),T.Ub(6,"div",26),T.Lc(7," ADD BANK DETAILS "),T.Tb(),T.Pb(8,"div"),T.Tb(),T.Tb(),T.Ub(9,"div",28),T.Ub(10,"dynamic-form",31),T.cc("submitModel",(function(e){return T.zc(t),T.gc().receiveModel(e)})),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb()}if(2&t){const t=T.gc();T.Bb(1),T.Cb("colspan",t.gridConf.length+1),T.Bb(9),T.mc("submitted",t.submitted)}}function Io(t,e){if(1&t){const t=T.Vb();T.Ub(0,"button",32),T.cc("click",(function(){return T.zc(t),T.gc().changeStep("next")})),T.Lc(1," NEXT\xa0 "),T.Ub(2,"mat-icon",13),T.Lc(3,"keyboard_arrow_right"),T.Tb(),T.Ub(4,"mat-icon",13),T.Lc(5,"keyboard_arrow_right"),T.Tb(),T.Tb()}}function Lo(t,e){if(1&t){const t=T.Vb();T.Ub(0,"button",33),T.cc("click",(function(){return T.zc(t),T.gc().changeStep("next")})),T.Lc(1," COMPLETE "),T.Tb()}}let So=(()=>{class t{constructor(t,e,i){this._route=t,this._authConfig=e,this._dataLayer=i,this.onNavigate=new T.n,this.loading=!0,this.gridConf=[{name:"Account Name",key:"account_name"},{name:"Account #",key:"account_number"},{name:"Bank Name",key:"bank_name"},{name:"Branch Name",key:"branch_name"}]}toggleForm(){this.showForm=!this.showForm}changeStep(t){this.onNavigate.emit(t)}addListItem(t){t=Object.assign(Object.assign({},t),{organization:this.orgId}),this._dataLayer.create("organization-bank-accounts",t).subscribe(()=>{this.getRelatedList(),this.loading=!1},t=>{this.loading=!1,console.log(t)})}updateListItem(t){this._dataLayer.update("organization-bank-account",t.id,t,{current_org_id:this.orgId}).subscribe(()=>{this.getRelatedList(),this.loading=!1},t=>{this.loading=!1,console.log(t)})}receiveModel(t){Object(h.has)(t,"id")?this.updateListItem(t):this.addListItem(t)}getRelatedList(t){this._dataLayer.list("organization-bank-accounts",{organization:this.orgId,current_org_id:this.orgId}).subscribe(t=>{this.list=t.results,this.loading=!1,this.showForm=this.list.length>0},t=>{this.loading=!1,console.log(t)})}getItemId(){this._route.queryParams.subscribe(t=>{const e=parseInt(t.current,10);this.orgId=parseInt(t.id,10);const i=Object(h.findIndex)(this.steps,{count:e});this.isLast=this.steps.length===i+1,this.configs=this.steps[i].gridConf,this.getRelatedList()})}ngOnInit(){this.getItemId()}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(n.a),T.Ob(Ee.a),T.Ob(xe.a))},t.\u0275cmp=T.Ib({type:t,selectors:[["inline-list-wrapper"]],inputs:{steps:"steps",current:"current"},outputs:{onNavigate:"onNavigate"},decls:28,vars:5,consts:[[1,"card"],[1,"card-header","pt-3","bg-white"],[1,"pl-3","text-muted","font-weight-bold","pb-2","d-flex","align-items-center"],[1,"pt-2","pr-2"],[1,"card-body","px-0","pb-3","pt-0"],[1,"table","borderless"],[1,"thead-light"],["class","pl-24",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"btn-cont","px-20","pb-12","pt-3","border-top"],[1,"btn-cont","mb-3","pt-12","w-100-p","d-flex","justify-content-between"],["mat-raised-button","",1,"float-left",3,"click"],[1,"btn-icon"],["mat-raised-button","","class","mt-10 float-right mr-0","color","accent",3,"click",4,"ngIf"],["mat-raised-button","","color","success","class","mt-10 float-right mr-0",3,"click",4,"ngIf"],[1,"pl-24"],[3,"hidden","pl-24",4,"ngFor","ngForOf"],[3,"hidden"],["mat-stroked-button","","color","accent",3,"click"],["class","bg-light-grey py-3 px-5",4,"ngIf"],[1,"bg-light-grey","py-3","px-5"],[1,"col-12","col-lg-8",2,"margin","auto"],[1,"card","p-0"],[1,"card-header","py-0"],[1,"d-flex"],[1,"flex-fill","pt-3"],[1,"font-size-28","text-muted",2,"cursor","pointer",3,"click"],[1,"card-body","px-5","pt-5"],["btnText","SAVE","btnClass","tiny","store","organization-bank-accounts","btnStatus","primary",3,"model","submitted","baseCancel","cancelFxn","submitModel"],[1,"card-header","pt-2","pb-16"],["btnText","SAVE","btnClass","tiny","store","organization-bank-accounts","btnStatus","primary",3,"submitted","submitModel"],["mat-raised-button","","color","accent",1,"mt-10","float-right","mr-0",3,"click"],["mat-raised-button","","color","success",1,"mt-10","float-right","mr-0",3,"click"]],template:function(t,e){1&t&&(T.Ub(0,"div",0),T.Ub(1,"div",1),T.Ub(2,"div",2),T.Ub(3,"div",3),T.Ub(4,"mat-icon"),T.Lc(5,"account_balance"),T.Tb(),T.Tb(),T.Ub(6,"div"),T.Lc(7,"Bank Account"),T.Tb(),T.Tb(),T.Tb(),T.Ub(8,"div",4),T.Ub(9,"div"),T.Ub(10,"table",5),T.Ub(11,"thead",6),T.Ub(12,"tr"),T.Jc(13,xo,2,1,"th",7),T.Pb(14,"th"),T.Tb(),T.Tb(),T.Ub(15,"tbody"),T.Jc(16,Co,6,3,"tr",8),T.Jc(17,Ao,11,2,"tr",9),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Ub(18,"div",10),T.Ub(19,"div",11),T.Ub(20,"button",12),T.cc("click",(function(){return e.changeStep("prev")})),T.Ub(21,"mat-icon",13),T.Lc(22,"keyboard_arrow_left"),T.Tb(),T.Ub(23,"mat-icon",13),T.Lc(24,"keyboard_arrow_left"),T.Tb(),T.Lc(25," \xa0\xa0BACK "),T.Tb(),T.Jc(26,Io,6,0,"button",14),T.Jc(27,Lo,2,0,"button",15),T.Tb(),T.Tb()),2&t&&(T.Bb(13),T.mc("ngForOf",e.gridConf),T.Bb(3),T.mc("ngForOf",e.list),T.Bb(1),T.mc("ngIf",0===(null==e.list?null:e.list.length)&&!e.loading),T.Bb(9),T.mc("ngIf",!e.isLast),T.Bb(1),T.mc("ngIf",e.isLast))},directives:[r.a,c.s,c.t,b.b,l.a,Ve.a],styles:["[_nghost-%COMP%]     .btn-icon{min-width:1rem;width:1rem}[_nghost-%COMP%]     .btn-icon:first-of-type{margin-left:-.5rem}[_nghost-%COMP%]     .mat-success{background-color:teal!important;color:#fff!important}"]}),t})();function ko(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div",17),T.cc("click",(function(){T.zc(t);const i=e.$implicit;return T.gc().setSelected(i.id)})),T.Ub(1,"div",18),T.Lc(2),T.Tb(),T.Ub(3,"div",19),T.Ub(4,"div",20),T.Ub(5,"div",21),T.Ub(6,"mat-icon",22),T.Lc(7,"attach_money"),T.Tb(),T.Tb(),T.Ub(8,"div",23),T.Lc(9),T.hc(10,"currency"),T.Tb(),T.Tb(),T.Ub(11,"div",24),T.Ub(12,"div",21),T.Ub(13,"mat-icon",25),T.Lc(14,"people"),T.Tb(),T.Tb(),T.Ub(15,"div",26),T.Lc(16),T.Ub(17,"span",27),T.Lc(18," \xa0For\xa0 "),T.Tb(),T.Lc(19),T.hc(20,"number"),T.Tb(),T.Tb(),T.Tb(),T.Tb()}if(2&t){const t=e.$implicit;T.Gb("active",t.active),T.Bb(2),T.Nc(" ",null==t?null:t.allowance_data.name," "),T.Bb(7),T.Nc(" ",T.jc(10,6,null==t?null:t.actual_total,"Kshs ")," "),T.Bb(7),T.Nc(" ",null==t?null:t.head_count," "),T.Bb(3),T.Nc(" ",T.jc(20,9,null==t?null:t.days,"1.0")," day(s) ")}}function zo(t,e){if(1&t){const t=T.Vb();T.Ub(0,"button",42),T.cc("click",(function(){T.zc(t);const i=e.$implicit;return T.gc(2).openCRUDDialog(i.context)})),T.Ub(1,"mat-icon"),T.Lc(2),T.Tb(),T.Lc(3),T.Tb()}if(2&t){const t=e.$implicit;T.Bb(1),T.Db(null==t?null:t.iconClass),T.Bb(1),T.Nc(" ",null==t?null:t.icon," "),T.Bb(1),T.Nc(" ",null==t?null:t.text," ")}}function Bo(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div",28),T.Ub(1,"div",29),T.Ub(2,"mat-card",30),T.Ub(3,"div",31),T.Ub(4,"div",32),T.Ub(5,"div",33),T.Lc(6," Select Members "),T.Tb(),T.Ub(7,"div",34),T.Ub(8,"button",35),T.Ub(9,"mat-icon",36),T.Lc(10,"more_vert"),T.Tb(),T.Tb(),T.Ub(11,"mat-menu",null,37),T.Jc(13,zo,4,4,"button",38),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Ub(14,"mat-card-body",39),T.Ub(15,"div",40),T.Ub(16,"dynamic-table",41),T.cc("postCRUDFxn",(function(){return T.zc(t),T.gc().refreshSelected()})),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb()}if(2&t){const t=T.vc(12),e=T.gc();T.Bb(8),T.mc("matMenuTriggerFor",t),T.Bb(5),T.mc("ngForOf",e.actActions),T.Bb(3),T.mc("tabbedItem",e.item)("largeForms",!0)("addOrg",!0)("customHeader",!0)("modelKey",null==e.configs?null:e.configs.modelKey)("cmptParams",e.cmptParams)("headers",null==e.configs?null:e.configs.headers)("no-card",!0)("has-action",!0)("store",null==e.configs?null:e.configs.getStore)("topActions",null==e.configs?null:e.configs.topActions)("hasSearch",!0)("dropDownActions",null==e.configs?null:e.configs.actions)("rows",e.configs.rows)}}function Po(t,e){if(1&t){const t=T.Vb();T.Ub(0,"button",43),T.cc("click",(function(){return T.zc(t),T.gc().changeStep("next")})),T.Lc(1," NEXT\xa0 "),T.Ub(2,"mat-icon",14),T.Lc(3,"keyboard_arrow_right"),T.Tb(),T.Ub(4,"mat-icon",14),T.Lc(5,"keyboard_arrow_right"),T.Tb(),T.Tb()}}function Eo(t,e){if(1&t){const t=T.Vb();T.Ub(0,"button",44),T.cc("click",(function(){return T.zc(t),T.gc().changeStep("next")})),T.Lc(1," COMPLETE "),T.Tb()}}let Mo=(()=>{class t{constructor(t,e){this._route=t,this._dataLayer=e,this.onNavigate=new T.n,this.list=[],this.nestedList=[],this.loading=!0,this.cmptParams={},this.actActions=[]}changeStep(t){this.onNavigate.emit(t)}setSelected(t){if(this.list.length){let e=Object(h.find)(this.list,{active:!0});if(Object(h.isUndefined)(e)&&Object(h.isUndefined)(t))this.list[0].active=!0,this.selectedAllowance=void 0,this.presetAllowance(0);else if(Object(h.isUndefined)(t))this.selectedAllowance=Object(h.indexOf)(this.list,e);else{const e=Object(h.indexOf)(this.list,Object(h.find)(this.list,{id:t}));this.selectedAllowance=void 0,this.presetAllowance(e)}}}loadActions(){const t=Object(h.get)(JSON.parse(localStorage.getItem("organization")),"org_type",null);this.actActions=[{text:"Rationalize",icon:"compare_arrows",iconClass:"text-success",context:"rationalize",status:["DRAFT"],bpType:["MINISTRY","SASDEF"]},{text:"Approve",icon:"check",iconClass:"text-success",context:"approve",status:["RATIONALIZED"],bpType:["SASDEF"]},{text:"Reject",icon:"close",iconClass:"text-danger",context:"reject",status:["DRAFT","RATIONALIZED"],bpType:["MINISTRY","SASDEF"]}].filter(e=>{const i=Object(h.indexOf)(e.bpType,t),n=Object(h.indexOf)(e.status,this.item.status);if(i>=0&&n>=0)return e})}presetAllowance(t){this.loading=!0;const e=Object(h.indexOf)(this.list,Object(h.find)(this.list,{active:!0}));this.selectedAllowance=void 0,e>=0&&(this.list[e].active=!1),this.list[t].active=!0,this.getNestedList(this.list[t].id),this._dataLayer.get("organization-budget-activity-allowances",this.list[t].id,{current_org_id:this.orgId}).subscribe(e=>{this.selectedAllowance=this.list[t]||e,this.cmptParams=Object.assign(Object.assign({},this.cmptParams),{budget_activity_allowance:this.list[t].id}),this.loadActions(),this.loading=!1},t=>{console.log(t),this.loading=!1})}getNestedList(t){this._dataLayer.list("application-allowances",{current_org_id:this.orgId,budget_activity_allowance:t}).subscribe(t=>{this.nestedList=t.results},t=>console.log(t))}getMainList(){this._dataLayer.list("organization-budget-activity-allowances",{current_org_id:this.orgId,budget_activity:this.item.activity}).subscribe(t=>{this.list=t.results,this.setSelected()},t=>console.log(t))}getItem(){this._dataLayer.get("applications",this.itemId,{current_org_id:this.orgId}).subscribe(t=>{this.item=t,this.getMainList()},t=>console.log(t))}getItemId(){this._route.queryParams.subscribe(t=>{const e=parseInt(t.current,10);this.itemId=parseInt(t.id,10);const i=Object(h.findIndex)(this.steps,{count:e});this.configs=this.steps[i].gridConf,this.getItem()})}ngOnInit(){this.orgId=Object(h.get)(JSON.parse(localStorage.getItem("organization")),"organization",null),this.getItemId()}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(n.a),T.Ob(xe.a))},t.\u0275cmp=T.Ib({type:t,selectors:[["nested-inline-list"]],inputs:{steps:"steps",current:"current"},outputs:{onNavigate:"onNavigate"},features:[T.Ab([xe.a])],decls:26,vars:4,consts:[[1,"card","main-wrapper"],[1,"card-header","pt-3","bg-white"],[1,"pl-3","text-muted","font-weight-bold","pb-2","d-flex","align-items-center"],[1,"pt-2","pr-2"],[1,"card-body","px-0","pb-0","pt-0"],[1,"w-100-p","d-flex","flex-row","px-0"],[1,"h-100-p","overflow-auto","innerScroll","page-layout","col-lg-3","main-list"],[1,"ps"],["fuseperfectscrollbar","",1,"mail-list","overflow-auto"],["class","list-item",3,"active","click",4,"ngFor","ngForOf"],["class","col-lg-9 overflow-auto innerScroll px-0 mt-1\n                bg-light pb-12",4,"ngIf"],[1,"btn-cont","px-20","pb-12","pt-3","border-top"],[1,"btn-cont","mb-3","pt-12","w-100-p","d-flex","justify-content-between"],["mat-raised-button","",1,"float-left",3,"click"],[1,"btn-icon"],["mat-raised-button","","class","mt-10 float-right mr-0","color","accent",3,"click",4,"ngIf"],["mat-raised-button","","color","success","class","mt-10 float-right mr-0",3,"click",4,"ngIf"],[1,"list-item",3,"click"],[1,"pb-0"],[1,"d-flex","flex-column","align-items-start"],[1,"d-flex","flex-row","align-items-center","fullwidth","ml-n1"],[1,"pt-2"],[1,"font-size-18","text-muted"],[1,"font-size-14","text-muted","pl-1"],[1,"d-flex","flex-row","align-items-center","fullwidth","pt-0","mt-n2"],[1,"font-size-16","text-muted"],[1,"font-size-14","text-muted"],[1,"font-weight-bold"],[1,"col-lg-9","overflow-auto","innerScroll","px-0","mt-1","bg-light","pb-12"],[1,"full-width","bg-light","px-16","pt-12","pb-2"],[1,"mat-elevation-z1","p-0","mb-2","w-100-p"],[1,"card-header","bg-white","font-size-16"],[1,"d-flex","flex-row"],[1,"flex-fill","pb-1","pl-8","title","pt-2"],[1,"pt-1","pr-3"],["mat-mini-fab","","color","default","aria-label","Activity actions",1,"mat-elevation-z0","border","bg-light","h-32","w-32",3,"matMenuTriggerFor"],[1,"mt-n2","fonnt-size-20"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[1,"p-0"],[1,"w-100-p","mt-0","px-0"],["title","Listing",1,"w-100-p",3,"tabbedItem","largeForms","addOrg","customHeader","modelKey","cmptParams","headers","no-card","has-action","store","topActions","hasSearch","dropDownActions","rows","postCRUDFxn"],["mat-menu-item","",3,"click"],["mat-raised-button","","color","accent",1,"mt-10","float-right","mr-0",3,"click"],["mat-raised-button","","color","success",1,"mt-10","float-right","mr-0",3,"click"]],template:function(t,e){1&t&&(T.Ub(0,"div",0),T.Ub(1,"div",1),T.Ub(2,"div",2),T.Ub(3,"div",3),T.Ub(4,"mat-icon"),T.Lc(5,"account_balance_wallet"),T.Tb(),T.Tb(),T.Ub(6,"div"),T.Lc(7," Allowances "),T.Tb(),T.Tb(),T.Tb(),T.Ub(8,"div",4),T.Ub(9,"div"),T.Ub(10,"div",5),T.Ub(11,"div",6),T.Ub(12,"div",7),T.Ub(13,"div",8),T.Jc(14,ko,21,12,"div",9),T.Tb(),T.Tb(),T.Tb(),T.Jc(15,Bo,17,16,"div",10),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Ub(16,"div",11),T.Ub(17,"div",12),T.Ub(18,"button",13),T.cc("click",(function(){return e.changeStep("prev")})),T.Ub(19,"mat-icon",14),T.Lc(20,"keyboard_arrow_left"),T.Tb(),T.Ub(21,"mat-icon",14),T.Lc(22,"keyboard_arrow_left"),T.Tb(),T.Lc(23," \xa0\xa0BACK "),T.Tb(),T.Jc(24,Po,6,0,"button",15),T.Jc(25,Eo,2,0,"button",16),T.Tb(),T.Tb()),2&t&&(T.Bb(14),T.mc("ngForOf",e.list),T.Bb(1),T.mc("ngIf",e.selectedAllowance&&!e.loading),T.Bb(9),T.mc("ngIf",!e.isLast),T.Bb(1),T.mc("ngIf",e.isLast))},directives:[r.a,c.s,c.t,b.b,l.a,d.c,d.d,ve.a,d.a],pipes:[c.d,c.g],styles:["[_nghost-%COMP%]     .btn-icon{min-width:1rem;width:1rem}[_nghost-%COMP%]     .btn-icon:first-of-type{margin-left:-.5rem}[_nghost-%COMP%]     .mat-success{background-color:teal!important;color:#fff!important}[_nghost-%COMP%]     .main-wrapper{flex:1 1 auto;flex-direction:column;box-sizing:border-box}[_nghost-%COMP%]     .main-wrapper .main-card-content{min-height:55.5vh;max-height:85.5vh;border-left:1px solid #e0e0e0}[_nghost-%COMP%]     .main-wrapper .main-list{flex:1 1 0%;box-sizing:border-box;position:relative;display:flex;flex-direction:column;flex:1;padding:0;overflow-y:auto;-webkit-overflow-scrolling:touch}[_nghost-%COMP%]     .main-wrapper .main-list .mail-list{position:relative;display:flex;flex-direction:column;flex:1;min-height:55vh;max-height:85.5vh}[_nghost-%COMP%]     .main-wrapper .main-list .list-item{flex-shrink:0;position:relative;padding:16px 24px;cursor:pointer;border-bottom:1px solid rgba(0,0,0,.12)}[_nghost-%COMP%]     .main-wrapper .main-list .list-item.active{background:rgba(0,0,0,.04)}[_nghost-%COMP%]     .main-wrapper .badge.created, [_nghost-%COMP%]     .main-wrapper .badge.draft, [_nghost-%COMP%]     .main-wrapper .badge.on_going, [_nghost-%COMP%]     .main-wrapper .badge.open, [_nghost-%COMP%]     .main-wrapper .badge.pending{background-color:#ffc107;color:#212529}[_nghost-%COMP%]     .main-wrapper .badge.assigned, [_nghost-%COMP%]     .main-wrapper .badge.first_level_approved, [_nghost-%COMP%]     .main-wrapper .badge.rationalized, [_nghost-%COMP%]     .main-wrapper .badge.submitted{background-color:#2196f3;color:#fff}[_nghost-%COMP%]     .main-wrapper .badge.cancelled, [_nghost-%COMP%]     .main-wrapper .badge.rejected{background-color:#dc3545;color:#fff}[_nghost-%COMP%]     .main-wrapper .badge.overdue{background-color:#343a40;color:#fff}[_nghost-%COMP%]     .main-wrapper .badge.accepted, [_nghost-%COMP%]     .main-wrapper .badge.approved, [_nghost-%COMP%]     .main-wrapper .badge.completed, [_nghost-%COMP%]     .main-wrapper .badge.final_approved, [_nghost-%COMP%]     .main-wrapper .badge.finished{background-color:#28a745;color:#fff}[_nghost-%COMP%]     .mat-mini-fab .mat-button-wrapper{padding-top:0!important}"]}),t})();const Do=["one"],Fo=["two"],No=["three"],jo=["four"],Ro=["five"],Jo=["six"];function Vo(t,e){if(1&t&&(T.Ub(0,"mat-icon"),T.Lc(1),T.Tb()),2&t){const t=T.gc().$implicit;T.Bb(1),T.Nc(" ",t.icon," ")}}function Ko(t,e){1&t&&(T.Ub(0,"mat-icon"),T.Lc(1," check "),T.Tb())}function Ho(t,e){if(1&t&&(T.Ub(0,"mat-icon"),T.Lc(1),T.Tb()),2&t){const t=T.gc().$implicit;T.Bb(1),T.Nc(" ",t.icon," ")}}function $o(t,e){if(1&t&&(T.Ub(0,"div",19),T.Ub(1,"div",20),T.Ub(2,"div"),T.Ub(3,"span",21),T.Jc(4,Vo,2,1,"mat-icon",22),T.Jc(5,Ko,2,0,"mat-icon",22),T.Jc(6,Ho,2,1,"mat-icon",22),T.Tb(),T.Tb(),T.Tb(),T.Ub(7,"div"),T.Ub(8,"div",23),T.Lc(9),T.Tb(),T.Tb(),T.Tb()),2&t){const t=e.$implicit;T.Bb(2),T.Fb("rounded-circle counter\n                        ",t.active?"active":"","\n                        ",t.done?"done":"",""),T.Bb(2),T.mc("ngIf",!t.done),T.Bb(1),T.mc("ngIf",t.done&&!t.active),T.Bb(1),T.mc("ngIf",t.done&&t.active),T.Bb(1),T.Fb("stepper-label sm pt-3\n                    ",t.active?"active font-weight-bold":"","\n                    ",t.done?"done font-weight-bold":"",""),T.Bb(2),T.Nc(" ",t.shortLabel," ")}}function Go(t,e){if(1&t){const t=T.Vb();T.Ub(0,"form-wrapper",24),T.cc("onNavigate",(function(e){return T.zc(t),T.gc().navigate(e)})),T.Tb()}if(2&t){const t=T.gc();T.mc("steps",t.steps)}}function qo(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div"),T.Ub(1,"list-wrapper",24),T.cc("onNavigate",(function(e){return T.zc(t),T.gc(2).navigate(e)})),T.Tb(),T.Tb()}if(2&t){const t=T.gc(2);T.Bb(1),T.mc("steps",t.steps)}}function Wo(t,e){if(1&t&&T.Jc(0,qo,2,1,"div",22),2&t){const t=T.gc();T.mc("ngIf","two"===t.cmpt)}}function Yo(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div"),T.Ub(1,"attachment-wrapper",24),T.cc("onNavigate",(function(e){return T.zc(t),T.gc(2).navigate(e)})),T.Tb(),T.Tb()}if(2&t){const t=T.gc(2);T.Bb(1),T.mc("steps",t.steps)}}function Zo(t,e){if(1&t&&T.Jc(0,Yo,2,1,"div",22),2&t){const t=T.gc();T.mc("ngIf","three"===t.cmpt)}}function Qo(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div"),T.Ub(1,"inline-list-wrapper",24),T.cc("onNavigate",(function(e){return T.zc(t),T.gc(2).navigate(e)})),T.Tb(),T.Tb()}if(2&t){const t=T.gc(2);T.Bb(1),T.mc("steps",t.steps)}}function Xo(t,e){if(1&t&&T.Jc(0,Qo,2,1,"div",22),2&t){const t=T.gc();T.mc("ngIf","four"===t.cmpt)}}function ts(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div"),T.Ub(1,"nested-inline-list",24),T.cc("onNavigate",(function(e){return T.zc(t),T.gc(2).navigate(e)})),T.Tb(),T.Tb()}if(2&t){const t=T.gc(2);T.Bb(1),T.mc("steps",t.steps)}}function es(t,e){if(1&t&&T.Jc(0,ts,2,1,"div",22),2&t){const t=T.gc();T.mc("ngIf","five"===t.cmpt)}}function is(t,e){if(1&t){const t=T.Vb();T.Ub(0,"div"),T.Ub(1,"nested-list",25),T.cc("onNavigate",(function(e){return T.zc(t),T.gc(2).navigate(e)})),T.Tb(),T.Tb()}if(2&t){const t=T.gc(2);T.Bb(1),T.mc("steps",t.steps)}}function ns(t,e){if(1&t&&T.Jc(0,is,2,1,"div",22),2&t){const t=T.gc();T.mc("ngIf","six"===t.cmpt)}}const as=[{path:"",component:fe.a,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:ye},{path:"details",component:Va,data:{store:"organization",endPoint:"organizations",listRoute:"/organizations"}},{path:"add",component:(()=>{class t{constructor(t,e,i,n,a){this._router=t,this._route=e,this._authConfig=i,this._datalayer=n,this._stepperService=a,this.item={}}setFurthest(t,e){const i=Object.assign(Object.assign({},t),e);this._router.navigate([],{queryParams:i})}checkStep(t){if(h.isUndefined(this.furthest)||0===this.furthest){this.steps[0].active=!0,this.currentStep=this.steps[0],this.furthest=1,this.current=1,this.cmpt="one";const e=Object.assign({step:1,current:1},this.otherParams);this.setFurthest(e,t)}else{const t=this.furthest-1;this.currentStep=h.find(this.steps,{count:this.current});const e=h.findIndex(this.steps,this.currentStep);this.steps=this.steps.map((e,i)=>i<t&&0!==t?Object.assign(Object.assign({},e),{done:!0,active:!1}):0===t&&0!==i?Object.assign(Object.assign({},e),{done:!1,active:!1}):e),this.steps[t].active=!0,this.steps[e].active=!0,this.cmpt=this.steps[e].template}}goToNext(t){const e=h.findIndex(this.steps,{count:this.current});if(e+1<this.steps.length){this.cmpt=this.steps[e+1].template;const i=this.steps[e+1].count;this.furthest=this.steps[e+1].count>this.furthest?this.furthest+1:this.furthest;const n={step:this.furthest,current:i,id:this.itemId};if(t){const e=h.keys(t);h.each(e,e=>{n[e]=t[e]})}this.setFurthest(n)}else e+1===this.steps.length&&(this.steps=this.originalSteps,setTimeout(()=>{this.steps=[],this.furthest=void 0,this._router.navigateByUrl(this.listRoute)},250))}goToPrev(){const t=h.findIndex(this.steps,{count:this.current});0===t?this._router.navigateByUrl(this.listRoute):(this.current=this.steps[t-1].count,this.steps[this.current].active=!0,this.setFurthest({step:this.furthest,current:this.current,id:this.itemId}))}navigate(t,e){"next"===(h.isObject(t)?t.direction:t)?this.goToNext(t.params):this.goToPrev()}setParams(){this._route.queryParams.subscribe(t=>{console.log(t),this.step=t.step,this.current=parseInt(t.current,10)||1,this.itemId=t.id,this.furthest=h.isUndefined(t.step)?void 0:parseInt(t.step,10),this._route.data.subscribe(e=>{const i=this._stepperService.getSteps(e.stepsKey);this.steps=[...i],this.originalSteps=this.steps,this.listRoute=e.listRoute,this.context=e.context,this.checkStep(t)})})}ngOnInit(){this.otherParams={},this.current="one",this.user=JSON.parse(this._authConfig.getUser()),this.isEdit=this._router.url.includes("edit"),setTimeout(()=>{this.cmpt="one",this.setParams()})}}return t.\u0275fac=function(e){return new(e||t)(T.Ob(n.g),T.Ob(n.a),T.Ob(Ee.a),T.Ob(xe.a),T.Ob(v))},t.\u0275cmp=T.Ib({type:t,selectors:[["stepper-wrapper"]],viewQuery:function(t,e){var i;1&t&&(T.Qc(Do,!0),T.Qc(Fo,!0),T.Qc(No,!0),T.Qc(jo,!0),T.Qc(Ro,!0),T.Qc(Jo,!0)),2&t&&(T.uc(i=T.dc())&&(e.one=i.first),T.uc(i=T.dc())&&(e.two=i.first),T.uc(i=T.dc())&&(e.three=i.first),T.uc(i=T.dc())&&(e.four=i.first),T.uc(i=T.dc())&&(e.five=i.first),T.uc(i=T.dc())&&(e.six=i.first))},features:[T.Ab([xe.a])],decls:31,vars:6,consts:[[1,"w-100-p"],[1,"container-header","w-100-p"],[1,"d-flex"],[1,"d-flex","flex-column","flex-fill","pt-12"],[1,"title"],[1,"text-light","pt-2","d-flex"],[1,"pr-2"],[1,"d-flex","justify-content-around"],["class","steps-cont sm",4,"ngFor","ngForOf"],[1,"px-5"],[1,"w-100-p","raised","mb-5","p-0"],[1,"p-0"],[3,"ngTemplateOutlet"],["one",""],["two",""],["three",""],["four",""],["five",""],["six",""],[1,"steps-cont","sm"],[1,"circle","d-flex","justify-content-center"],[1,"font-size-18"],[4,"ngIf"],[1,"w-100-p","text-center","text-light"],[1,"fade-in",3,"steps","onNavigate"],[3,"steps","onNavigate"]],template:function(t,e){1&t&&(T.Ub(0,"div",0),T.Ub(1,"div",1),T.Ub(2,"div",2),T.Ub(3,"div",3),T.Ub(4,"div",4),T.Lc(5),T.Tb(),T.Ub(6,"div",5),T.Ub(7,"div",6),T.Lc(8),T.Tb(),T.Ub(9,"div"),T.Ub(10,"b"),T.Lc(11),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Ub(12,"div",7),T.Jc(13,$o,10,12,"div",8),T.Tb(),T.Tb(),T.Tb(),T.Ub(14,"div",9),T.Ub(15,"div",9),T.Ub(16,"mat-card",10),T.Ub(17,"mat-card-content",11),T.Qb(18,12),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Tb(),T.Jc(19,Go,1,1,"ng-template",null,13,T.Kc),T.Jc(21,Wo,1,1,"ng-template",null,14,T.Kc),T.Jc(23,Zo,1,1,"ng-template",null,15,T.Kc),T.Jc(25,Xo,1,1,"ng-template",null,16,T.Kc),T.Jc(27,es,1,1,"ng-template",null,17,T.Kc),T.Jc(29,ns,1,1,"ng-template",null,18,T.Kc)),2&t&&(T.Bb(5),T.Oc(" ",e.isEdit?"Review":"New"," ",e.context," "),T.Bb(3),T.Nc(" ",null==e.currentStep?null:e.currentStep.help_text,": "),T.Bb(3),T.Mc(null==e.currentStep?null:e.currentStep.label),T.Bb(2),T.mc("ngForOf",e.steps),T.Bb(5),T.mc("ngTemplateOutlet",e[e.cmpt]))},directives:[c.s,l.a,l.b,c.A,c.t,r.a,Ha,Ya,_o,So,Mo,jn],styles:['[_nghost-%COMP%]    {width:100%}[_nghost-%COMP%]     .container-header{background-color:#146b3a!important;width:auto!important;transition:all .5s cubic-bezier(0,0,.2,1)!important;left:13rem;right:0;padding:3.05rem 5.85rem 7.75rem;margin-bottom:-5.25rem}[_nghost-%COMP%]     .container-header .title{font-size:2rem;color:#fff}[_nghost-%COMP%]     .counter, [_nghost-%COMP%]     .round{display:inline-block;height:3.8rem;width:3.8rem;line-height:3.8rem;border-radius:1.9rem;background-color:#e5bd35;text-align:center;box-shadow:0 0 0 3.5px rgba(0,0,0,.75)}[_nghost-%COMP%]     .complete, [_nghost-%COMP%]     .counter.done{box-shadow:0 0 0 3.5px #004d4d}[_nghost-%COMP%]     .counter.active, [_nghost-%COMP%]     .larger{height:3.8rem;width:3.8rem;line-height:3.8rem;border-radius:2.5rem;box-shadow:0 0 0 3.5px #fff}@media (max-width:575.98px){[_nghost-%COMP%]     .counter.active, [_nghost-%COMP%]     .larger{height:3.8rem;width:3.8rem}}[_nghost-%COMP%]     .counter.active>span, [_nghost-%COMP%]     .smaller{height:3.8rem;width:3.8rem;line-height:3.8rem;border-radius:1.75rem;color:#2196f3;box-shadow:0 0 0 3.5px #0c7cd5}[_nghost-%COMP%]     .counter{padding-top:.5rem;background-color:#f4f4f4;box-shadow:0 0 0 3.5px #ccc}[_nghost-%COMP%]     .counter.active{display:flex;justify-content:center;align-items:center}[_nghost-%COMP%]     .counter.active>span{margin-top:-.5rem;padding-top:.5rem;background-color:#fff;color:#2196f3}[_nghost-%COMP%]     .counter.done{background-color:#fff}[_nghost-%COMP%]     .counter.done>span{margin-top:-.5rem}[_nghost-%COMP%]     .counter.done>span i{color:teal}[_nghost-%COMP%]     .stepper-label h3{font-size:.95rem;font-family:Roboto-Regular,sans-serif;font-weight:500}[_nghost-%COMP%]     .stepper-label .text{font-size:1.05rem;font-family:Roboto-Regular,sans-serif}[_nghost-%COMP%]     .stepper-label.active h3{color:#2196f3}[_nghost-%COMP%]     .stepper-label.active .text{color:#fff}[_nghost-%COMP%]     .stepper-label.done h3{color:teal}[_nghost-%COMP%]     .stepper-label.done .text{color:#fff}[_nghost-%COMP%]     .stepper-label.small{padding-left:0;padding-top:.35rem}[_nghost-%COMP%]     .steps-cont{padding-bottom:3rem;flex-wrap:nowrap;width:10rem;position:relative}[_nghost-%COMP%]     .steps-cont.sm{padding-bottom:0;padding-top:.8rem}[_nghost-%COMP%]     .steps-cont .counter:before{content:"";position:absolute;top:2.5rem;left:6.95rem;width:6.52rem;height:.25rem;background:#ccc}[_nghost-%COMP%]     .steps-cont .counter.active:before{content:"";background:#2196f3!important;left:6.95rem}[_nghost-%COMP%]     .steps-cont .counter.done:before{background:#2196f3!important}[_nghost-%COMP%]     .steps-cont:first-of-type .counter{position:relative}[_nghost-%COMP%]     .steps-cont:first-of-type .counter:before{content:"";position:absolute;top:1.75rem;left:3.95rem;width:6.52rem;height:.25rem;background:#ccc}[_nghost-%COMP%]     .steps-cont:first-of-type .counter.done:before{left:3.95rem}[_nghost-%COMP%]     .steps-cont:last-of-type .counter:before{content:"";position:absolute;top:3em;left:5.52rem;width:0;height:.2em;background:#1e90ff}']}),t})(),data:{stepsKey:"organization",context:"Organization",listRoute:"/organizations"}}]}];let os=(()=>{class t{}return t.\u0275mod=T.Mb({type:t}),t.\u0275inj=T.Lb({factory:function(e){return new(e||t)},imports:[[n.k.forChild(as)],n.k]}),t})();var ss=i("5wFq");let cs=(()=>{class t{}return t.\u0275mod=T.Mb({type:t}),t.\u0275inj=T.Lb({factory:function(e){return new(e||t)},imports:[[o.a,n.k,ss.a,a.a,u.a,ge,he,os]]}),t})()}}]);
//# sourceMappingURL=9-es2015.f35f0f0ee47951afd60f.js.map