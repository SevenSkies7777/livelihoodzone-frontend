(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"/vS9":function(t,e,i){"use strict";i.d(e,"a",(function(){return I}));var n=i("SVse"),a=i("iInd"),o=i("s7LF"),c=i("Tj54"),s=i("M9ds"),r=i("PDjf"),l=i("rJgo"),b=i("iELJ"),d=i("SqCe"),g=i("Dxy4"),p=i("Q2Ze"),u=i("e6WT"),m=i("zHaW"),f=i("o4Yh"),h=i("pMoy"),T=i("pu8Q"),v=i("Tk7p"),y=i("5HBU"),U=i("RT2w"),_=i("2l/B"),O=i("HNXS"),M=i("LdEM"),A=i("8+Aj"),x=i("8Y7J");let I=(()=>{class t{}return t.\u0275mod=x.Mb({type:t}),t.\u0275inj=x.Lb({factory:function(e){return new(e||t)},providers:[M.a],imports:[[U.a,a.k,n.c,c.b,s.f,r.c,d.d,l.b,g.c,b.f,p.e,u.c,h.b,v.a,m.d,O.a,_.a,f.b,o.n,y.a,o.z,A.a,T.a]]}),t})()},"919n":function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var n=i("LvDl"),a=i("8Y7J"),o=i("7ZA2");let c=(()=>{class t{constructor(t){this._authConfig=t}isActionAllowed(t,e){const i=Object(n.get)(JSON.parse(localStorage.getItem("organization")),"org_type"),a=Object(n.get)(JSON.parse(localStorage.getItem("organization")),"organization"),o=JSON.parse(this._authConfig.getUser());if(Object(n.isUndefined)(e))return Object(n.indexOf)(t,i)>=0;{const c=Object(n.find)(o.organizations,{organization:a},null);return(Object(n.indexOf)(e,c.group_name)>=0||Object(n.isNull)(c.group))&&Object(n.indexOf)(t,i)>=0}}}return t.\u0275fac=function(e){return new(e||t)(a.Yb(o.a))},t.\u0275prov=a.Kb({token:t,factory:t.\u0275fac}),t})()},LdEM:function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var n=i("LvDl");const a=[{key:"application",tabs:[{store:"applications",label:"Basic Details",content:"form",context:"Application",parentKey:"organization",count:1,formConf:{store:"applications",cancelTxt:"CANCEL",nextTxt:"SAVE",addStore:"applications",editStore:"applications",getStore:"applications"},detailsConf:[{label:"Applied Amount",key:"total",icon:"account_balance",type:"currency"},{label:"Required By",key:"date_requested",icon:"calendar_today",type:"date"},{label:"Financial Year",key:"financial_year",icon:"calendar_today",type:"nested",fieldType:"nested_range",primaryField:"financial_year_data.starts_on",secondaryField:"financial_year_data.ends_on"},{label:"Status",key:"status",icon:"assessment",type:"status"}],bankConfs:[{title:"Account Name",key:"account_name"},{title:"Account #",key:"account_number"},{title:"Bank",key:"bank_name"},{title:"Branch",key:"branch_name"}],extraDetails:"extraDetails",auditTrail:!0,applicationME:!0,activitySummary:!0},{store:"application-items",label:"Billable Items",modelKey:"application",content:"grid",listParams:{member_null:!0},gridConf:{getStore:"application-items",editStore:"application-items"},topActions:[{btnText:"ADD BILLABLE ITEM",status:"info",icon:"true",action:"inline",conf:{context:"BILLABLE ITEM",store:"application-items",btnText:"SAVE"}}],rows:[{key:"item",type:"compact-line",context:"billable-item",fieldType:"nested_string",primaryField:"item_data.name"},{key:"item",type:"compact-line",context:"billable-item",fieldType:"activity_details",primaryField:"item_data.name"},{key:"item",type:"compact-line",context:"billable-item",fieldType:"nested_status_total",primaryField:"item_data.name"},{key:"item",type:"compact-line",context:"billable-item",fieldType:"nested_totals",primaryField:"item_data.name"}],headers:[{title:"Item"},{title:"Activity Item"},{title:"Total"},{title:"Approved Totals"},{title:"Actions",oderable:!1,searchable:!1}],dropDownActions:[{btnText:"Edit",status:"info",icon:"edit",disableStatus:"FINISHED",action:"inline",modalConf:{store:"application-items",titleKey:"item",context:"Billable Item",btnText:"SAVE"}},{btnText:"Rationalize",status:"draft",icon:"compare_arrows",disableStatus:"FINISHED",class:"text-success",action:"modal",modalConf:{store:"application-items",titleKey:"item",context:"rationalize",btnText:"SAVE",width:"50%"}},{btnText:"Approve",status:"rationalized",icon:"check",class:"text-success",disableStatus:"FINISHED",action:"modal",modalConf:{store:"application-items",titleKey:"item",context:"approve",btnText:"SAVE",width:"50%"}},{btnText:"Reject",status:"rationalize",icon:"close",class:"text-danger",disableStatus:"FINISHED",action:"modal",modalConf:{store:"application-items",titleKey:"item",context:"reject",btnText:"SAVE",width:"50%"}}]},{store:"application-attendees",label:"Attendees",content:"grid",modelKey:"application",listParams:{member_null:!1},gridConf:{getStore:"application-attendees",editStore:"application-attendees"},topActions:[{btnText:"ADD ATTENDEE",status:"info",icon:"true",action:"inline",conf:{context:"ATTENDEE",store:"application-attendees",btnText:"SAVE"}}],rows:[{key:"item",type:"compact-line",context:"attendees",fieldType:"nested_string",primaryField:"item_data.name"},{key:"item",type:"compact-line",context:"billable-item",fieldType:"activity_details",primaryField:"item_data.name"},{key:"item",type:"compact-line",context:"billable-item",fieldType:"nested_status_total",primaryField:"item_data.name"},{key:"item",type:"compact-line",context:"billable-item",fieldType:"nested_totals",primaryField:"item_data.name"}],headers:[{title:"Member"},{title:"Activity Details"},{title:"Totals"},{title:"Approved Totals"},{title:"Actions",oderable:!1,searchable:!1}],dropDownActions:[{btnText:"Edit",status:"info",icon:"edit",disableStatus:"FINISHED",action:"inline",modalConf:{store:"application-items",titleKey:"item",context:"Billable Item",btnText:"SAVE"}},{btnText:"Rationalize",status:"draft",icon:"compare_arrows",disableStatus:"FINISHED",class:"text-success",action:"modal",modalConf:{store:"application-items",titleKey:"item",context:"rationalize",btnText:"SAVE",width:"50%"}},{btnText:"Approve",status:"rationalized",icon:"check",class:"text-success",disableStatus:"FINISHED",action:"modal",modalConf:{store:"application-items",titleKey:"item",context:"approve",btnText:"SAVE",width:"50%"}},{btnText:"Reject",status:"rationalize",icon:"close",class:"text-danger",disableStatus:"FINISHED",action:"modal",modalConf:{store:"application-items",titleKey:"item",context:"reject",btnText:"SAVE",width:"50%"}}]},{store:"application-allowances",label:"Allowances",content:"nested-inline-list",getStore:"application-allowances",editStore:"application-allowances",gridConf:{getStore:"application-allowances",editStore:"application-allowances"},topActions:[{btnText:"ADD ALLOWANCE",status:"info",icon:"true",action:"inline",conf:{context:"ALLOWANCE",store:"application-allowances",btnText:"SAVE"}}],rows:[{key:"item",type:"compact-line",context:"allowances",fieldType:"nested_member",primaryField:"item_data.name"},{key:"item",type:"compact-line",context:"billable-item",fieldType:"nested_status_total",primaryField:"item_data.name"},{key:"item",type:"compact-line",context:"billable-item",fieldType:"nested_totals",primaryField:"item_data.name"}],headers:[{title:"Allowance"},{title:"Totals"},{title:"Approved Totals"},{title:"Actions",oderable:!1,searchable:!1}],actions:[{btnText:"EDIT",status:"info",icon:!1,disableStatus:"FINISHED",action:"inline",modalConf:{store:"application-allowances",titleKey:"item",context:"Allowance",btnText:"SAVE"}},{btnText:"Rationalize",status:"draft",icon:"compare_arrows",disableStatus:"FINISHED",class:"text-success",action:"modal",modalConf:{store:"application-allowances",titleKey:"item",context:"rationalize",btnText:"SAVE",width:"50%"}},{btnText:"Approve",status:"rationalized",icon:"check",class:"text-success",disableStatus:"FINISHED",action:"modal",modalConf:{store:"application-allowances",titleKey:"item",context:"approve",btnText:"SAVE",width:"50%"}},{btnText:"Reject",status:"rationalize",icon:"close",class:"text-danger",disableStatus:"FINISHED",action:"modal",modalConf:{store:"application-allowances",titleKey:"item",context:"reject",btnText:"SAVE",width:"50%"}}]},{store:"users",label:"Attachments",content:"attachments",gridConf:{getStore:"organisations",editStore:"organisations"},topActions:[{btnText:"ADD USER",status:"info",icon:"true",action:"inline",conf:{context:"USER",store:"users",btnText:"SAVE"}}],rows:[{key:"first_name",type:"string"},{key:"last_name",type:"string"},{key:"phone_number",type:"string"},{key:"email",type:"string"}],headers:[{title:"Names"},{title:"."},{title:"Phone Number"},{title:"Email"},{title:"Actions",oderable:!1,searchable:!1}],actions:[{btnText:"EDIT",status:"info",icon:!1,disableStatus:"FINISHED",action:"inline",modalConf:{store:"users",titleKey:"name",context:"Users",btnText:"SAVE"}}]},{store:"application-alternate-funding-sources",label:"Alternative Funds",content:"grid",modelKey:"application",gridConf:{getStore:"application-alternate-funding-sources",editStore:"application-alternate-funding-sources"},topActions:[{btnText:"ADD ALTERNATIVE FUND",status:"info",icon:"true",action:"inline",conf:{context:"ALTERNATIVE FUNDING",store:"application-alternate-funding-sources",btnText:"SAVE"}}],rows:[{key:"entity_name",type:"string"},{key:"estimated_amount",type:"currency"},{key:"description",type:"string"}],headers:[{title:"Entity Name"},{title:"Estimated Amount"},{title:"Description"},{title:"Actions",oderable:!1,searchable:!1}],actions:[{btnText:"EDIT",status:"info",icon:!1,disableStatus:"FINISHED",action:"inline",modalConf:{store:"application-alternate-funding-sources",titleKey:"entity_name",context:"Alternative Funding",btnText:"SAVE"}}]}],headerConfig:{icon:"assignment",headerLabel:"Application",headerValue:"id",subTitleLabel:"By",subTitleValue:"organization_data.name",actions:[{btnText:"SUBMIT",action:"submit",color:"default",context:"APPLICATION",activeStates:["DRAFT"],bpType:["GOVERNMENT_AGENCY","PROFESSIONAL_SPORTPERSON","SPORTS_ORGANIZATION","MINISTRY"],roles:["Admin","Budget Reviewer","Ministry Approver"],configs:{title:"Submit Application",context:"APPLICATION",store:"applications",action:"update",description:"Kindly verify that you would indeed like to\n                            submit the following application for review. Once submitted \n                            you will not be able to make any further updates to it. \n                            Click Submit below to proceed"}},{btnText:"RATIONALIZE",action:"rationalize",context:"APPLICATIONS",color:"default",activeStates:["SUBMITTED"],bpType:["MINISTRY","SASDEF"],roles:["Admin","Budget Reviewer","Ministry Approver"],configs:{title:"Rationalize Application",context:"APPLICATIONS",store:"application-reviews",action:"rationalizeApplication",description:"Kindly verify that you would indeed like to \n                            rationalize the following application. Confirm that you have reviewed\n                            and rationalized or rejected activity lines before you can\n                            continue",approveNested:!1,comment:!1}},{btnText:"APPROVE",action:"approve",context:"APPLICATIONS",color:"default",activeStates:["RATIONALIZED"],bpType:["SASDEF"],roles:["Budget Reviewer","Ministry Approver","SASDEF Admin"],configs:{title:"Approve Application",context:"APPLICATION  ",store:"application-reviews",action:"approveApplication",description:"Kindly verify that you would indeed like to\n                            approve the following application. Confirm that you have reviewed\n                            and approved or rejected activity lines before you can\n                            continue",approveNested:!1,comment:!1}},{btnText:"REJECT",action:"reject",context:"APPLICATIONS",color:"warn",activeStates:["SUBMITTED","RATIONALIZED"],bpType:["MINISTRY","SASDEF"],roles:["Budget Reviewer","Ministry Approver","SASDEF Admin"],configs:{title:"Reject Application",context:"APPLICATIONS",hasComment:!0,store:"application-reviews",action:"rejectApplication",description:"Kindly verify that you would indeed like to\n                            reject the following application. Once rejected you will\n                            not be able to approve any of the activities lines",comment:!0}}]}},{key:"organization-budget",headerConfig:{icon:"work",headerLabel:"Calendar of Event",headerValue:"id",subTitleLabel:"By",subTitleValue:"organization_data.name",actions:[{btnText:"SUBMIT",action:"submit",color:"default",context:"CALENDAR OF EVENTS",activeStates:["DRAFT"],bpType:["GOVERNMENT_AGENCY","PROFESSIONAL_SPORTPERSON","SPORTS_ORGANIZATION","MINISTRY"],roles:["Admin","Budget Reviewer","Ministry Approver"],configs:{title:"Submit Calendar of Events",context:"CALENDAR OF EVENTS",store:"organization-budgets",action:"update",description:"Kindly verify that you would indeed like to\n                            submit the following calendar of events. Once submitted you will not\n                            be able to make any further updates to it. Click Submit\n                            below to proceed"}},{btnText:"RATIONALIZE",action:"rationalize",context:"CALENDAR OF EVENTS",color:"default",activeStates:["SUBMITTED"],bpType:["MINISTRY"],roles:["Admin","Budget Reviewer","Ministry Approver"],configs:{title:"Rationalize Calendar of Events",context:"CALENDAR OF EVENTS",store:"organization-budget-reviews",action:"rationalize",description:"Kindly verify that you would indeed like to \n                            rationalize the following calendar of events. Confirm that you have reviewed\n                            and rationalized or rejected activities and activity lines before you can\n                            continue",approveNested:!1,comment:!1}},{btnText:"APPROVE",action:"approve",context:"CALENDAR OF EVENTS",color:"default",activeStates:["RATIONALIZED"],bpType:["SASDEF"],roles:["Budget Reviewer","Ministry Approver","SASDEF Admin"],configs:{title:"Approve Calendar of Events",context:"CALENDAR OF EVENTS  ",store:"organization-budget-reviews",action:"approve",description:"Kindly verify that you would indeed like tO\n                            approve the following calendar of events. Confirm that you have reviewed\n                            and approved or rejected activities and activity lines before you can\n                            continue",approveNested:!1,comment:!1}},{btnText:"REJECT",action:"reject",context:"CALENDAR OF EVENTS",color:"warn",activeStates:["SUBMITTED","RATIONALIZED"],bpType:["MINISTRY","SASDEF"],roles:["Budget Reviewer","Ministry Approver","SASDEF Admin"],configs:{title:"Reject Calendar of Events",context:"CALENDAR OF EVENTS",hasComment:!0,store:"organization-budget-reviews",action:"reject",description:"Kindly verify that you would indeed like to\n                            reject the following calendar of events. Once rejected you will\n                            not be able to approve any of the activities or activity",comment:!0}}]},tabs:[{store:"organizaation-budgets",label:"Basic Details",content:"form",icon:"work",context:"Calendar of Events",count:1,formConf:{store:"organization-budgets",cancelTxt:"CANCEL",nextTxt:"SAVE",addStore:"organization-budgets",editStore:"organization-budgets",getStore:"organization-budgets"},detailsConf:[{label:"Applied Total",key:"total",icon:"account_balance",type:"currency"},{label:"Financial Year",key:"financial_year",icon:"calendar_today",type:"nested",fieldType:"nested_range",primaryField:"financial_year_data.starts_on",secondaryField:"financial_year_data.ends_on"},{label:"Status",key:"status",icon:"assessment",type:"status"},{label:"Organization Type",key:"organization",icon:"business",type:"nested",fieldType:"nested_string",primaryField:"organization_data.org_type_code"}],auditTrail:!0,orgSummary:!0,attachments:!0,totalsSummary:!0},{store:"branches",label:"Activities",content:"nested-list"},{store:"users",label:"Attachments",content:"attachments",gridConf:{getStore:"organisations",editStore:"organisations"},topActions:[{btnText:"ADD USER",status:"info",icon:"true",action:"inline",conf:{context:"USER",store:"users",btnText:"SAVE"}}],rows:[{key:"first_name",type:"string"},{key:"last_name",type:"string"},{key:"phone_number",type:"string"},{key:"email",type:"string"}],headers:[{title:"Names"},{title:"."},{title:"Phone Number"},{title:"Email"},{title:"Actions",oderable:!1,searchable:!1}],actions:[{btnText:"EDIT",status:"info",icon:!1,disableStatus:"FINISHED",action:"inline",modalConf:{store:"users",titleKey:"name",context:"Users",btnText:"SAVE"}}]}]},{key:"organization",tabs:[{store:"organisations",label:"Basic Details",content:"form",count:1,formConf:{store:"organisations",cancelTxt:"CANCEL",nextTxt:"SAVE",addStore:"organisations",editStore:"organisations",getStore:"organisations"},detailsConf:[{label:"Name",key:"name",icon:"business"},{label:"Organization Type",key:"org_type_code",icon:"account_balance"},{label:"Phone #",key:"phone_number",icon:"phone"},{label:"Email",key:"email",icon:"email"}],bankConfs:[{title:"Account Name",key:"account_name"},{title:"Account #",key:"account_number"},{title:"Bank",key:"bank_name"},{title:"Branch",key:"branch_name"}]},{store:"organization-members",label:"Athletes & Officials",content:"grid",modelKey:"organization",gridConf:{getStore:"organization-members",editStore:"organization-members"},topActions:[{btnText:"ADD MEMBER",status:"info",icon:"true",action:"inline",conf:{context:"MEMBER",store:"organization-members",btnText:"SAVE"}}],rows:[{key:"federation_number",fieldType:"nested_string",type:"nested",primaryField:"user.federation_number"},{key:"user.first_name",fieldType:"nested_multistrings",type:"nested",primaryField:"user.first_name",secondaryField:"user.last_name"},{key:"user.dob",fieldType:"nested_string",type:"nested",primaryField:"user.dob"},{key:"user.email",fieldType:"nested_string",type:"nested",primaryField:"user.email"},{key:"user.phone_number",fieldType:"nested_string",type:"nested",primaryField:"user.phone_number"},{key:"sports_category",type:"nested",fieldType:"nested_string",primaryField:"sports_category_data.name"}],headers:[{title:"Federation #"},{title:"Names"},{title:"Date of Birth"},{title:"Email"},{title:"Phone #"},{title:"Sports Category"},{title:"Actions",oderable:!1,searchable:!1}],actions:[{btnText:"EDIT",status:"info",icon:!1,disableStatus:"FINISHED",action:"inline",modalConf:{store:"organization-members",titleKey:"first_name",context:"MEMBER",btnText:"SAVE"}}]}]}];var o=i("8Y7J");let c=(()=>{class t{constructor(){this.configArray=a}getTabs(t){return n.find(this.configArray,{key:t})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Kb({token:t,factory:t.\u0275fac}),t})()},nH2V:function(t,e,i){"use strict";i.d(e,"a",(function(){return gi}));var n=i("HDdC"),a=i("LvDl"),o=i("buby"),c=i("s7LF"),s=i("iELJ"),r=i("8Y7J"),l=i("zHaW"),b=i("SVse"),d=i("pMoy"),g=i("Tj54"),p=i("Dxy4"),u=i("Q2Ze"),m=i("e6WT");function f(t,e){if(1&t){const t=r.Vb();r.Ub(0,"li"),r.Ub(1,"div",16),r.Ub(2,"div"),r.Ub(3,"mat-checkbox",17),r.cc("ngModelChange",(function(i){return r.Ac(t),e.$implicit.approved=i}))("ngModelChange",(function(){return r.Ac(t),r.gc(2).updateAllApproved()})),r.Ub(4,"div",18),r.Ub(5,"div",19),r.Mc(6),r.Tb(),r.Ub(7,"div",20),r.Ub(8,"div",21),r.Ub(9,"span",11),r.Mc(10,"Amount:"),r.Tb(),r.Mc(11),r.hc(12,"currency"),r.Tb(),r.Ub(13,"div",22),r.Ub(14,"div"),r.Ub(15,"mat-icon",21),r.Mc(16,"calendar_today"),r.Tb(),r.Tb(),r.Ub(17,"div",23),r.Mc(18),r.hc(19,"date"),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Pb(20,"div"),r.Tb(),r.Tb()}if(2&t){const t=e.$implicit;r.Bb(3),r.nc("ngModel",t.approved),r.Bb(3),r.Oc(" ",null==t?null:t.title," "),r.Bb(5),r.Oc(" ",r.jc(12,4,null==t?null:t.estimated_amount,"Kshs ")," "),r.Bb(7),r.Nc(r.jc(19,7,null==t?null:t.activity_date,"dd-MM-yyyy"))}}function h(t,e){if(1&t){const t=r.Vb();r.Ub(0,"div",8),r.Ub(1,"div",9),r.Ub(2,"mat-checkbox",10),r.cc("change",(function(e){return r.Ac(t),r.gc().setAllApproved(e.checked)})),r.Ub(3,"span",11),r.Mc(4,"Select to approve all activities"),r.Tb(),r.Tb(),r.Tb(),r.Pb(5,"div",12),r.Ub(6,"div",13),r.Ub(7,"ul",14),r.Kc(8,f,21,10,"li",15),r.Tb(),r.Tb(),r.Tb()}if(2&t){const t=r.gc();r.Bb(2),r.nc("checked",t.allApproved)("indeterminate",t.someApproved()),r.Bb(6),r.nc("ngForOf",t.activities)}}function T(t,e){if(1&t){const t=r.Vb();r.Ub(0,"div",24),r.Ub(1,"div",25),r.Ub(2,"input",26),r.cc("change",(function(e){return r.Ac(t),r.gc().fileChange(e)})),r.Tb(),r.Ub(3,"label",27),r.Ub(4,"div",28),r.Ub(5,"mat-icon",24),r.Mc(6),r.Tb(),r.Tb(),r.Ub(7,"div",29),r.Mc(8),r.Tb(),r.Tb(),r.Tb(),r.Tb()}if(2&t){const t=r.gc();r.Bb(2),r.nc("hidden",!0),r.Bb(4),r.Oc(" ",t.fileName?"attachment":"cloud_upload"," "),r.Bb(2),r.Oc(" ",t.fileName||"Upload Approval Attachments"," ")}}function v(t,e){if(1&t){const t=r.Vb();r.Ub(0,"div",30),r.Ub(1,"button",31),r.cc("click",(function(){return r.Ac(t),r.gc().closeDialog()})),r.Mc(2,"CLOSE"),r.Tb(),r.Ub(3,"button",32),r.cc("click",(function(){r.Ac(t);const e=r.gc();return e.dialogActions[e.data.configs.action]()})),r.Mc(4),r.Tb(),r.Tb()}if(2&t){const t=r.gc();r.Bb(3),r.Gb("spinner",t.loading),r.nc("disabled",t.loading),r.Bb(1),r.Oc(" ",(null==t.data?null:t.data.action)||"SUBMIT"," ")}}function y(t,e){1&t&&(r.Ub(0,"div"),r.Mc(1," Comment is required "),r.Tb())}function U(t,e){if(1&t&&(r.Ub(0,"div",43),r.Kc(1,y,2,0,"div",44),r.Tb()),2&t){const t=r.gc(2);r.Bb(1),r.nc("ngIf",t.f.comment.errors.required)}}function _(t,e){if(1&t){const t=r.Vb();r.Ub(0,"div",33),r.Ub(1,"form",34),r.cc("ngSubmit",(function(){r.Ac(t);const e=r.gc();return e.submitComment(e.commentForm)})),r.Ub(2,"div",35),r.Ub(3,"div",36),r.Ub(4,"mat-form-field",37),r.Ub(5,"mat-label"),r.Mc(6,"Enter a comment"),r.Tb(),r.Pb(7,"textarea",38),r.Tb(),r.Tb(),r.Kc(8,U,2,1,"div",39),r.Tb(),r.Ub(9,"div",40),r.Ub(10,"button",41),r.cc("click",(function(){return r.Ac(t),r.gc().closeDialog()})),r.Mc(11,"CLOSE"),r.Tb(),r.Ub(12,"button",42),r.Mc(13,"SUBMIT"),r.Tb(),r.Tb(),r.Tb(),r.Tb()}if(2&t){const t=r.gc();r.Bb(1),r.nc("formGroup",t.commentForm),r.Bb(7),r.nc("ngIf",t.f.comment.invalid&&(t.f.comment.touched||t.f.comment.dirty)),r.Bb(4),r.Gb("spinner",t.loading),r.nc("disabled",t.loading)}}function O(t,e){1&t&&(r.Ub(0,"div"),r.Mc(1," Approved amount is required "),r.Tb())}function M(t,e){if(1&t&&(r.Ub(0,"div",43),r.Kc(1,O,2,0,"div",44),r.Tb()),2&t){const t=r.gc(2);r.Bb(1),r.nc("ngIf",t.rA.revised_amount.errors.required)}}function A(t,e){if(1&t){const t=r.Vb();r.Ub(0,"div",33),r.Ub(1,"form",34),r.cc("ngSubmit",(function(){r.Ac(t);const e=r.gc();return e.submitRevisedAmount(e.revisedAmountForm)})),r.Ub(2,"div",35),r.Ub(3,"div",36),r.Ub(4,"mat-form-field",37),r.Ub(5,"mat-label"),r.Mc(6,"Approved Amount"),r.Tb(),r.Pb(7,"input",45),r.Tb(),r.Ub(8,"div",46),r.Mc(9),r.hc(10,"currency"),r.Tb(),r.Tb(),r.Kc(11,M,2,1,"div",39),r.Tb(),r.Ub(12,"div",40),r.Ub(13,"button",41),r.cc("click",(function(){return r.Ac(t),r.gc().closeDialog()})),r.Mc(14,"CLOSE"),r.Tb(),r.Ub(15,"button",42),r.Mc(16,"SUBMIT"),r.Tb(),r.Tb(),r.Tb(),r.Tb()}if(2&t){const t=r.gc();r.Bb(1),r.nc("formGroup",t.revisedAmountForm),r.Bb(8),r.Nc(r.jc(10,6,t.rA.revised_amount.value,"Kshs ")),r.Bb(2),r.nc("ngIf",t.rA.revised_amount.invalid&&(t.rA.revised_amount.touched||t.rA.revised_amount.dirty)),r.Bb(4),r.Gb("spinner",t.loading),r.nc("disabled",t.loading)}}let x=(()=>{class t{constructor(t,e,i,n,a){this.data=t,this._formBuilder=e,this._snackBar=i,this._dataLayer=n,this.dialogRef=a,this.activities=[],this.allApproved=!1,this.attachedDoc={},this.dialogActions={submitApplication:()=>{this.getUserOrganization(),this.loading=!0,this.transitionDocument({comment:this.comment||"Application submitted",review_status:"SUBMITTED",organization:this.organization,application:this.data.item.id},{successMsg:"Record has been submitted successfully"})},firstApproveApplication:()=>{this.getUserOrganization(),this.loading=!0,this.transitionDocument({comment:this.comment||"Application authorized",review_status:"FIRST_LEVEL_APPROVED",organization:this.organization,application:this.data.item.id},{successMsg:"Record has been authorized successfully"})},authorizeApplication:t=>{this.getUserOrganization(),this.loading=!0,this._dataLayer.update("applications",this.data.item.id,{revised_amount:t},{key:"current_org_id",value:this.organization}).subscribe(t=>{this.dialogActions.firstApproveApplication()},t=>{console.log(t),this._dataLayer.openDynamicSnackBar("An error occurred while authorizing application","error")})},rationalizeApplication:t=>{this.getUserOrganization();const e={comment:t||"Application rationalized",review_status:"RATIONALIZED",organization:this.organization,application:this.data.item.id},i={key:"current_org_id",value:this.organization};this.loading=!0,this._dataLayer.create(this.data.configs.store,e,void 0,i).subscribe(t=>{console.log(t),this.loading=!1,this.closeDialog("refresh"),this._dataLayer.openDynamicSnackBar("Application rationalized successfully","success")},t=>{console.log(t),this.loading=!1,this._dataLayer.openDynamicSnackBar("An error occurred","error")})},approveApplication:t=>{this.getUserOrganization(),this.loading=!0,this._dataLayer.create(this.data.configs.store,{comment:t||"Calendar of events approved",review_status:"SASDEF_APPROVED",organization:this.organization,application:this.data.item.id},void 0,{key:"current_org_id",value:this.organization}).subscribe(t=>{this.loading=!1,this.closeDialog("refresh"),this._dataLayer.openDynamicSnackBar("Application has been approved successfully","success")},t=>{console.log(t),this.loading=!1,this._dataLayer.openDynamicSnackBar("An error occurred","error")})},rejectApplication:t=>{this.getUserOrganization(),this.loading=!0,this._dataLayer.create(this.data.configs.store,{comment:this.comment||"Application rejected",review_status:"REJECTED",organization:this.organization,application:this.data.item.id},void 0,{key:"current_org_id",value:this.organization}).subscribe(t=>{this.loading=!1,this.closeDialog("refresh"),this._dataLayer.openDynamicSnackBar("Application has been rejected successfully","success")},t=>{console.log(t),this.loading=!1,this._dataLayer.openDynamicSnackBar("An error occurred","error")})},update:()=>{this.getUserOrganization(),this.loading=!0,this._dataLayer.update(this.data.configs.store,this.data.item.id,{status:"SUBMITTED"},{key:"current_org_id",value:this.organization}).subscribe(t=>{this.loading=!1,this.closeDialog("refresh"),this.openSnackBar("Record has been submitted successfully","CLOSE")},t=>{console.log(t),this.loading=!1,this.openSnackBar("An error occurred","CLOSE")})},submitted:()=>{this.getUserOrganization(),this.loading=!0,this._dataLayer.create(this.data.configs.store,{comment:this.comment||"Budget submitted",review_status:"SUBMITTED",organization:this.organization,org_budget:this.data.item.id}).subscribe(t=>{this.loading=!1,this.closeDialog("refresh"),this._dataLayer.openDynamicSnackBar("Budget has been submitted successfully","success")},t=>{console.log(t),this.loading=!1,this._dataLayer.openDynamicSnackBar("An error occurred","error")})},approve:t=>{this.getUserOrganization(),this.loading=!0,this._dataLayer.create(this.data.configs.store,{comment:t||"Calendar of events approved",review_status:"SASDEF_APPROVED",organization:this.organization,org_budget:this.data.item.id}).subscribe(t=>{this.loading=!1,this.closeDialog("refresh"),this._dataLayer.openDynamicSnackBar("Calendar of events has been approved successfully","success")},t=>{console.log(t),this.loading=!1,this._dataLayer.openDynamicSnackBar("An error occurred","error")})},rationalize:t=>{this.getUserOrganization();const e={comment:t||"Calendar of events rationalized",review_status:"RATIONALIZED",organization:this.organization,org_budget:this.data.item.id},i={key:"current_org_id",value:this.organization};this.loading=!0,this._dataLayer.create(this.data.configs.store,e,void 0,i).subscribe(t=>{console.log(t),this.loading=!1,this.closeDialog("refresh"),this._dataLayer.openDynamicSnackBar("Calendar of events rationalized successfully","success")},t=>{console.log(t),this.loading=!1,this._dataLayer.openDynamicSnackBar("An error occurred","error")})},approveBudget:t=>{const e={key:"current_org_id",value:this.organization};this.loading=!0,this.activities.forEach((i,n)=>{this._dataLayer.update("organization-budget-activities",i.id,{status:i.approved?"APPROVED":"REJECTED"},e).subscribe(e=>{n===this.activities.length-1&&this.dialogActions.approve(t)},t=>{console.log(t),this.loading=!1})})},reject:t=>{this.getUserOrganization(),this.loading=!0,this._dataLayer.create(this.data.configs.store,{comment:t||"Calendar of events rejected",review_status:"REJECTED",organization:this.organization,org_budget:this.data.item.id}).subscribe(t=>{this.loading=!1,this.closeDialog("refresh"),this._dataLayer.openDynamicSnackBar("Calendar of events has been rejected successfully","success")},t=>{console.log(t),this.loading=!1,this.openSnackBar("An error occurred","CLOSE")})}}}setFileName(){const t=this.attachedDoc.file.split("/");this.fileName=t[t.length-1]}formInit(){this.commentForm=this._formBuilder.group({comment:["",c.D.required]}),this.revisedAmountForm=this._formBuilder.group({revised_amount:["",c.D.required]}),Object(a.has)(this.data.configs,"revisedAmount")&&this.rA.revised_amount.setValue(this.data.item.amount_requested)}openSnackBar(t,e){this._snackBar.open(t,e,{duration:4e3})}getUserOrganization(){const t=JSON.parse(localStorage.getItem("organization"));this.organization=Object(a.get)(t,"organization",null)}transitionDocument(t,e){this._dataLayer.create(this.data.configs.store,t).subscribe(t=>{this.loading=!1,this.closeDialog("refresh"),this._dataLayer.openDynamicSnackBar(e.successMsg,"success"),Object(a.isUndefined)(this.fileName)||this._dataLayer.create("application-review-attachments",{organization:this.organization,application_review:t.id,attachment:this.attachedDoc.id},void 0,{key:"current_org_id",value:this.organization}).subscribe(t=>{},t=>{console.log(t),this._dataLayer.openDynamicSnackBar("An error occurred","error")})},t=>{console.log(t),this.loading=!1,this._dataLayer.openDynamicSnackBar("An error occurred","error")})}submitComment(t){t.valid&&this.dialogActions[this.data.configs.action](t.value.comment)}submitRevisedAmount(t){t.valid&&this.dialogActions[this.data.configs.action](t.value.revised_amount)}get f(){return this.commentForm.controls}get rA(){return this.revisedAmountForm.controls}submitAction(){console.log("Submit called")}closeDialog(t){this.dialogRef.close(t)}updateAllApproved(){this.allApproved=!Object(a.isEmpty)(this.activities)&&this.activities.every(t=>t.approved)}someApproved(){return!Object(a.isEmpty)(this.activities)&&this.activities.filter(t=>t.approved).length>0&&!this.allApproved}setAllApproved(t){this.allApproved=t,Object(a.isEmpty)(this.activities)||this.activities.forEach(e=>e.approved=t)}fetchNested(){this.getUserOrganization(),this._dataLayer.list("organization-budget-activities",{current_org_id:this.organization,org_budget:this.data.item.id}).subscribe(t=>{this.activities=t.results,this.setAllApproved(!0)},t=>{console.log(t)})}fileChange(t){const e={file:t.target.files[0],attachment_type:"APPLICATION_DOCUMENT"},i=new FormData;i.append("file",e.file),i.append("attachment_type",e.attachment_type),this._dataLayer.uploadFile("attachments",i).subscribe(t=>{this.attachedDoc=t,this.setFileName()},t=>{console.log(t)})}ngOnInit(){this.formInit(),"organization-budget-reviews"===this.data.configs.store&&this.fetchNested()}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(s.a),r.Ob(c.g),r.Ob(l.b),r.Ob(o.a),r.Ob(s.g))},t.\u0275cmp=r.Ib({type:t,selectors:[["tabbed-dialog"]],features:[r.Ab([o.a])],decls:13,vars:7,consts:[[1,"px-16","pt-8","pb-20"],["mat-dialog-title","",1,"pb-3","d-flex"],[1,"title-text","flex-fill"],["mat-dialog-content","",1,""],["class","pt-4",4,"ngIf"],["class","",4,"ngIf"],["mat-dialog-actions","","class","pt-5 pb-4 d-flex justify-content-end",4,"ngIf"],["mat-dialog-actions","","class","w-100-p pt-16 pb-4",4,"ngIf"],[1,"pt-4"],[1,"list-section","mb-n1","pt-16"],[1,"",3,"checked","indeterminate","change"],[1,"text-muted"],[1,"border-bottom","mt-2"],[1,"list-section","mt-0"],[1,"list-unstyled"],[4,"ngFor","ngForOf"],[1,"d-flex","align-items-center"],[3,"ngModel","ngModelChange"],[1,"pl-8","pt-2"],[1,"mb-n1"],[1,"d-flex"],[1,"font-size-14"],[1,"pl-3","font-size-14","d-flex"],[1,"ml-n2"],[1,""],[1,"attachemnt-wrapper","mb-1","pt-3"],["type","file","id","input-attachment",1,"ng-hide",3,"hidden","change"],["for","input-attachment",1,"mat-button","w-100-p","d-flex","pl-16","mat-elevation-z1","pt-2"],[1,"mt-2","pr-2"],[1,"pl-2"],["mat-dialog-actions","",1,"pt-5","pb-4","d-flex","justify-content-end"],["mat-button","","mat-dialog-close","",3,"click"],["mat-button","",3,"disabled","click"],["mat-dialog-actions","",1,"w-100-p","pt-16","pb-4"],["name","fmr",1,"w-100-p",3,"formGroup","ngSubmit"],[1,"w-100-p","pt-1"],[1,"input-wrapper","w-100-p"],["appearance","outline","color","primary",1,"w-100-p","pb-0","mb-0"],["name","comment","matInput","","id","","cols","30","rows","6","placeholder","Kindly enter a comment...","formControlName","comment"],["class","invalid-feedback",4,"ngIf"],[1,"btn-container","d-flex","justify-content-end"],["mat-button","","mat-dialog-close","","type","button",3,"click"],["mat-button","","type","submit",3,"disabled"],[1,"invalid-feedback"],[4,"ngIf"],["name","revised_amount","matInput","","placeholder","Kindly enter a approved amount...","formControlName","revised_amount"],[1,"mt-n4","text-muted"]],template:function(t,e){1&t&&(r.Ub(0,"div",0),r.Ub(1,"div",1),r.Ub(2,"div",2),r.Mc(3),r.Tb(),r.Pb(4,"div"),r.Tb(),r.Ub(5,"div",3),r.Ub(6,"div"),r.Mc(7),r.Tb(),r.Kc(8,h,9,3,"div",4),r.Kc(9,T,9,3,"div",5),r.Tb(),r.Kc(10,v,5,4,"div",6),r.Kc(11,_,14,5,"div",7),r.Kc(12,A,17,9,"div",7),r.Tb()),2&t&&(r.Bb(3),r.Nc((null==e.data?null:e.data.configs.title)||"SUBMIT"),r.Bb(4),r.Nc(null==e.data?null:e.data.configs.description),r.Bb(1),r.nc("ngIf",null==e.data?null:e.data.configs.approveNested),r.Bb(1),r.nc("ngIf",null==e.data?null:e.data.configs.reviewAttachment),r.Bb(1),r.nc("ngIf",!(null!=e.data&&e.data.configs.comment||null!=e.data&&e.data.configs.revisedAmount)),r.Bb(1),r.nc("ngIf",null==e.data?null:e.data.configs.comment),r.Bb(1),r.nc("ngIf",null==e.data?null:e.data.configs.revisedAmount))},directives:[s.h,s.e,b.t,d.a,b.s,c.r,c.u,g.a,s.c,p.b,s.d,c.F,c.s,c.l,u.c,u.g,m.b,c.e,c.j],pipes:[b.d,b.f],styles:['@-webkit-keyframes spinner{to{transform:rotate(1turn)}}@keyframes spinner{to{transform:rotate(1turn)}}[_nghost-%COMP%]     .spinner:before{content:"";box-sizing:border-box;position:absolute;top:50%;left:50%;width:20px;height:20px;margin-top:-10px;margin-left:-10px;border-radius:50%;border:2px solid #fff;border-top-color:#000;-webkit-animation:spinner .8s linear infinite;animation:spinner .8s linear infinite}']}),t})();var I=i("919n"),C=i("iInd"),w=i("7ZA2"),B=i("LdEM"),k=i("PDjf"),z=i("M9ds"),S=i("xsX5"),E=i("f5Zh");function P(t,e){if(1&t&&(r.Ub(0,"th",10),r.Mc(1),r.Tb()),2&t){const t=e.$implicit;r.Bb(1),r.Oc(" ",null==t?null:t.title," ")}}function D(t,e){1&t&&(r.Ub(0,"mat-icon"),r.Mc(1," remove "),r.Tb())}function F(t,e){if(1&t&&(r.Ub(0,"div"),r.Ub(1,"span"),r.Mc(2),r.hc(3,"removeUnderscore"),r.Tb(),r.Kc(4,D,2,0,"mat-icon",12),r.Tb()),2&t){const t=r.gc().$implicit,e=r.gc();r.Bb(2),r.Nc(r.ic(3,2,e.organization[t.key])),r.Bb(2),r.nc("ngIf",!e.organization[t.key])}}function K(t,e){if(1&t&&(r.Ub(0,"td",11),r.Kc(1,F,5,4,"div",12),r.Tb()),2&t){const t=r.gc();r.Bb(1),r.nc("ngIf",t.organization)}}let N=(()=>{class t{constructor(){this.gridConf=[{title:"Name",key:"name"},{title:"Phone #",key:"phone_number"},{title:"Email",key:"email"},{title:"Organization Type",key:"org_type_code"}]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Ib({type:t,selectors:[["organization-summary"]],inputs:{organization:"organization"},decls:19,vars:2,consts:[[1,"w-100-p","pt-3"],[1,"px-5","pt-5","pb-3"],[1,"card"],[1,"card-header","pt-2","pb-1"],[1,"pl-3","text-muted","font-weight-bold","pb-2","d-flex","align-items-center"],[1,"pt-2","pr-2"],[1,"card-body","px-0","pb-1","pt-0"],[1,"table","borderless","font-size-13","mb-0"],["class","border-0 pl-20 font-size-12",4,"ngFor","ngForOf"],["class","pl-20",4,"ngFor","ngForOf"],[1,"border-0","pl-20","font-size-12"],[1,"pl-20"],[4,"ngIf"]],template:function(t,e){1&t&&(r.Ub(0,"div",0),r.Ub(1,"div",1),r.Ub(2,"div",2),r.Ub(3,"div",3),r.Ub(4,"div",4),r.Ub(5,"div",5),r.Ub(6,"mat-icon"),r.Mc(7,"business"),r.Tb(),r.Mc(8,"\xa0"),r.Tb(),r.Ub(9,"div"),r.Mc(10,"Organization"),r.Tb(),r.Tb(),r.Tb(),r.Ub(11,"div",6),r.Ub(12,"div"),r.Ub(13,"table",7),r.Ub(14,"thead"),r.Kc(15,P,2,1,"th",8),r.Tb(),r.Ub(16,"tbody"),r.Ub(17,"tr"),r.Kc(18,K,2,1,"td",9),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb()),2&t&&(r.Bb(15),r.nc("ngForOf",e.gridConf),r.Bb(3),r.nc("ngForOf",e.gridConf))},directives:[g.a,b.s,b.t],pipes:[E.a],encapsulation:2}),t})();var L=i("B6Hu");function j(t,e){if(1&t){const t=r.Vb();r.Ub(0,"div",18),r.Ub(1,"div",19),r.Ub(2,"mat-card",20),r.Ub(3,"div",21),r.Ub(4,"div",22),r.Ub(5,"div",23),r.Mc(6," ADD M&E "),r.Tb(),r.Ub(7,"div"),r.Ub(8,"span",24),r.cc("click",(function(){return r.Ac(t),r.gc(2).toggleCreateForm()})),r.Mc(9," \xd7 "),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Ub(10,"div",25),r.Ub(11,"dynamic-form",26),r.cc("cancelFxn",(function(){return r.Ac(t),r.gc(2).toggleCreateForm()}))("submitModel",(function(e){return r.Ac(t),r.gc(2).receiveModel(e)})),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb()}if(2&t){const t=r.gc(2);r.Bb(11),r.nc("submitted",t.submitted)("baseCancel",!0)}}function R(t,e){if(1&t&&(r.Ub(0,"th",15),r.Mc(1),r.Tb()),2&t){const t=e.$implicit;r.Bb(1),r.Oc(" ",t.title," ")}}function V(t,e){if(1&t&&(r.Ub(0,"div"),r.Ub(1,"div"),r.Mc(2),r.Ub(3,"span",32),r.Mc(4,"\xa0Attendees"),r.Tb(),r.Tb(),r.Ub(5,"div"),r.Mc(6),r.hc(7,"number"),r.Ub(8,"span",32),r.Mc(9,"\xa0days\xa0"),r.Tb(),r.Ub(10,"span"),r.Mc(11,"\xa0@\xa0"),r.Tb(),r.Ub(12,"span"),r.Mc(13),r.hc(14,"currency"),r.Tb(),r.Tb(),r.Tb()),2&t){const t=r.gc().$implicit,e=r.gc().$implicit;r.Bb(2),r.Oc(" ",e[t.key]," "),r.Bb(4),r.Oc(" ",r.jc(7,3,e.days,"1.0")," "),r.Bb(7),r.Oc(" \xa0",r.jc(14,6,e.unit_price,"Kshs ")," ")}}function $(t,e){if(1&t&&(r.Ub(0,"div"),r.Mc(1),r.hc(2,"currency"),r.Tb()),2&t){const t=r.gc(2).$implicit;r.Bb(1),r.Oc(" ",r.jc(2,1,t.head_count*t.days*t.unit_price,"Kshs ")," ")}}function q(t,e){if(1&t&&(r.Ub(0,"div"),r.Mc(1),r.Tb()),2&t){const t=r.gc().$implicit,e=r.gc().$implicit;r.Bb(1),r.Oc(" ",e[t.key]," ")}}function G(t,e){1&t&&(r.Ub(0,"mat-icon"),r.Mc(1," remove "),r.Tb())}function J(t,e){if(1&t&&(r.Ub(0,"td",31),r.Kc(1,V,15,9,"div",17),r.Kc(2,$,3,4,"div",17),r.Kc(3,q,2,1,"div",17),r.Kc(4,G,2,0,"mat-icon",17),r.Tb()),2&t){const t=e.$implicit,i=r.gc().$implicit;r.nc("hidden",i.showInline),r.Bb(1),r.nc("ngIf","head_count"===t.key),r.Bb(1),r.nc("ngIf","total"===t.key),r.Bb(1),r.nc("ngIf","head_count"!==t.key&&"total"!==t.key),r.Bb(1),r.nc("ngIf",!i[t.key]&&"total"!==t.key)}}function H(t,e){if(1&t){const t=r.Vb();r.Ub(0,"td",33),r.Ub(1,"div",34),r.Ub(2,"mat-card",20),r.Ub(3,"div",21),r.Ub(4,"div",22),r.Ub(5,"div",23),r.Mc(6," EDIT BANK DETAILS "),r.Tb(),r.Ub(7,"div"),r.Ub(8,"span",24),r.cc("click",(function(){r.Ac(t);const e=r.gc().$implicit;return r.gc(2).toggleForm(e)})),r.Mc(9," \xd7 "),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Ub(10,"div",25),r.Ub(11,"dynamic-form",35),r.cc("cancelFxn",(function(){r.Ac(t);const e=r.gc().$implicit;return r.gc(2).toggleForm(e)}))("submitModel",(function(e){return r.Ac(t),r.gc(3).receiveModel(e)})),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb()}if(2&t){const t=r.gc().$implicit,e=r.gc(2);r.Cb("colspan",(null==e.tab?null:e.tab.bankConfs.length)+1),r.Bb(11),r.nc("model",t)("submitted",e.submitted)("baseCancel",!0)}}function Z(t,e){if(1&t){const t=r.Vb();r.Ub(0,"tr"),r.Kc(1,J,5,5,"td",27),r.Ub(2,"td",28),r.Ub(3,"button",29),r.cc("click",(function(){r.Ac(t);const i=e.$implicit;return r.gc(2).toggleForm(i)})),r.Mc(4," Edit "),r.Tb(),r.Tb(),r.Kc(5,H,12,4,"td",30),r.Tb()}if(2&t){const t=e.$implicit,i=r.gc(2);r.Bb(1),r.nc("ngForOf",i.gridConf),r.Bb(1),r.nc("hidden",t.showInline),r.Bb(3),r.nc("ngIf",t.showInline)}}function Y(t,e){if(1&t&&(r.Ub(0,"tr"),r.Ub(1,"td",36),r.Ub(2,"div",37),r.Ub(3,"div",38),r.Ub(4,"div",39),r.Ub(5,"div",40),r.Ub(6,"mat-icon"),r.Mc(7," info_circle "),r.Tb(),r.Tb(),r.Ub(8,"div",7),r.Mc(9," There is currently no Monitoring & Evaluation details added for this application. "),r.Tb(),r.Pb(10,"div",41),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb()),2&t){const t=r.gc(2);r.Bb(1),r.Cb("colspan",t.gridConf.length+1)}}function Q(t,e){if(1&t){const t=r.Vb();r.Ub(0,"div",1),r.Ub(1,"div",2),r.Ub(2,"div",3),r.Ub(3,"div",4),r.Ub(4,"div",5),r.Ub(5,"div",6),r.Ub(6,"mat-icon"),r.Mc(7,"people"),r.Tb(),r.Mc(8,"\xa0"),r.Tb(),r.Ub(9,"div",7),r.Mc(10,"Monitoring & Evaluation"),r.Tb(),r.Ub(11,"div",8),r.Ub(12,"button",9),r.cc("click",(function(){return r.Ac(t),r.gc().toggleCreateForm()})),r.Ub(13,"mat-icon"),r.Mc(14,"add"),r.Tb(),r.Mc(15,"\xa0 ADD M&E "),r.Tb(),r.Tb(),r.Tb(),r.Kc(16,j,12,2,"div",10),r.Tb(),r.Ub(17,"div",11),r.Ub(18,"div"),r.Ub(19,"table",12),r.Ub(20,"thead",13),r.Kc(21,R,2,1,"th",14),r.Pb(22,"th",15),r.Tb(),r.Ub(23,"tbody"),r.Kc(24,Z,6,3,"tr",16),r.Kc(25,Y,11,1,"tr",17),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb()}if(2&t){const t=r.gc();r.Bb(16),r.nc("ngIf",t.showForm),r.Bb(5),r.nc("ngForOf",t.gridConf),r.Bb(3),r.nc("ngForOf",t.list),r.Bb(1),r.nc("ngIf",!(null!=t.list&&t.list.length))}}let W=(()=>{class t{constructor(t,e){this._dataLayer=t,this._authConfig=e,this.list=[],this.gridConf=[{title:"Attendees",key:"head_count"},{title:"Total",key:"total"},{title:"Description",key:"description"}],this.postObj={organiazation:"",application:"",amount:"",quantity:"",description:""}}toggleForm(t){t.showInline=!t.showInline}toggleCreateForm(){this.showForm=!this.showForm}getList(){this.loading=!0,this._dataLayer.list("application-mes",{current_org_id:this.orgId,application:this.item.id}).subscribe(t=>{this.loading=!1,this.list=t.results},t=>{this.loading=!1,console.log(t)})}receiveModel(t){Object(a.has)(t,"id")?this._dataLayer.update("application-mes",t.id,t,{key:"current_org_id",value:this.orgId}).subscribe(()=>{this.getList()},t=>console.log(t)):(t=Object.assign(Object.assign({},t),{organization:this.orgId,application:this.item.id}),this._dataLayer.create("application-mes",t,void 0,{key:"current_org_id",value:this.orgId}).subscribe(()=>{this.getList(),this.toggleCreateForm(),this._dataLayer.openDynamicSnackBar("M&E Item succesfully added","success")},t=>{this._dataLayer.openDynamicSnackBar("An error occurred while adding M&E item. Try again","error")}))}ngOnInit(){const t=JSON.parse(this._authConfig.getOrganization());this.orgId=Object(a.get)(t,"organization",null),this.orgType=Object(a.get)(t,"org_type",null),this.getList()}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(o.a),r.Ob(w.a))},t.\u0275cmp=r.Ib({type:t,selectors:[["application-me"]],inputs:{item:"item"},decls:1,vars:1,consts:[["class","px-20 pt-20 pb-12",4,"ngIf"],[1,"px-20","pt-20","pb-12"],[1,"px-20"],[1,"card"],[1,"card-header","pt-3","bg-white"],[1,"pl-3","text-muted","font-weight-bold","pb-2","d-flex","align-items-center"],[1,"pt-2","pr-2"],[1,"flex-fill"],[1,"pt-2"],["mat-raised-button","","color","default",1,"pl-3","mt-n2",3,"click"],["class","col-12 bg-light py-16","style","margin: auto;",4,"ngIf"],[1,"card-body","px-0","pb-1","pt-0"],[1,"table","borderless","font-size-13"],[1,"thead-light","font-size-12"],["class","border-0 pl-20",4,"ngFor","ngForOf"],[1,"border-0","pl-20"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-12","bg-light","py-16",2,"margin","auto"],[1,"col-lg-9",2,"margin","auto"],[1,"card","p-0"],[1,"card-header","py-0"],[1,"d-flex"],[1,"flex-fill","pt-3"],[1,"font-size-28","text-muted",2,"cursor","pointer",3,"click"],[1,"card-body","px-5","pt-5"],["btnText","SAVE","btnClass","tiny","store","application-me","btnStatus","primary",3,"submitted","baseCancel","cancelFxn","submitModel"],["class","pl-20 vertical-align-center","valign","middle",3,"hidden",4,"ngFor","ngForOf"],["valign","middle",1,"vertical-align-center",3,"hidden"],["mat-stroked-button","","color","accent",3,"click"],["class","bg-light-grey py-3 px-5",4,"ngIf"],["valign","middle",1,"pl-20","vertical-align-center",3,"hidden"],[1,"text-muted"],[1,"bg-light-grey","py-3","px-5"],[1,"col-12","col-lg-8",2,"margin","auto"],["btnText","SAVE","btnClass","tiny","store","organization-bank-accounts","btnStatus","primary",3,"model","submitted","baseCancel","cancelFxn","submitModel"],[1,"pb-0","mb-0"],[1,"w-100-p","px-3"],[1,"alert","alert-primary","mb-0","pb-2","pt-3"],[1,"d-flex","align-items-center"],[1,"pr-20"],[1,"pr-8"]],template:function(t,e){1&t&&r.Kc(0,Q,26,4,"div",0),2&t&&r.nc("ngIf","SASDEF"===e.orgType)},directives:[b.t,g.a,p.b,b.s,k.a,L.a],pipes:[b.g,b.d],encapsulation:2}),t})();function X(t,e){if(1&t&&(r.Ub(0,"th",8),r.Mc(1),r.Tb()),2&t){const t=e.$implicit;r.Bb(1),r.Oc(" ",t.title," ")}}function tt(t,e){1&t&&(r.Ub(0,"mat-icon"),r.Mc(1," remove "),r.Tb())}function et(t,e){if(1&t&&(r.Ub(0,"td",15),r.Mc(1),r.Kc(2,tt,2,0,"mat-icon",10),r.Tb()),2&t){const t=e.$implicit,i=r.gc().$implicit;r.nc("hidden",i.showInline),r.Bb(1),r.Oc(" ",i[t.key]," "),r.Bb(1),r.nc("ngIf",!i[t.key])}}function it(t,e){if(1&t){const t=r.Vb();r.Ub(0,"td",16),r.Ub(1,"div",17),r.Ub(2,"mat-card",18),r.Ub(3,"div",19),r.Ub(4,"div",20),r.Ub(5,"div",21),r.Mc(6," EDIT BANK DETAILS "),r.Tb(),r.Ub(7,"div"),r.Ub(8,"span",22),r.cc("click",(function(){r.Ac(t);const e=r.gc().$implicit;return r.gc().toggleForm(e)})),r.Mc(9," \xd7 "),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Ub(10,"div",23),r.Ub(11,"dynamic-form",24),r.cc("cancelFxn",(function(){r.Ac(t);const e=r.gc().$implicit;return r.gc().toggleForm(e)}))("submitModel",(function(e){return r.Ac(t),r.gc(2).receiveModel(e)})),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb()}if(2&t){const t=r.gc().$implicit,e=r.gc();r.Cb("colspan",(null==e.tab?null:e.tab.bankConfs.length)+1),r.Bb(11),r.nc("model",t)("submitted",e.submitted)("baseCancel",!0)}}function nt(t,e){if(1&t){const t=r.Vb();r.Ub(0,"tr"),r.Kc(1,et,3,3,"td",11),r.Ub(2,"td",12),r.Ub(3,"button",13),r.cc("click",(function(){r.Ac(t);const i=e.$implicit;return r.gc().toggleForm(i)})),r.Mc(4," Edit "),r.Tb(),r.Tb(),r.Kc(5,it,12,4,"td",14),r.Tb()}if(2&t){const t=e.$implicit,i=r.gc();r.Bb(1),r.nc("ngForOf",null==i.tab?null:i.tab.bankConfs),r.Bb(1),r.nc("hidden",t.showInline),r.Bb(3),r.nc("ngIf",t.showInline)}}function at(t,e){if(1&t){const t=r.Vb();r.Ub(0,"td",26),r.Ub(1,"div",27),r.Ub(2,"div",28),r.Ub(3,"div",29),r.Ub(4,"div",30),r.Ub(5,"mat-icon"),r.Mc(6," info_circle "),r.Tb(),r.Tb(),r.Ub(7,"div",31),r.Mc(8," There is currently no bank account registered for this organization "),r.Tb(),r.Ub(9,"div",32),r.Ub(10,"button",33),r.cc("click",(function(){return r.Ac(t),r.gc(2).toggleCreateForm()})),r.Ub(11,"mat-icon"),r.Mc(12,"add"),r.Tb(),r.Mc(13,"\xa0 ADD ACCOUNT "),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb()}if(2&t){const t=r.gc(2);r.Cb("colspan",(null==t.tab?null:t.tab.bankConfs.length)+1)}}function ot(t,e){if(1&t){const t=r.Vb();r.Ub(0,"td",16),r.Ub(1,"div",17),r.Ub(2,"mat-card",18),r.Ub(3,"div",19),r.Ub(4,"div",20),r.Ub(5,"div",21),r.Mc(6," ADD BANK DETAILS "),r.Tb(),r.Ub(7,"div"),r.Ub(8,"span",22),r.cc("click",(function(){return r.Ac(t),r.gc(2).toggleCreateForm()})),r.Mc(9," \xd7 "),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Ub(10,"div",23),r.Ub(11,"dynamic-form",34),r.cc("cancelFxn",(function(){return r.Ac(t),r.gc(2).toggleCreateForm()}))("submitModel",(function(e){return r.Ac(t),r.gc(2).receiveModel(e)})),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb()}if(2&t){const t=r.gc(2);r.Cb("colspan",(null==t.tab?null:t.tab.bankConfs.length)+1),r.Bb(11),r.nc("submitted",t.submitted)("baseCancel",!0)}}function ct(t,e){if(1&t&&(r.Ub(0,"tr"),r.Kc(1,at,14,1,"td",25),r.Kc(2,ot,12,3,"td",14),r.Tb()),2&t){const t=r.gc();r.Bb(1),r.nc("ngIf",!t.showForm),r.Bb(1),r.nc("ngIf",t.showForm)}}let st=(()=>{class t{constructor(t,e){this._dataLayer=t,this._authConfig=e,this.loading=!0,this.list=[]}toggleForm(t){t.showInline=!t.showInline}toggleCreateForm(){this.showForm=!this.showForm}getBankAccount(){this._dataLayer.list("organization-bank-accounts",{current_org_id:this.organization,organization:this.parentKey?this.item[this.parentKey]:this.item.id}).subscribe(t=>{this.list=t.results,this.loading=!1},t=>{this.loading=!1,console.log(t)})}receiveModel(t){Object(a.has)(t,"id")?this._dataLayer.update("organization-bank-accounts",t.id,t,{key:"current_org_id",value:this.organization}).subscribe(()=>{this.getBankAccount()},t=>console.log(t)):(t=Object.assign(Object.assign({},t),{organization:this.item.id}),this._dataLayer.create("organization-bank-accounts",t).subscribe(()=>{this.getBankAccount()},t=>console.log(t)))}ngOnInit(){this.organization=Object(a.get)(JSON.parse(this._authConfig.getOrganization()),"organization",null),this.getBankAccount()}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(o.a),r.Ob(w.a))},t.\u0275cmp=r.Ib({type:t,selectors:[["tabbed-inline-list"]],inputs:{tab:"tab",item:"item",parentKey:"parentKey"},decls:18,vars:3,consts:[[1,"card"],[1,"card-header","pt-3","bg-white"],[1,"pl-3","text-muted","font-weight-bold","pb-2","d-flex","align-items-center"],[1,"pt-2","pr-2"],[1,"card-body","px-0","pb-1","pt-0"],[1,"table","borderless","font-size-13"],[1,"thead-light","font-size-12"],["class","border-0 pl-20",4,"ngFor","ngForOf"],[1,"border-0","pl-20"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","pl-20 vertical-align-center","valign","middle",3,"hidden",4,"ngFor","ngForOf"],["valign","middle",1,"vertical-align-center",3,"hidden"],["mat-stroked-button","","color","accent",3,"click"],["class","bg-light-grey py-3 px-5",4,"ngIf"],["valign","middle",1,"pl-20","vertical-align-center",3,"hidden"],[1,"bg-light-grey","py-3","px-5"],[1,"col-12","col-lg-8",2,"margin","auto"],[1,"card","p-0"],[1,"card-header","py-0"],[1,"d-flex"],[1,"flex-fill","pt-3"],[1,"font-size-28","text-muted",2,"cursor","pointer",3,"click"],[1,"card-body","px-5","pt-5"],["btnText","SAVE","btnClass","tiny","store","organization-bank-accounts","btnStatus","primary",3,"model","submitted","baseCancel","cancelFxn","submitModel"],["class","pb-0 mb-0",4,"ngIf"],[1,"pb-0","mb-0"],[1,"w-100-p","px-3"],[1,"alert","alert-primary","mb-0","pb-2","pt-3"],[1,"d-flex","align-items-center"],[1,"pr-20"],[1,"flex-fill"],[1,"pr-8"],["mat-raised-button","","color","default",1,"pl-3","mt-n2",3,"click"],["btnText","SAVE","btnClass","tiny","store","organization-bank-accounts","btnStatus","primary",3,"submitted","baseCancel","cancelFxn","submitModel"]],template:function(t,e){1&t&&(r.Ub(0,"div",0),r.Ub(1,"div",1),r.Ub(2,"div",2),r.Ub(3,"div",3),r.Ub(4,"mat-icon"),r.Mc(5,"account_balance"),r.Tb(),r.Mc(6,"\xa0"),r.Tb(),r.Ub(7,"div"),r.Mc(8,"Bank Account"),r.Tb(),r.Tb(),r.Tb(),r.Ub(9,"div",4),r.Ub(10,"div"),r.Ub(11,"table",5),r.Ub(12,"thead",6),r.Kc(13,X,2,1,"th",7),r.Pb(14,"th",8),r.Tb(),r.Ub(15,"tbody"),r.Kc(16,nt,6,3,"tr",9),r.Kc(17,ct,3,2,"tr",10),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb()),2&t&&(r.Bb(13),r.nc("ngForOf",null==e.tab?null:e.tab.bankConfs),r.Bb(3),r.nc("ngForOf",e.list),r.Bb(1),r.nc("ngIf",!(null!=e.list&&e.list.length)))},directives:[g.a,b.s,b.t,p.b,k.a,L.a],encapsulation:2}),t})();var rt=i("o4Yh"),lt=i("SqCe"),bt=i("UhP/");function dt(t,e){if(1&t&&(r.Ub(0,"th",17),r.Mc(1),r.Tb()),2&t){const t=e.$implicit;r.Bb(1),r.Oc(" ",null==t?null:t.title," ")}}function gt(t,e){1&t&&(r.Ub(0,"mat-icon"),r.Mc(1," remove "),r.Tb())}function pt(t,e){if(1&t&&(r.Ub(0,"div"),r.Ub(1,"span"),r.Mc(2),r.Tb(),r.Kc(3,gt,2,0,"mat-icon",19),r.Tb()),2&t){const t=r.gc(2).$implicit,e=r.gc();r.Bb(2),r.Nc(e.activityDetails[t.key]),r.Bb(1),r.nc("ngIf",!e.activityDetails[t.key])}}function ut(t,e){1&t&&(r.Ub(0,"mat-icon"),r.Mc(1," remove "),r.Tb())}function mt(t,e){if(1&t&&(r.Ub(0,"span"),r.Ub(1,"span"),r.Mc(2),r.hc(3,"date"),r.Tb(),r.Kc(4,ut,2,0,"mat-icon",19),r.Tb()),2&t){const t=r.gc(2).$implicit,e=r.gc();r.Bb(2),r.Nc(r.jc(3,2,e.activityDetails[t.key],"dd-MM-yyyy")),r.Bb(2),r.nc("ngIf",!e.activityDetails[t.key])}}function ft(t,e){1&t&&(r.Ub(0,"mat-icon"),r.Mc(1," remove "),r.Tb())}function ht(t,e){if(1&t&&(r.Ub(0,"span"),r.Ub(1,"span"),r.Mc(2),r.hc(3,"currency"),r.Tb(),r.Kc(4,ft,2,0,"mat-icon",19),r.Tb()),2&t){const t=r.gc(2).$implicit,e=r.gc();r.Bb(2),r.Nc(r.jc(3,2,e.activityDetails[t.key],"Kshs ")),r.Bb(2),r.nc("ngIf",!e.activityDetails[t.key])}}function Tt(t,e){1&t&&(r.Ub(0,"mat-icon"),r.Mc(1," remove "),r.Tb())}function vt(t,e){if(1&t&&(r.Ub(0,"span"),r.Ub(1,"span"),r.Mc(2),r.hc(3,"currency"),r.Tb(),r.Kc(4,Tt,2,0,"mat-icon",19),r.Tb()),2&t){const t=r.gc(2).$implicit,e=r.gc();r.Bb(2),r.Nc(r.jc(3,2,e.activityDetails[t.key],"Kshs ")),r.Bb(2),r.nc("ngIf",!e.activityDetails[t.key])}}function yt(t,e){1&t&&(r.Ub(0,"mat-icon"),r.Mc(1," remove "),r.Tb())}function Ut(t,e){if(1&t&&(r.Ub(0,"span"),r.Ub(1,"span"),r.Mc(2),r.hc(3,"currency"),r.Tb(),r.Kc(4,yt,2,0,"mat-icon",19),r.Tb()),2&t){const t=r.gc(2).$implicit,e=r.gc();r.Bb(2),r.Nc(r.jc(3,2,e.activityDetails[t.key],"Kshs ")),r.Bb(2),r.nc("ngIf",!e.activityDetails[t.key])}}function _t(t,e){1&t&&(r.Ub(0,"mat-icon"),r.Mc(1," remove "),r.Tb())}function Ot(t,e){if(1&t&&(r.Ub(0,"span"),r.Ub(1,"span"),r.hc(2,"lowercase"),r.Mc(3),r.Tb(),r.Kc(4,_t,2,0,"mat-icon",19),r.Tb()),2&t){const t=r.gc(2).$implicit,e=r.gc();r.Bb(1),r.Eb("badge ",r.ic(2,5,e.activityDetails[t.key]),""),r.Bb(2),r.Oc(" ",e.activityDetails[t.key]," "),r.Bb(1),r.nc("ngIf",!e.activityDetails[t.key])}}function Mt(t,e){if(1&t&&(r.Ub(0,"div"),r.Kc(1,pt,4,2,"div",19),r.Kc(2,mt,5,5,"span",19),r.Kc(3,ht,5,5,"span",19),r.Kc(4,vt,5,5,"span",19),r.Kc(5,Ut,5,5,"span",19),r.Kc(6,Ot,5,7,"span",19),r.Tb()),2&t){const t=r.gc().$implicit;r.Bb(1),r.nc("ngIf","title"===t.key),r.Bb(1),r.nc("ngIf","activity_date"===t.key),r.Bb(1),r.nc("ngIf","total"===t.key),r.Bb(1),r.nc("ngIf","rationalized_total"===t.key),r.Bb(1),r.nc("ngIf","actual_total"===t.key),r.Bb(1),r.nc("ngIf","status"===t.key)}}function At(t,e){if(1&t&&(r.Ub(0,"td",18),r.Kc(1,Mt,7,6,"div",19),r.Tb()),2&t){const t=r.gc();r.Bb(1),r.nc("ngIf",t.activityDetails)}}function xt(t,e){if(1&t&&(r.Ub(0,"mat-list-item",20),r.Ub(1,"mat-icon",21),r.Mc(2,"note"),r.Tb(),r.Ub(3,"h4",22),r.Mc(4),r.Tb(),r.Ub(5,"div",23),r.Ub(6,"div",24),r.Ub(7,"p",25),r.Ub(8,"span",14),r.Mc(9,"Rationalized:"),r.Tb(),r.Mc(10),r.hc(11,"currency"),r.Tb(),r.Tb(),r.Ub(12,"div",26),r.Ub(13,"p",25),r.Ub(14,"span",14),r.Mc(15,"Approved:"),r.Tb(),r.Mc(16),r.hc(17,"currency"),r.Tb(),r.Tb(),r.Tb(),r.Tb()),2&t){const t=e.$implicit;r.Bb(4),r.Nc(t.title),r.Bb(6),r.Oc("\xa0 ",r.jc(11,3,t.rationalized_total,"Kshs ")," "),r.Bb(6),r.Oc("\xa0 ",r.jc(17,6,t.actual_total,"Kshs ")," ")}}let It=(()=>{class t{constructor(t,e){this._dataLayer=t,this._authConfig=e,this.gridConf=[{title:"Title",key:"title"},{title:"Activity Date",key:"activity_date"},{title:"Applied",key:"total"},{title:"Rationalized",key:"rationalized_total"},{title:"Approved Total",key:"actual_total"}]}getItemBudget(){this._dataLayer.get("organization-budgets",this.item.budget,{current_org_id:this.orgId}).subscribe(t=>{this.activityBudget=t,this._dataLayer.list("organization-budget-activities",{current_org_id:this.orgId,org_budget:this.item.budget}).subscribe(t=>{this.activityBudget.activities=t.results},t=>console.log(t))},t=>console.log(t))}getItemActivity(){this._dataLayer.get("organization-budget-activities",this.item.activity,{current_org_id:this.orgId}).subscribe(t=>{this.activityDetails=t},t=>console.log(t))}ngOnInit(){this.organization=JSON.parse(this._authConfig.getOrganization()),this.orgId=Object(a.get)(this.organization,"organization"),this.getItemActivity(),this.getItemBudget()}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(o.a),r.Ob(w.a))},t.\u0275cmp=r.Ib({type:t,selectors:[["activity-summary"]],inputs:{activity:"activity",item:"item"},features:[r.Ab([o.a])],decls:37,vars:12,consts:[[1,"w-100-p","pt-3"],[1,"px-5","pt-5","pb-3"],[1,"card"],[1,"card-header","pt-2","pb-1","bg-white"],[1,"pl-3","text-muted","font-weight-bold","pb-2","d-flex","align-items-center"],[1,"pt-2","pr-2"],[1,"card-body","px-0","pb-16","pt-0"],[1,"table","borderless","font-ize-13","mb-0"],[1,"thead-light","font-size-12"],["class","border-0 pl-20",4,"ngFor","ngForOf"],["class","pl-20",4,"ngFor","ngForOf"],[1,"pb-0"],[1,"card","border-0","mb-n3"],[3,"opened","closed"],[1,"text-muted"],[1,"mt-n5"],["class","ml-n3 py-0 mb-n3",4,"ngFor","ngForOf"],[1,"border-0","pl-20"],[1,"pl-20"],[4,"ngIf"],[1,"ml-n3","py-0","mb-n3"],["matListIcon",""],["matLine",""],["matLine","",1,"list-inline","d-flex","flex-row","font-size-12","mb-0"],[1,"list-inline-item","pl-0"],[1,"demo-2"],[1,"list-inline-item","pl-3"]],template:function(t,e){1&t&&(r.Ub(0,"div",0),r.Ub(1,"div",1),r.Ub(2,"div",2),r.Ub(3,"div",3),r.Ub(4,"div",4),r.Ub(5,"div",5),r.Ub(6,"mat-icon"),r.Mc(7,"games"),r.Tb(),r.Mc(8,"\xa0"),r.Tb(),r.Ub(9,"div"),r.Mc(10,"Activity"),r.Tb(),r.Tb(),r.Tb(),r.Ub(11,"div",6),r.Ub(12,"div"),r.Ub(13,"table",7),r.Ub(14,"thead",8),r.Kc(15,dt,2,1,"th",9),r.Tb(),r.Ub(16,"tbody"),r.Ub(17,"tr"),r.Kc(18,At,2,1,"td",10),r.Tb(),r.Ub(19,"tr"),r.Ub(20,"td",11),r.Ub(21,"div",12),r.Ub(22,"mat-accordion"),r.Ub(23,"mat-expansion-panel",13),r.cc("opened",(function(){return e.panelOpenState=!0}))("closed",(function(){return e.panelOpenState=!1})),r.Ub(24,"mat-expansion-panel-header"),r.Ub(25,"mat-panel-title"),r.Ub(26,"span",14),r.Mc(27,"Total Budget"),r.Tb(),r.Mc(28),r.hc(29,"currency"),r.Tb(),r.Ub(30,"mat-panel-description"),r.Mc(31," Budget Date: \xa0"),r.Ub(32,"b"),r.Mc(33),r.hc(34,"date"),r.Tb(),r.Tb(),r.Tb(),r.Ub(35,"mat-list",15),r.Kc(36,xt,18,9,"mat-list-item",16),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb()),2&t&&(r.Bb(15),r.nc("ngForOf",e.gridConf),r.Bb(3),r.nc("ngForOf",e.gridConf),r.Bb(2),r.Cb("colspan",null==e.gridConf?null:e.gridConf.length),r.Bb(8),r.Oc(" \xa0 -\xa0 ",r.jc(29,6,null==e.activityBudget?null:e.activityBudget.actual_total,"Kshs ")," "),r.Bb(5),r.Nc(r.jc(34,9,null==e.activityDetails?null:e.activityDetails.created,"dd-MM-yyyy")),r.Bb(3),r.nc("ngForOf",null==e.activityBudget?null:e.activityBudget.activities))},directives:[g.a,b.s,rt.a,rt.c,rt.e,rt.f,rt.d,lt.a,b.t,lt.c,lt.b,bt.j],pipes:[b.d,b.f,b.p],styles:["[_nghost-%COMP%]    {width:100%}[_nghost-%COMP%]     .back-arrow i:hover{cursor:pointer;text-shadow:1px 3px 1px rgba(0,0,0,.3)}[_nghost-%COMP%]     .main-cont{background-color:#146b3a!important;width:auto!important;transition:all .5s cubic-bezier(0,0,.2,1)!important;left:13rem;right:0;padding:3.05rem 4.5rem 7.5rem;margin-bottom:-4.75rem}[_nghost-%COMP%]     .main-cont .title{font-size:2rem;color:#fff}[_nghost-%COMP%]     .back-btn{color:#fff}[_nghost-%COMP%]     .back-btn:hover{cursor:pointer;text-shadow:1px 3px 1px rgba(0,0,0,.3)}[_nghost-%COMP%]     .badge.created, [_nghost-%COMP%]     .badge.draft, [_nghost-%COMP%]     .badge.on_going, [_nghost-%COMP%]     .badge.open, [_nghost-%COMP%]     .badge.pending{background-color:#ffc107;color:#212529}[_nghost-%COMP%]     .badge.assigned, [_nghost-%COMP%]     .badge.first_level_approved, [_nghost-%COMP%]     .badge.rationalized, [_nghost-%COMP%]     .badge.submitted{background-color:#2196f3;color:#fff}[_nghost-%COMP%]     .badge.cancelled, [_nghost-%COMP%]     .badge.rejected{background-color:#dc3545;color:#fff}[_nghost-%COMP%]     .badge.overdue{background-color:#343a40;color:#fff}[_nghost-%COMP%]     .badge.accepted, [_nghost-%COMP%]     .badge.approved, [_nghost-%COMP%]     .badge.completed, [_nghost-%COMP%]     .badge.final_approved, [_nghost-%COMP%]     .badge.finished, [_nghost-%COMP%]     .badge.sasdef_approved{background-color:#28a745;color:#fff}[_nghost-%COMP%]     #print{display:none}@media print{[_nghost-%COMP%]     #no-print{display:none!important}[_nghost-%COMP%]     #print{display:flex}[_nghost-%COMP%]     #print body, [_nghost-%COMP%]     #print h1, [_nghost-%COMP%]     #print h2, [_nghost-%COMP%]     #print h3, [_nghost-%COMP%]     #print h4, [_nghost-%COMP%]     #print html, [_nghost-%COMP%]     #print img, [_nghost-%COMP%]     #print p{margin:0}[_nghost-%COMP%]     #print h1{font-size:18pt;font-weight:500;margin-bottom:.5cm}[_nghost-%COMP%]     #print h2{font-size:16pt;font-weight:500}[_nghost-%COMP%]     #print p{font-size:12pt}[_nghost-%COMP%]     #print .items-group{border:1pt solid #000;border-radius:5pt;padding:3pt;margin:9pt 0}[_nghost-%COMP%]     #print .logotipo{width:6cm;height:4cm;margin:-.5cm}[_nghost-%COMP%]     #print .label{font-weight:500}[_nghost-%COMP%]     #print .address p, [_nghost-%COMP%]     #print .disclaimer{font-size:10pt}[_nghost-%COMP%]     #print .signature-field{padding-bottom:24pt;border-bottom:1pt solid #000}}"]}),t})();function Ct(t,e){1&t&&r.Pb(0,"th",13)}function wt(t,e){1&t&&(r.Ub(0,"mat-icon"),r.Mc(1," remove "),r.Tb())}function Bt(t,e){if(1&t&&(r.Ub(0,"span"),r.Ub(1,"a",18),r.Ub(2,"mat-icon"),r.Mc(3,"cloud_download"),r.Tb(),r.Mc(4,"\xa0 Download "),r.Tb(),r.Tb()),2&t){const t=r.gc(2).$implicit;r.Bb(1),r.Cb("href",t.file.file,r.Cc)}}function kt(t,e){1&t&&(r.Ub(0,"span",19),r.Ub(1,"span",20),r.Mc(2," No Attachment "),r.Tb(),r.Tb())}function zt(t,e){if(1&t&&(r.Ub(0,"td",16),r.Kc(1,Bt,5,1,"span",12),r.Kc(2,kt,3,0,"span",17),r.Tb()),2&t){const t=r.gc().$implicit;r.Bb(1),r.nc("ngIf",null==t?null:t.file),r.Bb(1),r.nc("ngIf",!(null!=t&&t.file))}}function St(t,e){if(1&t&&(r.Ub(0,"tr"),r.Ub(1,"td",14),r.Ub(2,"span"),r.hc(3,"lowercase"),r.Mc(4),r.hc(5,"removeUnderscore"),r.Tb(),r.Tb(),r.Ub(6,"td",14),r.Ub(7,"span"),r.Mc(8),r.hc(9,"date"),r.Tb(),r.Tb(),r.Ub(10,"td",14),r.Mc(11),r.Kc(12,wt,2,0,"mat-icon",12),r.Tb(),r.Kc(13,zt,3,2,"td",15),r.Tb()),2&t){const t=e.$implicit,i=r.gc();r.Bb(2),r.Eb("badge ",r.ic(3,8,null==t?null:t.review_status),""),r.Bb(2),r.Oc(" ",r.ic(5,10,null==t?null:t.review_status)," "),r.Bb(4),r.Oc(" ",r.jc(9,12,null==t?null:t.created,"medium")," "),r.Bb(3),r.Oc(" ",null==t?null:t.comment," "),r.Bb(1),r.nc("ngIf",!(null!=t&&t.comment)),r.Bb(1),r.nc("ngIf",i.hasAction)}}function Et(t,e){if(1&t&&(r.Ub(0,"tr"),r.Ub(1,"td",21),r.Ub(2,"div",22),r.Ub(3,"div",23),r.Ub(4,"div",24),r.Ub(5,"div",25),r.Ub(6,"mat-icon"),r.Mc(7," info_circle "),r.Tb(),r.Tb(),r.Ub(8,"div"),r.Mc(9),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb()),2&t){const t=r.gc();r.Bb(9),r.Oc(" There are currently no status update for this ",t.context," ")}}let Pt=(()=>{class t{constructor(t,e){this._dataLayer=t,this._authConfig=e,this.organization={},this.list=[],this.storesMap=[{context:"Budget",store:"organization-budget-reviews",paramKey:"org_budget"},{context:"Application",store:"application-reviews",paramKey:"application"}],this.hasAction=!1}getAuditTrail(t){let e;Object(a.isUndefined)(t)||(e={current_org_id:this.organization,[t.paramKey]:this.item.id},this._dataLayer.list(t.store,Object.assign({},e)).subscribe(e=>{this.list=e.results,"application-reviews"===t.store&&(this.hasAction=!0,this.list.forEach(t=>{this._dataLayer.list("application-review-attachments",{current_org_id:this.organization,application_review:t.id}).subscribe(e=>{const i=e.results||[];i.length&&(t.file=i[0].attachment_data)},t=>console.log(t))}))},t=>console.log(t)))}ngOnInit(){this.organization=Object(a.get)(JSON.parse(this._authConfig.getOrganization()),"organization",null);const t=Object(a.find)(this.storesMap,{context:this.context});this.getAuditTrail(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(o.a),r.Ob(w.a))},t.\u0275cmp=r.Ib({type:t,selectors:[["audit-trail"]],inputs:{context:"context",item:"item"},features:[r.Ab([o.a])],decls:25,vars:4,consts:[[1,"w-100-p","pt-3"],[1,"px-5","pt-5","pb-3"],[1,"card"],[1,"card-header","pt-2","pb-1","bg-white"],[1,"pl-3","text-muted","font-weight-bold","pb-2","d-flex","align-items-center"],[1,"pt-2","pr-2"],[1,"card-body","px-0","pb-1","pt-0"],[1,"table","borderless","font-size-13","mb-0"],[1,"thead-light","font-size-12"],[1,"border-0","pl-20"],["style","width:1px;",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],[2,"width","1px"],[1,"pl-20","align-middle"],["class","pr-3 align-middle",4,"ngIf"],[1,"pr-3","align-middle"],["class","d-flex ml-2",4,"ngIf"],["mat-stroked-button","","download","","target","_blank"],[1,"d-flex","ml-2"],[1,"badge","badge-secondary","p-2"],["colspan","4",1,"pb-12","mb-0"],[1,"w-100-p","px-3"],[1,"alert","alert-primary","mb-0","pb-2","pt-3"],[1,"d-flex"],[1,"pr-20"]],template:function(t,e){1&t&&(r.Ub(0,"div",0),r.Ub(1,"div",1),r.Ub(2,"div",2),r.Ub(3,"div",3),r.Ub(4,"div",4),r.Ub(5,"div",5),r.Ub(6,"mat-icon"),r.Mc(7,"assessment"),r.Tb(),r.Mc(8,"\xa0"),r.Tb(),r.Ub(9,"div"),r.Mc(10),r.Tb(),r.Tb(),r.Tb(),r.Ub(11,"div",6),r.Ub(12,"div"),r.Ub(13,"table",7),r.Ub(14,"thead",8),r.Ub(15,"th",9),r.Mc(16," Status "),r.Tb(),r.Ub(17,"th",9),r.Mc(18," Updated On "),r.Tb(),r.Ub(19,"th",9),r.Mc(20," Comment "),r.Tb(),r.Kc(21,Ct,1,0,"th",10),r.Tb(),r.Ub(22,"tbody"),r.Kc(23,St,14,15,"tr",11),r.Kc(24,Et,10,1,"tr",12),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb()),2&t&&(r.Bb(10),r.Oc("",e.context||"Budget"," Status"),r.Bb(11),r.nc("ngIf",e.hasAction),r.Bb(2),r.nc("ngForOf",e.list),r.Bb(1),r.nc("ngIf",!(null!=e.list&&e.list.length)))},directives:[g.a,b.t,b.s,p.a],pipes:[b.p,E.a,b.f],styles:["[_nghost-%COMP%]     .badge.created, [_nghost-%COMP%]     .badge.draft, [_nghost-%COMP%]     .badge.on_going, [_nghost-%COMP%]     .badge.open, [_nghost-%COMP%]     .badge.pending{background-color:#ffc107;color:#212529}[_nghost-%COMP%]     .badge.assigned, [_nghost-%COMP%]     .badge.first_level_approved, [_nghost-%COMP%]     .badge.submitted{background-color:#2196f3;color:#fff}[_nghost-%COMP%]     .badge.cancelled, [_nghost-%COMP%]     .badge.rejected{background-color:#dc3545;color:#fff}[_nghost-%COMP%]     .badge.overdue{background-color:#343a40;color:#fff}[_nghost-%COMP%]     .badge.accepted, [_nghost-%COMP%]     .badge.approved, [_nghost-%COMP%]     .badge.completed, [_nghost-%COMP%]     .badge.final_approved, [_nghost-%COMP%]     .badge.finished{background-color:#28a745;color:#fff}"]}),t})();function Dt(t,e){1&t&&(r.Ub(0,"mat-icon"),r.Mc(1," remove "),r.Tb())}function Ft(t,e){if(1&t&&(r.Ub(0,"tr"),r.Ub(1,"td",18),r.Mc(2),r.Tb(),r.Ub(3,"td",18),r.Mc(4),r.hc(5,"date"),r.Kc(6,Dt,2,0,"mat-icon",17),r.Tb(),r.Ub(7,"td",19),r.Ub(8,"a",20),r.Ub(9,"mat-icon"),r.Mc(10,"cloud_download"),r.Tb(),r.Mc(11," \xa0Download "),r.Tb(),r.Tb(),r.Tb()),2&t){const t=e.$implicit;r.Bb(2),r.Oc(" ",(null==t?null:t.file.name)||"Unknown"," "),r.Bb(2),r.Oc(" ",r.jc(5,4,null==t?null:t.file.created,"medium")," "),r.Bb(2),r.nc("ngIf",!(null!=t&&t.file.created)),r.Bb(2),r.Cb("href",null==t?null:t.file.file,r.Cc)}}function Kt(t,e){if(1&t&&(r.Ub(0,"tr"),r.Ub(1,"td",21),r.Ub(2,"div",22),r.Ub(3,"div",23),r.Ub(4,"div",24),r.Ub(5,"div",25),r.Ub(6,"mat-icon"),r.Mc(7," info_circle "),r.Tb(),r.Tb(),r.Ub(8,"div"),r.Mc(9),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb()),2&t){const t=r.gc();r.Bb(9),r.Oc(" There are currently no attachments for this ",t.context," ")}}let Nt=(()=>{class t{constructor(t,e){this._dataLayer=t,this._authConfig=e,this.organization={},this.list=[],this.storesMap=[{context:"Budget",store:"organization-budget-attachments",paramKey:"org_budget"}]}fileChange(t){const e={file:t.target.files[0],attachment_type:"ORGANIZATION_BUDGET",budget:this.item.id};let i={attachment:"",organization:this.item.organization,org_budget:this.item.id};const n=new FormData;n.append("file",e.file),n.append("attachment_type",e.attachment_type),this._dataLayer.uploadFile("attachments",n).subscribe(t=>{i=Object.assign(Object.assign({},i),{attachment:t.id}),this._dataLayer.create("organization-budget-attachments",i).subscribe(t=>{const e=Object(a.find)(this.storesMap,{context:this.context});this.getAuditTrail(e)},t=>console.log(t))},t=>console.log(t))}getAuditTrail(t){Object(a.isUndefined)(t)||this._dataLayer.list(t.store,Object.assign({},{current_org_id:this.organization,[t.paramKey]:this.item.id})).subscribe(t=>{t.results.map(t=>{this._dataLayer.get("attachments",t.attachment,{current_org_id:this.organization}).subscribe(e=>{t.file=e,this.list.push(t)},t=>{console.log(t)})}),console.log(this.list)},t=>console.log(t))}ngOnInit(){this.organization=Object(a.get)(JSON.parse(this._authConfig.getOrganization()),"organization",null);const t=Object(a.find)(this.storesMap,{context:this.context});this.getAuditTrail(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(o.a),r.Ob(w.a))},t.\u0275cmp=r.Ib({type:t,selectors:[["header-attachments"]],inputs:{context:"context",item:"item"},decls:30,vars:3,consts:[[1,"w-100-p","pt-3"],[1,"px-5","pt-5","pb-3"],[1,"card"],[1,"card-header","pt-2","pb-1"],[1,"pl-3","text-muted","font-weight-bold","pb-2","d-flex","align-items-center"],[1,"pt-2","pr-2"],[1,"flex-fill"],[1,"actions"],["type","file","id","input-file-id",1,"ng-hide",3,"hidden","change"],["for","input-file-id",1,"mat-button","mat-stroked-button","md-primary","d-flex","pl-3","font-size-12"],[1,"mt-2"],[1,"card-body","px-0","pb-1","pt-0"],[1,"table","borderless","font-size-13","mb-0"],[1,"font-size-12"],[1,"border-0","pl-20"],[1,"border-0","pr-20",2,"width","1px"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"pl-20"],[1,"pr-20",2,"width","1px"],["mat-raised-button","","download","","target","_blank"],["colspan","4",1,"pb-0","mb-0"],[1,"w-100-p","px-3","pb-12"],[1,"alert","alert-primary","mb-0","pb-2","pt-3"],[1,"d-flex"],[1,"pr-20"]],template:function(t,e){1&t&&(r.Ub(0,"div",0),r.Ub(1,"div",1),r.Ub(2,"div",2),r.Ub(3,"div",3),r.Ub(4,"div",4),r.Ub(5,"div",5),r.Ub(6,"mat-icon"),r.Mc(7,"attach_file"),r.Tb(),r.Mc(8,"\xa0"),r.Tb(),r.Ub(9,"div",6),r.Mc(10,"Attachments"),r.Tb(),r.Ub(11,"div",7),r.Ub(12,"input",8),r.cc("change",(function(t){return e.fileChange(t)})),r.Tb(),r.Ub(13,"label",9),r.Ub(14,"mat-icon",10),r.Mc(15,"cloud_upload"),r.Tb(),r.Mc(16,"\xa0 \xa0UPLOAD FILE "),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Ub(17,"div",11),r.Ub(18,"div"),r.Ub(19,"table",12),r.Ub(20,"thead",13),r.Ub(21,"th",14),r.Mc(22," Name "),r.Tb(),r.Ub(23,"th",14),r.Mc(24," Uploaded At "),r.Tb(),r.Ub(25,"th",15),r.Mc(26," Action "),r.Tb(),r.Tb(),r.Ub(27,"tbody"),r.Kc(28,Ft,12,7,"tr",16),r.Kc(29,Kt,10,1,"tr",17),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb()),2&t&&(r.Bb(12),r.nc("hidden",!0),r.Bb(16),r.nc("ngForOf",e.list),r.Bb(1),r.nc("ngIf",!(null!=e.list&&e.list.length)))},directives:[g.a,b.s,b.t,p.a],pipes:[b.f],styles:[""]}),t})();var Lt=i("l51w"),jt=i("IheW"),Rt=i("mCNh"),Vt=i("vkgz"),$t=i("pLZG"),qt=i("lJxs"),Gt=i("zrQT"),Jt=i("AytR"),Ht=i("HC+r");function Zt(t,e){1&t&&(r.Ub(0,"div"),r.Mc(1," Description is required "),r.Tb())}function Yt(t,e){if(1&t&&(r.Ub(0,"div",18),r.Kc(1,Zt,2,0,"div",14),r.Tb()),2&t){const t=r.gc();r.Bb(1),r.nc("ngIf",t.f.description.errors.required)}}function Qt(t,e){1&t&&(r.Ub(0,"div"),r.Mc(1,"This field is required"),r.Tb())}function Wt(t,e){1&t&&(r.Ub(0,"div"),r.Mc(1,"Only PNG \u{1f921}"),r.Tb())}let Xt=(()=>{class t{constructor(t,e,i,n,a){this.http=t,this._formBuilder=e,this._dialogRef=i,this._dataLayer=n,this.data=a,this.progress=0,this.sUrl=Jt.a.serverURL}formInit(){this.uploadForm=this._formBuilder.group({description:[""],attachment:["",[c.D.required,Object(Gt.a)("png")]]})}get f(){return this.uploadForm.controls}submitForm(t){if(console.log(t,this.uploadForm),!t.valid)return void function(t){for(const e of Object.keys(t.controls))t.controls[e].markAsDirty()}(this.uploadForm);this.loading=!0;const{attachment:e,description:i}=this.uploadForm.value;let n={attachment:"",description:i,document_type:this.data.document_type,organization:this.data.organization};var a;this.http.post(this.sUrl+"/common/attachments/",function(t){const e=new FormData;for(const i of Object.keys(t))e.append(i,t[i]);return e}({file:e,attachment_type:"APPLICATION_DOCUMENT"}),{reportProgress:!0,observe:"events"}).pipe((a=t=>this.progress=t,Object(Vt.a)(t=>{t.type===jt.d.UploadProgress&&a(Math.round(100*t.loaded/t.total))})),Object(Rt.a)(Object($t.a)(t=>t.type===jt.d.Response),Object(qt.a)(t=>t.body))).subscribe(t=>{this.progress=0,n=Object.assign(Object.assign({},n),{attachment:t.id}),this._dataLayer.create("organization-attachments",n).subscribe(t=>{console.log(t),this.uploadForm.reset(),this.loading=!1,this.closeDialog("regresh"),this._dataLayer.openDynamicSnackBar("File sucessfully uploaded","success")},t=>{console.log(t),this.loading=!1})},t=>{console.log(t),this.loading=!1})}closeDialog(t){this._dialogRef.close(t)}hasError(t,e){const i=this.uploadForm.get(t);return i.dirty&&i.hasError(e)}ngOnInit(){console.log(this.data),this.formInit()}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(jt.b),r.Ob(c.g),r.Ob(s.g),r.Ob(o.a),r.Ob(s.a))},t.\u0275cmp=r.Ib({type:t,selectors:[["attachment-dialog"]],features:[r.Ab([o.a])],decls:28,vars:8,consts:[[1,""],[1,"d-flex","algin-items-center","mb-n3"],[1,"flex-fill"],["mat-dialog-title","",1,"pb-2","font"],["mat-dialog-content","",1,"text-muted","fullwidth"],["name","frm",1,"w-100-p",3,"formGroup","ngSubmit"],[1,"w-100-p","pt-1"],[1,"input-wrapper","fullwidth"],["appearance","outline","color","primary",1,"pb-0","mb-0","w-100-p"],["name","description","id","","matInput","","cols","30","rows","2","formControlName","description","placeholder","Kindly enter a file descripition..."],["class","invalid-feedback",4,"ngIf"],[1,"w-100-p"],["formControlName","attachment",3,"progress"],[1,"invalid-feedback","d-flex"],[4,"ngIf"],[1,"btn-container","d-flex","justify-content-end","w-100-p"],["mat-button","","mat-dialog-close","","type","button",3,"click"],["mat-button","","type","submit",3,"disabled"],[1,"invalid-feedback"]],template:function(t,e){1&t&&(r.Ub(0,"div",0),r.Ub(1,"div",1),r.Ub(2,"div",2),r.Ub(3,"h4",3),r.Mc(4," Upload Attachment "),r.Tb(),r.Tb(),r.Tb(),r.Ub(5,"div",4),r.Ub(6,"div"),r.Ub(7,"p"),r.Mc(8," Kindly complete the following form below "),r.Tb(),r.Ub(9,"div"),r.Ub(10,"form",5),r.cc("ngSubmit",(function(){return e.submitForm(e.uploadForm)})),r.Ub(11,"div",6),r.Ub(12,"div",7),r.Ub(13,"mat-form-field",8),r.Ub(14,"mat-label"),r.Mc(15,"File Description"),r.Tb(),r.Pb(16,"textarea",9),r.Tb(),r.Tb(),r.Kc(17,Yt,2,1,"div",10),r.Tb(),r.Ub(18,"div",11),r.Pb(19,"app-file-upload",12),r.Ub(20,"div",13),r.Kc(21,Qt,2,0,"div",14),r.Kc(22,Wt,2,0,"div",14),r.Tb(),r.Tb(),r.Ub(23,"div",15),r.Ub(24,"button",16),r.cc("click",(function(){return e.closeDialog()})),r.Mc(25,"CLOSE"),r.Tb(),r.Ub(26,"button",17),r.Mc(27,"SUBMIT"),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb()),2&t&&(r.Bb(10),r.nc("formGroup",e.uploadForm),r.Bb(7),r.nc("ngIf",e.f.description.invalid&&(e.f.description.touched||e.f.description.dirty)),r.Bb(2),r.nc("progress",e.progress),r.Bb(2),r.nc("ngIf",e.hasError("attachment","required")),r.Bb(1),r.nc("ngIf",e.hasError("attachment","requiredFileType")),r.Bb(4),r.Gb("spiner",e.loading),r.nc("disabled",e.loading))},directives:[s.h,s.e,c.F,c.s,c.l,u.c,u.g,m.b,c.e,c.r,c.j,b.t,Ht.a,p.b,s.d],styles:['[_nghost-%COMP%]     .spinner:before{content:"";box-sizing:border-box;position:absolute;top:50%;left:50%;width:20px;height:20px;margin-top:-10px;margin-left:-10px;border-radius:50%;border:2px solid #fff;border-top-color:#000;-webkit-animation:spinner .8s linear infinite;animation:spinner .8s linear infinite}']}),t})();var te=i("pu8Q");function ee(t,e){if(1&t&&(r.Ub(0,"span"),r.Mc(1),r.Tb()),2&t){const t=r.gc().$implicit;r.Eb("badge py-2 px-3 font-size-12 ",null!=t&&t.required?"badge-danger":"badge-info",""),r.Bb(1),r.Oc(" ",null!=t&&t.required?"Required":"Not Required"," ")}}function ie(t,e){1&t&&(r.Ub(0,"span",19),r.Mc(1," Uploaded "),r.Tb())}function ne(t,e){if(1&t){const t=r.Vb();r.Ub(0,"button",20),r.cc("click",(function(){r.Ac(t);const e=r.gc().$implicit;return r.gc().selectDocType(e)})),r.Ub(1,"mat-icon",21),r.Mc(2,"cloud_upload"),r.Tb(),r.Mc(3,"\xa0 Upload "),r.Tb()}}function ae(t,e){if(1&t&&(r.Ub(0,"a",22),r.Ub(1,"mat-icon"),r.Mc(2,"cloud_download"),r.Tb(),r.Mc(3,"\xa0 Download "),r.Tb()),2&t){const t=r.gc().$implicit;r.Cb("href",null==t?null:t.attachment_data.file,r.Cc)}}function oe(t,e){if(1&t&&(r.Ub(0,"tr"),r.Ub(1,"td",12),r.Mc(2),r.Tb(),r.Ub(3,"td",13),r.Kc(4,ee,2,4,"span",14),r.Kc(5,ie,2,0,"span",15),r.Tb(),r.Ub(6,"td",13),r.Mc(7),r.Tb(),r.Ub(8,"td",16),r.Kc(9,ne,4,0,"button",17),r.Kc(10,ae,4,1,"a",18),r.Tb(),r.Tb()),2&t){const t=e.$implicit;r.Bb(2),r.Oc(" ",null==t?null:t.name," "),r.Bb(2),r.nc("ngIf",!(null!=t&&t.attachment_data)),r.Bb(1),r.nc("ngIf",null==t?null:t.attachment_data),r.Bb(2),r.Oc(" ",null==t?null:t.description," "),r.Bb(2),r.nc("ngIf",!(null!=t&&t.attachment_data)),r.Bb(1),r.nc("ngIf",null==t?null:t.attachment_data)}}function ce(t,e){1&t&&(r.Ub(0,"tr"),r.Ub(1,"td",23),r.Ub(2,"div",24),r.Pb(3,"mat-spinner",25),r.Tb(),r.Tb(),r.Tb())}function se(t,e){1&t&&(r.Ub(0,"tr"),r.Ub(1,"td",23),r.Ub(2,"div",26),r.Ub(3,"div",27),r.Ub(4,"div",28),r.Ub(5,"div",29),r.Ub(6,"mat-icon"),r.Mc(7," info_circle "),r.Tb(),r.Tb(),r.Ub(8,"div",30),r.Mc(9," There is currently no documents setup for this organization. Kindly contact the administrator "),r.Tb(),r.Pb(10,"div",31),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb())}let re=(()=>{class t{constructor(t,e,i,n){this._dataLayer=t,this._authConfig=e,this._dialog=i,this._route=n,this.loading=!0,this.list=[]}fileChange(t,e){const i={file:t.target.files[0],attachment_type:"APPLICATION_DOCUMENT",document_type:e.id,organization:this.organization},n=new FormData;n.append("file",i.file),n.append("attachment_type",i.attachment_type);let a={attachment:"",organization:this.organization,document_type:i.document_type};this._dataLayer.uploadFile("attachments",n).subscribe(t=>{a=Object.assign(Object.assign({},a),{attachment:t.id}),this._dataLayer.create("organization-attachments",a,void 0,{key:"current_org_id",value:this.organization}).subscribe(t=>{this.getApplicationAttachments()},t=>console.log(t))},t=>console.log(t))}selectDocType(t){this._dialog.open(Xt,{data:{organization:this.organization,document_type:t}}).afterClosed().subscribe(t=>{console.log(t),"refresh"===t&&this.getDocumentTypes()})}getApplicationAttachments(){this._dataLayer.list("organization-attachments",{organization:this.organization,current_org_id:this.organization}).subscribe(t=>{const e=t.results;this.list=this.list.map(t=>{const i=Object(a.find)(e,{document_type:t.id});return Object(a.isUndefined)(i)||(t.fileObj=i,t.inkedAttachment=i.id,t.attachment_data=i.attachment_data),t})},t=>console.log(t))}getDocumentTypes(){const t={org_type:this.linkedOrganization.org_type,current_org_id:this.organization};console.log(t,this.organization),this.loading=!0,this._dataLayer.list("document-types",Object.assign({},t)).subscribe(t=>{this.loading=!1,this.list=t.results,this.getApplicationAttachments()},t=>{this.loading=!1,console.log(t)})}getOrgnization(t){this._dataLayer.get("organizations",t,{current_org_id:this.organization}).subscribe(t=>{this.linkedOrganization=t,this.getDocumentTypes()},t=>console.log(t))}getParams(){this._route.queryParams.subscribe(t=>{this.linkedOrgId=t.organization,this.getOrgnization(t.organization)})}ngOnInit(){this.organization=Object(a.get)(JSON.parse(this._authConfig.getOrganization()),"organization",null),this.getParams()}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(o.a),r.Ob(w.a),r.Ob(s.b),r.Ob(C.a))},t.\u0275cmp=r.Ib({type:t,selectors:[["attachments-listing"]],inputs:{tab:"tab",item:"item"},decls:26,vars:3,consts:[[1,"w-100-p"],[1,"card"],[1,"card-header","bg-white","pt-2","pb-1"],[1,"title","flex-fill","font-weight-600","font-size-16","pt-2","pl-3","d-flex","align-items-center"],[1,"flex-fill","pl-3","mt-n2"],[1,"card-body","px-0","pb-1","pt-0"],[1,"table","borderless","font-size-13","mb-0"],[1,"thead-light","font-size-12"],[1,"pl-24"],[2,"width","1px"],[4,"ngFor","ngForOf"],[4,"ngIf"],["valign","middle",1,"pl-24","valign-middle"],["valign","middle",1,"valign-middle"],[3,"class",4,"ngIf"],["class","badge badge-success \n                                py-2 px-3 font-size-12",4,"ngIf"],[1,"pr-24"],["mat-stroked-button","",3,"click",4,"ngIf"],["mat-stroked-button","","download","","target","_blank",4,"ngIf"],[1,"badge","badge-success","py-2","px-3","font-size-12"],["mat-stroked-button","",3,"click"],[1,"mt-2"],["mat-stroked-button","","download","","target","_blank"],["colspan","3",1,"pb-0","mb-0","pl-24"],[1,"w-100-p","px-3","d-flex","justify-content-center","py-16"],["diameter","45"],[1,"w-100-p","px-3"],[1,"alert","alert-primary","mb-0","pb-2","pt-3"],[1,"d-flex","align-items-center"],[1,"pr-20"],[1,"flex-fill"],[1,"pr-8"]],template:function(t,e){1&t&&(r.Ub(0,"div",0),r.Ub(1,"div",1),r.Ub(2,"div",2),r.Ub(3,"div",3),r.Ub(4,"div"),r.Ub(5,"mat-icon"),r.Mc(6,"attachment"),r.Tb(),r.Mc(7,"\xa0 "),r.Tb(),r.Ub(8,"div",4),r.Mc(9,"Attachments"),r.Tb(),r.Tb(),r.Tb(),r.Ub(10,"div",5),r.Ub(11,"div"),r.Ub(12,"table",6),r.Ub(13,"thead",7),r.Ub(14,"th",8),r.Mc(15," File "),r.Tb(),r.Ub(16,"th"),r.Mc(17," Required "),r.Tb(),r.Ub(18,"th"),r.Mc(19," Description "),r.Tb(),r.Ub(20,"th",9),r.Mc(21," Action "),r.Tb(),r.Tb(),r.Ub(22,"tbody"),r.Kc(23,oe,11,6,"tr",10),r.Kc(24,ce,4,0,"tr",11),r.Kc(25,se,11,0,"tr",11),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb()),2&t&&(r.Bb(23),r.nc("ngForOf",e.list),r.Bb(1),r.nc("ngIf",!(null!=e.list&&e.list.length)&&e.loading),r.Bb(1),r.nc("ngIf",!(null!=e.list&&e.list.length||e.loading)))},directives:[g.a,b.s,b.t,p.b,p.a,te.b],encapsulation:2}),t})();var le=i("VmX7");function be(t,e){if(1&t){const t=r.Vb();r.Ub(0,"div",8),r.Ub(1,"dynamic-form",9),r.cc("cancelFxn",(function(){return r.Ac(t),r.gc().closeDialog()}))("submitModel",(function(e){return r.Ac(t),r.gc().receiveModel(e)})),r.Tb(),r.Tb()}if(2&t){const t=r.gc();r.Bb(1),r.nc("submitted",t.submitted)("baseCancel",!0)("model",t.model)}}function de(t,e){if(1&t&&(r.Ub(0,"div"),r.Ub(1,"div"),r.Ub(2,"div"),r.Ub(3,"div"),r.Ub(4,"p"),r.Mc(5),r.Tb(),r.Ub(6,"div",11),r.Ub(7,"div",12),r.Ub(8,"div",13),r.Mc(9," Applied Total: "),r.Tb(),r.Ub(10,"div",14),r.Mc(11),r.hc(12,"currency"),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Ub(13,"p"),r.Mc(14," Ensure that you have rationalized each activity line item, otherwise the applied item amount will be used as the rationalized amount. If you would like to proceed click the "),r.Ub(15,"b"),r.Mc(16,"SUBMIT"),r.Tb(),r.Mc(17," button below. "),r.Tb(),r.Tb(),r.Tb(),r.Tb()),2&t){const t=r.gc(2);r.Bb(5),r.Oc(" Kindly confirm that you would like to rationalize ",null==t.item?null:t.item.title," "),r.Bb(6),r.Oc(" ",r.jc(12,2,null==t.item?null:t.item.total,"Kshs ")," ")}}function ge(t,e){if(1&t&&(r.Ub(0,"div"),r.Ub(1,"div"),r.Ub(2,"div"),r.Ub(3,"p"),r.Mc(4),r.Tb(),r.Ub(5,"div",11),r.Ub(6,"div",12),r.Ub(7,"div",13),r.Mc(8," Applied Total: "),r.Tb(),r.Ub(9,"div",14),r.Mc(10),r.hc(11,"currency"),r.Tb(),r.Tb(),r.Ub(12,"div",12),r.Ub(13,"div",15),r.Mc(14," Rationalized: "),r.Tb(),r.Ub(15,"div",14),r.Mc(16),r.hc(17,"currency"),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Ub(18,"p"),r.Mc(19," Ensure you have approved each activity line item otherwise the rationalized amount will be used as the approved amount. If you would stil like to proceed click the "),r.Ub(20,"b"),r.Mc(21,"SUBMIT"),r.Tb(),r.Mc(22," button below: "),r.Tb(),r.Tb(),r.Tb()),2&t){const t=r.gc(2);r.Bb(4),r.Oc(" Kindly confirm that you would like to approve ",null==t.item?null:t.item.title," "),r.Bb(6),r.Oc(" ",r.jc(11,3,null==t.item?null:t.item.total,"Kshs ")," "),r.Bb(6),r.Oc(" ",r.jc(17,6,null==t.item?null:t.item.rationalized_total,"Kshs ")," ")}}function pe(t,e){if(1&t&&(r.Ub(0,"div",8),r.Ub(1,"div"),r.Mc(2),r.Tb(),r.Kc(3,de,18,5,"div",10),r.Kc(4,ge,23,9,"div",10),r.Tb()),2&t){const t=r.gc();r.Bb(2),r.Nc(null==t.configs?null:t.configs.description),r.Bb(1),r.nc("ngIf","rationalize"===t.context),r.Bb(1),r.nc("ngIf","approve"===t.context)}}function ue(t,e){if(1&t){const t=r.Vb();r.Ub(0,"div",16),r.Ub(1,"button",17),r.cc("click",(function(){return r.Ac(t),r.gc().closeDialog()})),r.Mc(2,"CLOSE"),r.Tb(),r.Ub(3,"button",18),r.cc("click",(function(){return r.Ac(t),r.gc().transitionActions()})),r.Mc(4),r.Tb(),r.Tb()}if(2&t){const t=r.gc();r.Bb(3),r.Gb("spinner",t.loading),r.nc("disabled",t.loading),r.Bb(1),r.Oc(" ",(null==t.configs?null:t.configs.action)||"SUBMIT"," ")}}function me(t,e){1&t&&(r.Ub(0,"div"),r.Mc(1," Comment is required "),r.Tb())}function fe(t,e){if(1&t&&(r.Ub(0,"div",30),r.Kc(1,me,2,0,"div",10),r.Tb()),2&t){const t=r.gc(2);r.Bb(1),r.nc("ngIf",t.f.comment.errors.required)}}function he(t,e){if(1&t){const t=r.Vb();r.Ub(0,"div",19),r.Ub(1,"div",20),r.Ub(2,"p"),r.Mc(3," Kindly confirm that you would like to reject the following activity: "),r.Tb(),r.Ub(4,"div",11),r.Ub(5,"div",12),r.Ub(6,"div",13),r.Mc(7," Applied Amount: "),r.Tb(),r.Ub(8,"div",14),r.Mc(9),r.hc(10,"currency"),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Ub(11,"form",21),r.cc("ngSubmit",(function(){r.Ac(t);const e=r.gc();return e.submitForm(e.commentForm)})),r.Ub(12,"div",22),r.Ub(13,"div",23),r.Ub(14,"mat-form-field",24),r.Ub(15,"mat-label"),r.Mc(16,"Enter comment*"),r.Tb(),r.Pb(17,"textarea",25),r.Tb(),r.Tb(),r.Kc(18,fe,2,1,"div",26),r.Tb(),r.Ub(19,"div",27),r.Ub(20,"button",28),r.cc("click",(function(){return r.Ac(t),r.gc().closeDialog()})),r.Mc(21,"CLOSE"),r.Tb(),r.Ub(22,"button",29),r.Mc(23," SUBMIT "),r.Tb(),r.Tb(),r.Tb(),r.Tb()}if(2&t){const t=r.gc();r.Bb(9),r.Oc(" ",r.jc(10,6,null==t.item?null:t.item.total,"Kshs ")," "),r.Bb(2),r.nc("formGroup",t.commentForm),r.Bb(7),r.nc("ngIf",t.f.comment.invalid&&(t.f.comment.touched||t.f.comment.dirty)),r.Bb(4),r.Gb("spinner",t.loading),r.nc("disabled",t.loading)}}let Te=(()=>{class t{constructor(t,e,i,n){this._formBuilder=t,this._dialogRef=e,this._dataLayer=i,this.data=n,this.dialogActions={approveApplication:()=>{this.getUserOrganization(),this.loading=!0}}}formInit(){this.commentForm=this._formBuilder.group({comment:["",c.D.required]}),this.adjustedAmountForm=this._formBuilder.group({adjustedAmount:["",c.D.required]})}get f(){return this.commentForm.controls}get aF(){return this.adjustedAmountForm.controls}submitTransition(t,e){const i=this.data.store;this.loading=!0,this._dataLayer.update(i,this.item.id,t,{key:"current_org_id",value:this.organization}).subscribe(t=>{console.log(t),this.loading=!1,this.closeDialog("refresh"),this._dataLayer.openDynamicSnackBar(e.succMsg,"success")},t=>{console.log(t),this.loading=!1,this._dataLayer.openDynamicSnackBar(e.errMsg,"error")})}transitionActions(t){let e=t=>`Item ${t} successfully`,i=t=>`An error occurred during ${t}ing`;switch(this.context){case"rationalize":const n={status:"RATIONALIZED"},a={succMsg:e("rationalized"),errMsg:i("rationaliz")};this.submitTransition(n,a);break;case"approve":const o={status:"SASDEF_APPROVED"},c={succMsg:e("approved"),errMsg:i("approv")};this.submitTransition(o,c);break;case"reject":const s={succMsg:e("rejected"),errMsg:i("reject")},r=Object.assign({},t);this.submitTransition(r,s);break;default:throw new Error("No relevant transition action given")}}submitForm(t){console.log(t),t.valid&&"rejected"===this.context&&this.transitionActions({comment:t.value.comment,status:"REJECTED"})}closeDialog(t){this._dialogRef.close(t)}getUserOrganization(){const t=JSON.parse(localStorage.getItem("organization"));this.organization=Object(a.get)(t,"organization",null)}receiveModel(t){console.log(t)}setConfigs(){const t=this.data.context;switch(this.context=this.data.context,this.formInit(),this.getUserOrganization(),t){case"edit":return{title:"Update Activity",type:"form"};case"approve":return{title:"Approve Activity",type:"dialog"};case"rationalize":return{title:"Rationalize Activity",type:"dialog",validationKey:"rationalized_total"};case"reject":return{title:"Reject Activity",type:"comment"};default:throw new Error("Provide a valid option")}}ngOnInit(){this.model=this.data.activity,this.item=this.data.activity,this.configs=this.setConfigs()}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(c.g),r.Ob(s.g),r.Ob(o.a),r.Ob(s.a))},t.\u0275cmp=r.Ib({type:t,selectors:[["nested-crud-dialog"]],features:[r.Ab([o.a])],decls:10,vars:5,consts:[[1,""],[1,"d-flex","align-items-center","mb-n3"],[1,"flex-fill"],["mat-dialog-title","",1,"pb-2","font"],["mat-dialog-content","","class","text-muted fullwidth",4,"ngIf"],["mat-dialog-actions","","class","pt-5 pb-20 d-flex justify-content-end",4,"ngIf"],["mat-dialog-actions","",4,"ngIf"],[1,"py-2"],["mat-dialog-content","",1,"text-muted","fullwidth"],["btnClass","tiny mr-3","btnStatus","primary","store","organization-budget-activities","btnText","SAVE",3,"submitted","baseCancel","model","cancelFxn","submitModel"],[4,"ngIf"],[1,"mb-3"],[1,"d-flex"],[1,"text-muted","pr-3"],[1,"font-weight-600"],[1,"text-muted","pr-16"],["mat-dialog-actions","",1,"pt-5","pb-20","d-flex","justify-content-end"],["mat-button","","mat-dialog-close","",3,"click"],["mat-button","",3,"disabled","click"],["mat-dialog-actions",""],[1,"context","===","'reject'"],["name","frm",1,"w-100-p",3,"formGroup","ngSubmit"],[1,"w-100-p","pt-1"],[1,"input-wrapper","fullwidth"],["appearance","outline","color","primary",1,"pb-0","mb-0","w-100-p"],["name","comment","id","","matInput","","cols","30","rows","6","formControlName","comment","placeholder","Kindly enter a comment..."],["class","invalid-feedback",4,"ngIf"],[1,"btn-container","d-flex","justify-content-end","w-100-p"],["mat-button","","mat-dialog-close","","type","button",3,"click"],["mat-button","","type","submit",3,"disabled"],[1,"invalid-feedback"]],template:function(t,e){1&t&&(r.Ub(0,"div",0),r.Ub(1,"div",1),r.Ub(2,"div",2),r.Ub(3,"h4",3),r.Mc(4),r.Tb(),r.Tb(),r.Tb(),r.Kc(5,be,2,3,"div",4),r.Kc(6,pe,5,3,"div",4),r.Kc(7,ue,5,4,"div",5),r.Kc(8,he,24,9,"div",6),r.Pb(9,"div",7),r.Tb()),2&t&&(r.Bb(4),r.Oc(" ",null==e.configs?null:e.configs.title," "),r.Bb(1),r.nc("ngIf","form"===(null==e.configs?null:e.configs.type)),r.Bb(1),r.nc("ngIf","dialog"===(null==e.configs?null:e.configs.type)),r.Bb(1),r.nc("ngIf","dialog"===(null==e.configs?null:e.configs.type)),r.Bb(1),r.nc("ngIf","comment"===(null==e.configs?null:e.configs.type)))},directives:[s.h,b.t,s.e,L.a,s.c,p.b,s.d,c.F,c.s,c.l,u.c,u.g,m.b,c.e,c.r,c.j],pipes:[b.d],encapsulation:2}),t})();var ve=i("rJgo");function ye(t,e){if(1&t){const t=r.Vb();r.Ub(0,"div",11),r.cc("click",(function(){r.Ac(t);const i=e.$implicit;return r.gc().setSelected(i.id)})),r.Ub(1,"div",12),r.Mc(2),r.Tb(),r.Ub(3,"div",13),r.Ub(4,"div",14),r.Ub(5,"div",15),r.Ub(6,"mat-icon",16),r.Mc(7,"attach_money"),r.Tb(),r.Tb(),r.Ub(8,"div",17),r.Mc(9),r.hc(10,"currency"),r.Tb(),r.Tb(),r.Ub(11,"div",18),r.Ub(12,"div",15),r.Ub(13,"mat-icon",19),r.Mc(14,"people"),r.Tb(),r.Tb(),r.Ub(15,"div",20),r.Mc(16),r.Ub(17,"span",21),r.Mc(18," \xa0For\xa0 "),r.Tb(),r.Mc(19),r.hc(20,"number"),r.Tb(),r.Tb(),r.Tb(),r.Tb()}if(2&t){const t=e.$implicit;r.Gb("active",t.active),r.Bb(2),r.Oc(" ",null==t?null:t.allowance_data.name," "),r.Bb(7),r.Oc(" ",r.jc(10,6,null==t?null:t.actual_total,"Kshs ")," "),r.Bb(7),r.Oc(" ",null==t?null:t.head_count," "),r.Bb(3),r.Oc(" ",r.jc(20,9,null==t?null:t.days,"1.0")," day(s) ")}}function Ue(t,e){if(1&t){const t=r.Vb();r.Ub(0,"button",34),r.cc("click",(function(){r.Ac(t);const i=e.$implicit;return r.gc(2).openDialog(i.context)})),r.Ub(1,"mat-icon"),r.Mc(2),r.Tb(),r.Mc(3),r.Tb()}if(2&t){const t=e.$implicit;r.Bb(1),r.Db(null==t?null:t.iconClass),r.Bb(1),r.Oc(" ",null==t?null:t.icon," "),r.Bb(1),r.Oc(" ",null==t?null:t.text," ")}}function _e(t,e){if(1&t){const t=r.Vb();r.Ub(0,"div",22),r.Ub(1,"div",23),r.Ub(2,"mat-card",24),r.Ub(3,"div",25),r.Ub(4,"div",26),r.Ub(5,"div",27),r.Mc(6," Select Members "),r.Tb(),r.Ub(7,"div",28),r.Ub(8,"mat-menu",null,29),r.Kc(10,Ue,4,4,"button",30),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Ub(11,"mat-card-body",31),r.Ub(12,"div",32),r.Ub(13,"dynamic-table",33),r.cc("postCRUDFxn",(function(){return r.Ac(t),r.gc().refreshSelected()})),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb()}if(2&t){const t=r.gc();r.Bb(10),r.nc("ngForOf",t.actActions),r.Bb(3),r.nc("tabbedItem",t.item)("largeForms",!0)("addOrg",!0)("customHeader",!0)("modelKey",null==t.configs?null:t.configs.modelKey)("cmptParams",t.cmptParams)("headers",null==t.configs?null:t.configs.headers)("no-card",!0)("has-action",!0)("store",null==t.configs?null:t.configs.getStore)("topActions",null==t.configs?null:t.configs.topActions)("hasSearch",!0)("dropDownActions",null==t.configs?null:t.configs.actions)("rows",t.configs.rows)}}let Oe=(()=>{class t{constructor(t,e,i){this._route=t,this._dataLayer=e,this._dialog=i,this.onNavigate=new r.n,this.list=[],this.nestedList=[],this.loading=!0,this.cmptParams={},this.actActions=[]}changeStep(t){this.onNavigate.emit(t)}loadActions(){const t=Object(a.get)(JSON.parse(localStorage.getItem("organization")),"org_type",null);this.actActions=[{text:"Edit",icon:"edit",iconClass:"text-primary",context:"edit",status:["DRAFT"],bpType:["SPORTS_ORGANIZATION","GOVERNMENT_AGENCY"]},{text:"Rationalize",icon:"compare_arrows",iconClass:"text-success",context:"rationalize",status:["DRAFT"],bpType:["MINISTRY","SASDEF"]},{text:"Approve",icon:"check",iconClass:"text-success",context:"approve",status:["RATIONALIZED"],bpType:["SASDEF"]},{text:"Reject",icon:"close",iconClass:"text-danger",context:"reject",status:["DRAFT","RATIONALIZED"],bpType:["MINISTRY","SASDEF"]}].filter(e=>{const i=Object(a.indexOf)(e.bpType,t),n=Object(a.indexOf)(e.status,this.item.status);if(i>=0&&n>=0)return e})}openDialog(t){this._dialog.open(Te,{data:{context:t,store:"application-allowances",activity:this.selectedAllowance},width:"50%"}).afterClosed().subscribe(t=>{console.log(t),"refresh"===t&&(this.loading=!1,this.refreshSelected())})}refreshSelected(){this._dataLayer.get("application-allowances",this.selectedAllowance.id,{current_org_id:this.orgId}).subscribe(t=>{this.selectedAllowance=Object.assign(Object.assign({},t),{active:!0}),this.list=this.list.map(e=>(e.id===t.id&&(e=Object.assign(Object.assign({},t),{active:!0})),e))},t=>{this.loading=!1,console.log(t)})}setSelected(t){if(this.list.length){let e=Object(a.find)(this.list,{active:!0});if(Object(a.isUndefined)(e)&&Object(a.isUndefined)(t))this.list[0].active=!0,this.selectedAllowance=void 0,this.presetAllowance(0);else if(Object(a.isUndefined)(t))this.selectedAllowance=Object(a.indexOf)(this.list,e);else{const e=Object(a.indexOf)(this.list,Object(a.find)(this.list,{id:t}));console.log(e),this.selectedAllowance=void 0,this.presetAllowance(e)}}}presetAllowance(t){this.loading=!0;const e=Object(a.indexOf)(this.list,Object(a.find)(this.list,{active:!0}));this.selectedAllowance=void 0,e>=0&&(this.list[e].active=!1),this.list[t].active=!0,this.getNestedList(this.list[t].id),this._dataLayer.get("organization-budget-activity-allowances",this.list[t].id,{current_org_id:this.orgId}).subscribe(e=>{this.selectedAllowance=this.list[t]||e,this.cmptParams=Object.assign(Object.assign({},this.cmptParams),{budget_activity_allowance:this.list[t].id}),this.loading=!1},t=>{console.log(t),this.loading=!1})}getNestedList(t){this._dataLayer.list("application-allowances",{current_org_id:this.orgId,budget_activity_allowance:t}).subscribe(t=>{this.nestedList=t.results},t=>console.log(t))}getMainList(){this._dataLayer.list("organization-budget-activity-allowances",{current_org_id:this.orgId,budget_activity:this.item.activity}).subscribe(t=>{this.list=t.results,this.setSelected()},t=>console.log(t))}getItem(){this._dataLayer.get("applications",this.itemId,{current_org_id:this.orgId}).subscribe(t=>{console.log(t),this.item=t,this.getMainList()},t=>console.log(t))}getItemId(){this._route.queryParams.subscribe(t=>{parseInt(t.current,10),this.itemId=parseInt(t.id,10),this.configs=this.tab,console.log(this.configs),this.getItem()})}ngOnInit(){this.orgId=Object(a.get)(JSON.parse(localStorage.getItem("organization")),"organization",null),console.log("Called",this.orgId),this.getItemId()}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(C.a),r.Ob(o.a),r.Ob(s.b))},t.\u0275cmp=r.Ib({type:t,selectors:[["nested-inline-tabbed-list"]],inputs:{tab:"tab",current:"current"},outputs:{onNavigate:"onNavigate"},features:[r.Ab([o.a])],decls:16,vars:2,consts:[[1,"card","main-wrapper"],[1,"card-header","pt-3","bg-white"],[1,"pl-3","text-muted","font-weight-bold","pb-2","d-flex","align-items-center"],[1,"pt-2","pr-2"],[1,"card-body","px-0","pb-0","pt-0"],[1,"w-100-p","d-flex","flex-row","px-0"],[1,"h-100-p","overflow-auto","innerScroll","page-layout","col-lg-3","main-list"],[1,"ps"],["fuseperfectscrollbar","",1,"mail-list","overflow-auto"],["class","list-item",3,"active","click",4,"ngFor","ngForOf"],["class","col-lg-9 overflow-auto innerScroll px-0 mt-1\n                bg-light pb-12",4,"ngIf"],[1,"list-item",3,"click"],[1,"pb-0"],[1,"d-flex","flex-column","align-items-start"],[1,"d-flex","flex-row","align-items-center","fullwidth","ml-n1"],[1,"pt-2"],[1,"font-size-18","text-muted"],[1,"font-size-14","text-muted","pl-1"],[1,"d-flex","flex-row","align-items-center","fullwidth","pt-0","mt-n2"],[1,"font-size-16","text-muted"],[1,"font-size-14","text-muted"],[1,"font-weight-bold"],[1,"col-lg-9","overflow-auto","innerScroll","px-0","mt-1","bg-light","pb-12"],[1,"full-width","bg-light","px-16","pt-12","pb-2"],[1,"mat-elevation-z1","p-0","mb-2","w-100-p"],[1,"card-header","bg-white","font-size-16"],[1,"d-flex","flex-row"],[1,"flex-fill","pb-1","pl-8","title","pt-2"],[1,"pt-1","pr-3"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[1,"p-0"],[1,"w-100-p","mt-0","px-0"],["title","Listing",1,"w-100-p",3,"tabbedItem","largeForms","addOrg","customHeader","modelKey","cmptParams","headers","no-card","has-action","store","topActions","hasSearch","dropDownActions","rows","postCRUDFxn"],["mat-menu-item","",3,"click"]],template:function(t,e){1&t&&(r.Ub(0,"div",0),r.Ub(1,"div",1),r.Ub(2,"div",2),r.Ub(3,"div",3),r.Ub(4,"mat-icon"),r.Mc(5,"account_balance_wallet"),r.Tb(),r.Tb(),r.Ub(6,"div"),r.Mc(7," Allowances "),r.Tb(),r.Tb(),r.Tb(),r.Ub(8,"div",4),r.Ub(9,"div"),r.Ub(10,"div",5),r.Ub(11,"div",6),r.Ub(12,"div",7),r.Ub(13,"div",8),r.Kc(14,ye,21,12,"div",9),r.Tb(),r.Tb(),r.Tb(),r.Kc(15,_e,14,15,"div",10),r.Tb(),r.Tb(),r.Tb(),r.Tb()),2&t&&(r.Bb(14),r.nc("ngForOf",e.list),r.Bb(1),r.nc("ngIf",e.selectedAllowance&&!e.loading))},directives:[g.a,b.s,b.t,k.a,ve.d,Lt.a,ve.a],pipes:[b.d,b.g],styles:["[_nghost-%COMP%]     .btn-icon{min-width:1rem;width:1rem}[_nghost-%COMP%]     .btn-icon:first-of-type{margin-left:-.5rem}[_nghost-%COMP%]     .mat-success{background-color:teal!important;color:#fff!important}[_nghost-%COMP%]     .main-wrapper{flex:1 1 auto;flex-direction:column;box-sizing:border-box}[_nghost-%COMP%]     .main-wrapper .main-card-content{min-height:55.5vh;max-height:85.5vh;border-left:1px solid #e0e0e0}[_nghost-%COMP%]     .main-wrapper .main-list{flex:1 1 0%;box-sizing:border-box;position:relative;display:flex;flex-direction:column;flex:1;padding:0;overflow-y:auto;-webkit-overflow-scrolling:touch}[_nghost-%COMP%]     .main-wrapper .main-list .mail-list{position:relative;display:flex;flex-direction:column;flex:1;min-height:55vh;max-height:85.5vh}[_nghost-%COMP%]     .main-wrapper .main-list .list-item{flex-shrink:0;position:relative;padding:16px 24px;cursor:pointer;border-bottom:1px solid rgba(0,0,0,.12)}[_nghost-%COMP%]     .main-wrapper .main-list .list-item.active{background:rgba(0,0,0,.04)}[_nghost-%COMP%]     .main-wrapper .badge.created, [_nghost-%COMP%]     .main-wrapper .badge.draft, [_nghost-%COMP%]     .main-wrapper .badge.on_going, [_nghost-%COMP%]     .main-wrapper .badge.open, [_nghost-%COMP%]     .main-wrapper .badge.pending{background-color:#ffc107;color:#212529}[_nghost-%COMP%]     .main-wrapper .badge.assigned, [_nghost-%COMP%]     .main-wrapper .badge.first_level_approved, [_nghost-%COMP%]     .main-wrapper .badge.rationalized, [_nghost-%COMP%]     .main-wrapper .badge.submitted{background-color:#2196f3;color:#fff}[_nghost-%COMP%]     .main-wrapper .badge.cancelled, [_nghost-%COMP%]     .main-wrapper .badge.rejected{background-color:#dc3545;color:#fff}[_nghost-%COMP%]     .main-wrapper .badge.overdue{background-color:#343a40;color:#fff}[_nghost-%COMP%]     .main-wrapper .badge.accepted, [_nghost-%COMP%]     .main-wrapper .badge.approved, [_nghost-%COMP%]     .main-wrapper .badge.completed, [_nghost-%COMP%]     .main-wrapper .badge.final_approved, [_nghost-%COMP%]     .main-wrapper .badge.finished{background-color:#28a745;color:#fff}[_nghost-%COMP%]     .mat-mini-fab .mat-button-wrapper{padding-top:0!important}"]}),t})();var Me=i("ura0");function Ae(t,e){if(1&t){const t=r.Vb();r.Ub(0,"div",31),r.Ub(1,"span",32),r.cc("click",(function(){return r.Ac(t),r.gc().goBack()})),r.Ub(2,"mat-icon",33),r.Mc(3," arrow_back "),r.Tb(),r.Tb(),r.Tb()}}function xe(t,e){if(1&t&&(r.Ub(0,"mat-icon"),r.Mc(1),r.Tb()),2&t){const t=r.gc(2).$implicit;r.Bb(1),r.Nc(null==t?null:t.icon)}}function Ie(t,e){if(1&t){const t=r.Vb();r.Ub(0,"button",38),r.cc("click",(function(){r.Ac(t);const e=r.gc().$implicit;return r.gc(3).headerActions[e.action](null==e?null:e.configs,null==e?null:e.btnText)})),r.Kc(1,xe,2,1,"mat-icon",13),r.Mc(2),r.Tb()}if(2&t){const t=r.gc().$implicit;r.nc("color",t.color),r.Bb(1),r.nc("ngIf",null==t?null:t.icon),r.Bb(1),r.Oc(" \xa0",null==t?null:t.btnText," ")}}function Ce(t,e){if(1&t&&(r.Ub(0,"span"),r.Kc(1,Ie,3,3,"button",37),r.Tb()),2&t){const t=e.$implicit,i=r.gc(3);r.Bb(1),r.nc("ngIf",i.statusChecker(t)&&i.authChecker(t))}}function we(t,e){if(1&t&&(r.Ub(0,"div",36),r.Kc(1,Ce,2,1,"span",16),r.Tb()),2&t){const t=r.gc(2);r.Bb(1),r.nc("ngForOf",null==t.headerConfig?null:t.headerConfig.actions)}}function Be(t,e){if(1&t&&(r.Ub(0,"div",34),r.Kc(1,we,2,1,"div",35),r.Tb()),2&t){const t=r.gc();r.Bb(1),r.nc("ngIf",null==t.item?null:t.item.id)}}function ke(t,e){1&t&&(r.Sb(0),r.Mc(1," Loading tabs... "),r.Rb())}function ze(t,e){if(1&t&&r.Mc(0),2&t){const t=r.gc().$implicit;r.Nc(t.label)}}function Se(t,e){if(1&t){const t=r.Vb();r.Ub(0,"div",50),r.Ub(1,"button",51),r.cc("click",(function(){return r.Ac(t),r.gc(3).downloadSummary()})),r.Ub(2,"mat-icon",52),r.Mc(3," get_app "),r.Tb(),r.Mc(4," \xa0"),r.Ub(5,"span",53),r.Mc(6,"SUMMARY"),r.Tb(),r.Tb(),r.Tb()}}function Ee(t,e){if(1&t&&(r.Ub(0,"div"),r.Mc(1),r.hc(2,"currency"),r.Tb()),2&t){const t=r.gc(2).$implicit,e=r.gc(3);r.Bb(1),r.Oc(" ",r.jc(2,1,e.item[t.key],"Kshs ")," ")}}function Pe(t,e){if(1&t&&(r.Ub(0,"div"),r.Mc(1),r.hc(2,"date"),r.Tb()),2&t){const t=r.gc(2).$implicit,e=r.gc(3);r.Bb(1),r.Oc(" ",r.jc(2,1,e.item[t.key],"dd-MM-yyyy")," ")}}function De(t,e){if(1&t&&(r.Ub(0,"div"),r.Ub(1,"span"),r.hc(2,"lowercase"),r.Mc(3),r.hc(4,"removeUnderscore"),r.Tb(),r.Tb()),2&t){const t=r.gc(2).$implicit,e=r.gc(3);r.Bb(1),r.Eb("badge ",r.ic(2,4,e.item[t.key])," \n                                                        px-2 pb-1 pt-2 font-size-10"),r.Bb(2),r.Oc(" ",r.ic(4,6,e.item[t.key])," ")}}function Fe(t,e){if(1&t&&(r.Ub(0,"div"),r.Pb(1,"nested-string",60),r.Tb()),2&t){const t=r.gc(2).$implicit,e=r.gc(3);r.Bb(1),r.nc("type",t.fieldType)("config",t)("item",e.item)}}function Ke(t,e){if(1&t&&(r.Ub(0,"div"),r.Kc(1,Ee,3,4,"div",13),r.Kc(2,Pe,3,4,"div",13),r.Kc(3,De,5,8,"div",13),r.Kc(4,Fe,2,3,"div",13),r.Tb()),2&t){const t=r.gc().$implicit,e=r.gc(3);r.Bb(1),r.nc("ngIf","currency"===t.type),r.Bb(1),r.nc("ngIf","date"===t.type),r.Bb(1),r.nc("ngIf","status"===t.type&&(null==e.item?null:e.item.id)),r.Bb(1),r.nc("ngIf","nested"===t.type&&e.item.organization)}}function Ne(t,e){if(1&t&&(r.Ub(0,"div",61),r.Mc(1),r.Tb()),2&t){const t=r.gc().$implicit,e=r.gc(3);r.Bb(1),r.Oc(" ",e.removeUnderscore(e.item[t.key])," ")}}function Le(t,e){1&t&&(r.Ub(0,"span"),r.Ub(1,"mat-icon"),r.Mc(2," remove "),r.Tb(),r.Tb())}function je(t,e){if(1&t&&(r.Ub(0,"div",54),r.Ub(1,"div",55),r.Ub(2,"div",36),r.Ub(3,"mat-icon",56),r.Mc(4),r.Tb(),r.Tb(),r.Ub(5,"div",57),r.Ub(6,"div",58),r.Mc(7),r.Tb(),r.Ub(8,"div"),r.Kc(9,Ke,5,4,"div",13),r.Kc(10,Ne,2,1,"div",59),r.Kc(11,Le,3,0,"span",13),r.Tb(),r.Tb(),r.Tb(),r.Tb()),2&t){const t=e.$implicit,i=r.gc(3);r.Bb(4),r.Oc(" ",t.icon," "),r.Bb(3),r.Oc(" ",t.label," "),r.Bb(2),r.nc("ngIf",t.type),r.Bb(1),r.nc("ngIf",!t.type),r.Bb(1),r.nc("ngIf",!i.item[t.key])}}function Re(t,e){1&t&&r.Qb(0)}function Ve(t,e){if(1&t&&(r.Ub(0,"div",62),r.Kc(1,Re,1,0,"ng-container",63),r.Tb()),2&t){r.gc(3);const t=r.wc(25);r.Bb(1),r.nc("ngTemplateOutlet",t)}}function $e(t,e){1&t&&r.Qb(0)}function qe(t,e){if(1&t&&(r.Ub(0,"div",62),r.Kc(1,$e,1,0,"ng-container",63),r.Tb()),2&t){r.gc(3);const t=r.wc(27);r.Bb(1),r.nc("ngTemplateOutlet",t)}}function Ge(t,e){if(1&t&&(r.Ub(0,"div",64),r.Pb(1,"organization-summary",65),r.Tb()),2&t){const t=r.gc(3);r.Bb(1),r.nc("organization",t.item.organization_data)}}function Je(t,e){if(1&t&&(r.Ub(0,"div"),r.Pb(1,"application-me",66),r.Tb()),2&t){const t=r.gc(3);r.Bb(1),r.nc("item",t.item)}}function He(t,e){if(1&t&&(r.Ub(0,"div",67),r.Pb(1,"tabbed-inline-list",68),r.Tb()),2&t){const t=r.gc(2).$implicit,e=r.gc();r.Bb(1),r.nc("tab",t)("item",e.item)("parentKey",null==t?null:t.parentKey)}}function Ze(t,e){if(1&t&&(r.Ub(0,"div",64),r.Pb(1,"activity-summary",69),r.Tb()),2&t){const t=r.gc(3);r.Bb(1),r.nc("activity",t.item.organization_data)("item",t.item)}}function Ye(t,e){if(1&t&&(r.Ub(0,"div",64),r.Pb(1,"audit-trail",70),r.Tb()),2&t){const t=r.gc(2).$implicit,e=r.gc();r.Bb(1),r.nc("context",t.context)("item",e.item)}}function Qe(t,e){if(1&t&&(r.Ub(0,"div",64),r.Pb(1,"header-attachments",70),r.Tb()),2&t){const t=r.gc(2).$implicit,e=r.gc();r.Bb(1),r.nc("context",t.context)("item",e.item)}}function We(t,e){if(1&t&&(r.Ub(0,"div",41),r.Ub(1,"div",42),r.Ub(2,"div",43),r.Mc(3),r.hc(4,"uppercase"),r.Tb(),r.Kc(5,Se,7,0,"div",44),r.Tb(),r.Ub(6,"div",45),r.Kc(7,je,12,5,"div",46),r.Tb(),r.Kc(8,Ve,2,1,"div",47),r.Kc(9,qe,2,1,"div",47),r.Kc(10,Ge,2,1,"div",48),r.Kc(11,Je,2,1,"div",13),r.Kc(12,He,2,3,"div",49),r.Kc(13,Ze,2,2,"div",48),r.Kc(14,Ye,2,2,"div",48),r.Kc(15,Qe,2,2,"div",48),r.Tb()),2&t){const t=r.gc().$implicit,e=r.gc();r.Bb(2),r.Gb("pt-3","Application"===t.context),r.Bb(1),r.Oc(" ",r.ic(4,13,t.context||"ORAGNIZATION")," DETAILS "),r.Bb(2),r.nc("ngIf","Application"===(null==t?null:t.context)&&"SASDEF"===e.orgType),r.Bb(2),r.nc("ngForOf",t.detailsConf),r.Bb(1),r.nc("ngIf",(null==e.item?null:e.item.id)&&(null==t?null:t.extraDetails)),r.Bb(1),r.nc("ngIf",(null==e.item?null:e.item.id)&&(null==t?null:t.totalsSummary)),r.Bb(1),r.nc("ngIf",null==t?null:t.orgSummary),r.Bb(1),r.nc("ngIf",(null==t?null:t.applicationME)&&(null==e.item?null:e.item.id)),r.Bb(1),r.nc("ngIf",(null==t?null:t.bankConfs)&&(null==e.item?null:e.item.id)),r.Bb(1),r.nc("ngIf",(null==e.item?null:e.item.id)&&(null==t?null:t.activitySummary)),r.Bb(1),r.nc("ngIf",(null==t?null:t.auditTrail)&&(null==e.item?null:e.item.id)),r.Bb(1),r.nc("ngIf",(null==t?null:t.attachments)&&(null==e.item?null:e.item.id))}}function Xe(t,e){if(1&t&&(r.Ub(0,"div"),r.Pb(1,"dynamic-table",71),r.Tb()),2&t){const t=r.gc().$implicit,e=r.gc();r.Bb(1),r.nc("tabbedItem",e.item)("addOrg",!0)("modelKey",null==t?null:t.modelKey)("cmptParams",null==t?null:t.cmptParams)("headers",null==t?null:t.headers)("no-card",!0)("has-action",!0)("store",null==t?null:t.gridConf.getStore)("dropDownActions",null==t?null:t.dropDownActions)("topActions",null==t?null:t.topActions)("hasSearch",!0)("actions",null==t?null:t.actions)("rows",t.rows)}}function ti(t,e){if(1&t&&(r.Ub(0,"div"),r.Pb(1,"attachments-listing",72),r.Tb()),2&t){const t=r.gc().$implicit,e=r.gc();r.Bb(1),r.nc("tab",t)("item",e.item)}}function ei(t,e){if(1&t&&(r.Ub(0,"div"),r.Pb(1,"nested-list",66),r.Tb()),2&t){const t=r.gc(2);r.Bb(1),r.nc("item",t.item)}}function ii(t,e){if(1&t&&(r.Ub(0,"div"),r.Pb(1,"nested-inline-tabbed-list",73),r.Tb()),2&t){const t=r.gc().$implicit,e=r.gc();r.Bb(1),r.nc("item",e.item)("tab",t)}}function ni(t,e){if(1&t&&(r.Ub(0,"mat-tab"),r.Kc(1,ze,1,1,"ng-template",39),r.Kc(2,We,16,15,"div",40),r.Kc(3,Xe,2,13,"div",13),r.Kc(4,ti,2,2,"div",13),r.Kc(5,ei,2,1,"div",13),r.Kc(6,ii,2,2,"div",13),r.Tb()),2&t){const t=e.$implicit,i=e.index,n=r.gc();r.Bb(2),r.nc("ngIf","form"===t.content&&i===n.currIndex),r.Bb(1),r.nc("ngIf","grid"===t.content&&i===n.currIndex&&(null==n.item?null:n.item.id)),r.Bb(1),r.nc("ngIf","attachments"===t.content&&i===n.currIndex&&(null==n.item?null:n.item.id)),r.Bb(1),r.nc("ngIf","nested-list"===t.content&&(null==n.item?null:n.item.id)&&i==n.currIndex),r.Bb(1),r.nc("ngIf","nested-inline-list"===t.content&&(null==n.item?null:n.item.id))}}function ai(t,e){1&t&&(r.Ub(0,"mat-icon"),r.Mc(1,"remove"),r.Tb())}function oi(t,e){1&t&&(r.Ub(0,"mat-icon"),r.Mc(1,"remove"),r.Tb())}const ci=function(t,e){return{"text-danger":t,"text-success":e}};function si(t,e){if(1&t&&(r.Ub(0,"span",86),r.Mc(1),r.hc(2,"number"),r.Ub(3,"span"),r.Mc(4,"%"),r.Tb(),r.Tb()),2&t){const t=r.gc(2);r.nc("ngClass",r.rc(5,ci,(null==t.item?null:t.item.total)>t.item.activity_actual_total,(null==t.item?null:t.item.total)<t.item.activity_actual_total)),r.Bb(1),r.Oc(" ",r.jc(2,2,(null==t.item?null:t.item.total)/(null==t.item?null:t.item.activity_actual_total),"1.1-2")," ")}}function ri(t,e){if(1&t&&(r.Ub(0,"div",74),r.Ub(1,"div",75),r.Ub(2,"div",76),r.Ub(3,"div",77),r.Ub(4,"div",78),r.Ub(5,"div",79),r.Ub(6,"mat-icon"),r.Mc(7,"assignment"),r.Tb(),r.Mc(8,"\xa0 "),r.Tb(),r.Ub(9,"div"),r.Mc(10,"Other Application Details"),r.Tb(),r.Tb(),r.Tb(),r.Ub(11,"div",80),r.Ub(12,"div"),r.Ub(13,"table",81),r.Ub(14,"thead",82),r.Ub(15,"th",83),r.Mc(16," Type "),r.Tb(),r.Ub(17,"th"),r.Mc(18," Organization "),r.Tb(),r.Ub(19,"th"),r.Mc(20," Organization Type "),r.Tb(),r.Ub(21,"th"),r.Mc(22," Rationalized "),r.Tb(),r.Ub(23,"th"),r.Mc(24," Approved "),r.Tb(),r.Ub(25,"th"),r.Mc(26," Variance "),r.Tb(),r.Tb(),r.Ub(27,"tbody"),r.Ub(28,"tr"),r.Ub(29,"td",83),r.Ub(30,"span",84),r.Mc(31),r.Tb(),r.Tb(),r.Ub(32,"td"),r.Mc(33),r.Tb(),r.Ub(34,"td",61),r.Mc(35),r.hc(36,"removeUnderscore"),r.Tb(),r.Ub(37,"td"),r.Mc(38),r.hc(39,"currency"),r.Kc(40,ai,2,0,"mat-icon",13),r.Tb(),r.Ub(41,"td"),r.Mc(42),r.hc(43,"currency"),r.Kc(44,oi,2,0,"mat-icon",13),r.Tb(),r.Ub(45,"td"),r.Kc(46,si,5,8,"span",85),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb()),2&t){const t=r.gc();r.Bb(31),r.Oc(" ",null==t.item?null:t.item.application_type," "),r.Bb(2),r.Oc(" ",null==t.item?null:t.item.organization_data.name," "),r.Bb(2),r.Oc(" ",r.ic(36,8,null==t.item?null:t.item.organization_data.org_type_code)," "),r.Bb(3),r.Oc(" ",r.jc(39,10,null==t.item?null:t.item.rationalized_total,"Kshs ")," "),r.Bb(2),r.nc("ngIf",!(null!=t.item&&t.item.rationalized_total)),r.Bb(2),r.Oc(" ",r.jc(43,13,null==t.item?null:t.item.actual_total,"Kshs ")," "),r.Bb(2),r.nc("ngIf",!(null!=t.item&&t.item.actual_total)),r.Bb(2),r.nc("ngIf",null==t.item?null:t.item.total)}}function li(t,e){1&t&&(r.Ub(0,"mat-icon"),r.Mc(1,"remove"),r.Tb())}function bi(t,e){1&t&&(r.Ub(0,"mat-icon"),r.Mc(1,"remove"),r.Tb())}function di(t,e){if(1&t&&(r.Ub(0,"div",74),r.Ub(1,"div",87),r.Ub(2,"div",76),r.Ub(3,"div",77),r.Ub(4,"div",78),r.Ub(5,"div",79),r.Ub(6,"mat-icon"),r.Mc(7,"monetization_on"),r.Tb(),r.Mc(8,"\xa0 "),r.Tb(),r.Ub(9,"div"),r.Mc(10,"Totals Summary"),r.Tb(),r.Tb(),r.Tb(),r.Ub(11,"div",88),r.Ub(12,"div"),r.Ub(13,"table",89),r.Ub(14,"thead",90),r.Ub(15,"th",83),r.Mc(16," Applied Total "),r.Tb(),r.Ub(17,"th"),r.Mc(18," Rationalized Total "),r.Tb(),r.Ub(19,"th"),r.Mc(20," Approved Total "),r.Tb(),r.Tb(),r.Ub(21,"tbody"),r.Ub(22,"tr"),r.Ub(23,"td",83),r.Mc(24),r.hc(25,"currency"),r.Tb(),r.Ub(26,"td"),r.Mc(27),r.hc(28,"currency"),r.Kc(29,li,2,0,"mat-icon",13),r.Tb(),r.Ub(30,"td"),r.Mc(31),r.hc(32,"currency"),r.Kc(33,bi,2,0,"mat-icon",13),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb()),2&t){const t=r.gc();r.Bb(24),r.Oc(" ",r.jc(25,5,null==t.item?null:t.item.total,"Kshs ")," "),r.Bb(3),r.Oc(" ",r.jc(28,8,null==t.item?null:t.item.rationalized_total,"Kshs ")," "),r.Bb(2),r.nc("ngIf",!(null!=t.item&&t.item.rationalized_total)),r.Bb(2),r.Oc(" ",r.jc(32,11,null==t.item?null:t.item.actual_total,"Kshs ")," "),r.Bb(2),r.nc("ngIf",!(null!=t.item&&t.item.actual_total))}}let gi=(()=>{class t{constructor(t,e,i,n,a,o,c){this._router=t,this._route=e,this._authConfig=i,this._tabsService=n,this._dataLayer=a,this._dialog=o,this._authChecker=c,this.item={},this.tabs=[],this.currIndex=0,this.cmptParams={},this.headerActions={submit:(t,e)=>{this.openDialog(t,e)},rationalize:(t,e)=>{this.openDialog(t,e)},approve:(t,e)=>{this.openDialog(t,e)},reject:(t,e)=>{this.openDialog(t,e)}}}goBack(){this._router.navigate([this.listRoute])}openDialog(t,e){this._dialog.open(x,{data:{item:this.item,configs:t,action:e},width:"40%"}).afterClosed().subscribe(t=>{console.log(t),"refresh"===t&&this.getItem()})}statusChecker(t){return Object(a.indexOf)(t.activeStates,this.item.status)>=0}authChecker(t){return!Object(a.has)(t,"bpType")||this._authChecker.isActionAllowed(t.bpType,t.roles)}setCmptParams(){this.tabs.tabs=this.tabs.tabs.map(t=>{if(Object(a.has)(t,"modelKey")){const e=Object(a.get)(t,"listParams",{});return Object.assign(Object.assign({},t),{cmptParams:Object.assign({[t.modelKey]:this.item.id},e)})}return t}),this.loadTabs(this.tabs.tabs)}getItem(){this.item={},this._dataLayer.get(this.apiStore,this.itemId,{current_org_id:this.organization}).subscribe(t=>{this.item=t,this.setCmptParams()},t=>console.log(t))}loadTabs(t){this.asyncTabs=new n.a(e=>{setTimeout(()=>{e.next([...t])},250)})}getNested(t){return!a.isUndefined(t)&&a.isString(t)?a.get(this.item,t,null):t}removeUnderscore(t){return!a.isUndefined(t)&&a.isString(t)?t.replace(/_/g," "):t}getRouteConfigs(){this._route.data.subscribe(t=>{this.store=t.store,this.apiStore=t.endPoint,this.listRoute=t.listRoute,this.tabs=this._tabsService.getTabs(this.store);const e=this.tabs.tabs;this.headerConfig=Object.assign({},this.tabs.headerConfig),this.loadTabs(e),this.configs=t.itemConfig,this.getItem()})}setParams(){this._route.queryParams.subscribe(t=>{this.itemId=t.id,this.listParams={organization:t.id},this.getRouteConfigs()})}tabSelectChange(t){this.currIndex=t.index}printPage(){window.print()}downloadSummary(){console.log("Called"),this._dataLayer.get("applications",this.itemId+"/summary_report",{current_org_id:this.organization}).subscribe(t=>{console.log(t),this.printPage()},t=>{console.log(t),this.printPage()})}ngOnInit(){this.headerConfig={},this.user=JSON.parse(this._authConfig.getUser()),this.organization=JSON.parse(this._authConfig.getOrganization()).organization,this.orgType=Object(a.get)(JSON.parse(localStorage.getItem("organization")),"org_type",null),this.setParams()}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(C.g),r.Ob(C.a),r.Ob(w.a),r.Ob(B.a),r.Ob(o.a),r.Ob(s.b),r.Ob(I.a))},t.\u0275cmp=r.Ib({type:t,selectors:[["tabbed-wrapper"]],features:[r.Ab([o.a,I.a])],decls:104,vars:15,consts:[["id","no-print"],[1,"main-cont","header"],[1,"d-flex","w-100-p","align-items-center","pl-3"],["class","pt-12 pr-3",4,"ngIf"],[1,"text-light","px-3","pt-3"],[1,"font-size-48"],[1,"flex-fill","title-cont","pl-5"],[1,"title-text","pt-3","text-light","font-size-20"],[1,"desc-text","text-light","font-size-14","pt-2"],["class","actions pr-4",4,"ngIf"],[1,"px-5"],[1,"w-100-p","raised","mb-5","p-0"],[1,"p-0"],[4,"ngIf"],[3,"selectedTabChange"],["mainTabs",""],[4,"ngFor","ngForOf"],["extraDetails",""],["totalsSummary",""],["id","print"],[1,"container-fluid"],[1,"row","no-gutters"],[1,"col"],["src","../../assets/logotipo.svg","alt","logotipo",1,"logotipo"],[1,"address"],[1,"row","no-gutters","items-group"],[1,"col-3","label"],[1,"col-9"],[1,"label"],[1,"disclaimer"],[1,"disclaimer","signature-field"],[1,"pt-12","pr-3"],["mat-icon-button","","aria-label","Back to list",1,"back-btn",3,"click"],[1,"font-size-28"],[1,"actions","pr-4"],["class","pr-3",4,"ngIf"],[1,"pr-3"],["mat-raised-button","","class","pl-3 mr-3",3,"color","click",4,"ngIf"],["mat-raised-button","",1,"pl-3","mr-3",3,"color","click"],["mat-tab-label",""],["class","mb-5",4,"ngIf"],[1,"mb-5"],[1,"d-flex","px-5","pt-5","pb-3"],[1,"flex-fill","pl-3","text-muted","font-weight-bold","font-size-12"],["class","pb-16 pr-12",4,"ngIf"],[1,"d-flex","w-100-p","px-5","pt-3"],["class","col-lg-3 col-12",4,"ngFor","ngForOf"],["class","px-3",4,"ngIf"],["class","px-3 pt-3",4,"ngIf"],["class","px-40 pt-5 pb-0",4,"ngIf"],[1,"pb-16","pr-12"],["mat-stroked-button","",1,"pl-3",3,"click"],[1,"font-size-22","mt-1"],[1,"font-size-12"],[1,"col-lg-3","col-12"],[1,"d-flex","w-100-p","align-items-center"],[1,"font-size-32","text-success"],[1,"pl-3"],[1,"text-muted","font-size-13"],["class","font-size-13",4,"ngIf"],[3,"type","config","item"],[1,"font-size-13"],[1,"px-3"],[4,"ngTemplateOutlet"],[1,"px-3","pt-3"],[3,"organization"],[3,"item"],[1,"px-40","pt-5","pb-0"],[3,"tab","item","parentKey"],[3,"activity","item"],[3,"context","item"],["title","Listing",1,"w-100-p",3,"tabbedItem","addOrg","modelKey","cmptParams","headers","no-card","has-action","store","dropDownActions","topActions","hasSearch","actions","rows"],[3,"tab","item"],[3,"item","tab"],[1,"w-100-p","pt-3"],[1,"px-5","pt-5","pb-3"],[1,"card"],[1,"card-header","pt-3","pb-1","bg-white"],[1,"pl-3","text-muted","font-weight-bold","pb-2","d-flex","align-items-center"],[1,"pt-2","pr-2"],[1,"card-body","px-0","pb-3","pt-0"],[1,"table","borderless","font-size-14"],[1,"thead-light"],[1,"pl-20"],[1,"badge","badge-secondary","px-3","py-2"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"px-5","pt-5","pb-0"],[1,"card-body","px-0","pb-0","pt-0"],[1,"table","borderless","font-size-13"],[1,"thead-light","font-size-12"]],template:function(t,e){1&t&&(r.Ub(0,"div",0),r.Ub(1,"div",1),r.Ub(2,"div",2),r.Kc(3,Ae,4,0,"div",3),r.Ub(4,"div",4),r.Ub(5,"mat-icon",5),r.Mc(6),r.Tb(),r.Tb(),r.Ub(7,"div",6),r.Ub(8,"div",7),r.Mc(9),r.Tb(),r.Ub(10,"div",8),r.Mc(11),r.hc(12,"removeUnderscore"),r.Tb(),r.Tb(),r.Kc(13,Be,2,1,"div",9),r.Tb(),r.Tb(),r.Ub(14,"div",10),r.Ub(15,"div",10),r.Ub(16,"mat-card",11),r.Ub(17,"mat-card-content",12),r.Kc(18,ke,2,0,"ng-container",13),r.hc(19,"async"),r.Ub(20,"mat-tab-group",14,15),r.cc("selectedTabChange",(function(t){return e.tabSelectChange(t)})),r.Kc(22,ni,7,5,"mat-tab",16),r.hc(23,"async"),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Kc(24,ri,47,16,"ng-template",null,17,r.Lc),r.Kc(26,di,34,14,"ng-template",null,18,r.Lc),r.Ub(28,"div",19),r.Ub(29,"div",20),r.Ub(30,"div",21),r.Ub(31,"div",22),r.Ub(32,"h1"),r.Mc(33," Assist\xeancia N\xba 1 "),r.Tb(),r.Tb(),r.Tb(),r.Ub(34,"div",21),r.Ub(35,"div",22),r.Pb(36,"img",23),r.Tb(),r.Ub(37,"div",22),r.Ub(38,"h2"),r.Mc(39,"N Repara\xe7\xf5es"),r.Tb(),r.Ub(40,"p"),r.Mc(41,"91 886 73 76"),r.Tb(),r.Ub(42,"div",24),r.Ub(43,"p"),r.Mc(44,"geral@nreparacoes.com"),r.Tb(),r.Ub(45,"p"),r.Mc(46,"Av. Dr. Ribeiro de Magalh\xe3es, 1391"),r.Tb(),r.Ub(47,"p"),r.Mc(48,"Centro Comercial 123, Loja BD"),r.Tb(),r.Ub(49,"p"),r.Mc(50,"4610-108 Felgueiras"),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Ub(51,"div",25),r.Ub(52,"div",26),r.Ub(53,"p"),r.Mc(54,"Cliente:"),r.Tb(),r.Ub(55,"p"),r.Mc(56,"Contacto:"),r.Tb(),r.Tb(),r.Ub(57,"div",27),r.Ub(58,"p"),r.Mc(59,"Manuel Alberto Magalh\xe3es Carvalho"),r.Tb(),r.Ub(60,"p"),r.Mc(61,"91 000 00 00"),r.Tb(),r.Tb(),r.Tb(),r.Ub(62,"div",25),r.Ub(63,"div",26),r.Ub(64,"p"),r.Mc(65,"Equipamento:"),r.Tb(),r.Ub(66,"p"),r.Mc(67,"Cor:"),r.Tb(),r.Ub(68,"p"),r.Mc(69,"Serial:"),r.Tb(),r.Ub(70,"p"),r.Mc(71,"Problema:"),r.Tb(),r.Ub(72,"p"),r.Mc(73,"Observa\xe7\xf5es:"),r.Tb(),r.Tb(),r.Ub(74,"div",27),r.Ub(75,"p"),r.Mc(76,"Telem\xf3vel > Apple > Iphone 6"),r.Tb(),r.Ub(77,"p"),r.Mc(78,"Cinza"),r.Tb(),r.Ub(79,"p"),r.Mc(80,"appl2015ewfwejuk23423"),r.Tb(),r.Ub(81,"p"),r.Mc(82,"N\xe3o arranca"),r.Tb(),r.Ub(83,"p"),r.Mc(84,"codigo: 1798 - tem de ficar pronto at\xe9 dia 12/02/2019"),r.Tb(),r.Tb(),r.Tb(),r.Ub(85,"div",25),r.Ub(86,"div",22),r.Ub(87,"p",28),r.Mc(88,"Condi\xe7\xf5es Gerais:"),r.Tb(),r.Ub(89,"ul",29),r.Ub(90,"li"),r.Mc(91,"Prazo para levantar 90 dias"),r.Tb(),r.Ub(92,"li"),r.Mc(93,"Garantia 90 dias"),r.Tb(),r.Ub(94,"li"),r.Mc(95,"Esta assist\xeancia s\xf3 \xe9 entregue a quem apresentar este documento"),r.Tb(),r.Ub(96,"li"),r.Mc(97,"O pre\xe7o acresce 10% a cada 30 dias ap\xf3s fim do prazo de levantamento (taxa de conserva\xe7\xe3o)"),r.Tb(),r.Ub(98,"li"),r.Mc(99,"Os dados do cliente, acima mencionados, ficam registados na N Repara\xe7\xf5es apenas para efeitos de comunica\xe7\xe3o em rela\xe7\xe3o \xe0s suas assist\xeancias e factura\xe7\xe3o "),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Ub(100,"div",21),r.Ub(101,"div",22),r.Ub(102,"p",30),r.Mc(103,"Declaro que li e concordo com o disposto neste documento em 03/02/2019"),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb()),2&t&&(r.Bb(3),r.nc("ngIf",e.listRoute),r.Bb(3),r.Oc(" ",e.headerConfig.icon||"business"," "),r.Bb(3),r.Pc(" ",e.headerConfig.headerLabel," ",e.headerConfig.headerValue?e.item[e.headerConfig.headerValue]:null==e.item?null:e.item.name," "),r.Bb(2),r.Pc(" ",e.headerConfig.subTitleLabel," ",e.headerConfig.subTitleValue?e.getNested(e.headerConfig.subTitleValue):r.ic(12,9,null==e.item?null:e.item.org_type_code)," "),r.Bb(2),r.nc("ngIf",null==e.headerConfig?null:e.headerConfig.actions),r.Bb(5),r.nc("ngIf",null===r.ic(19,11,e.asyncTabs)),r.Bb(4),r.nc("ngForOf",r.ic(23,13,e.asyncTabs)))},directives:[b.t,g.a,k.a,k.b,z.b,b.s,p.b,z.a,z.c,S.a,b.A,N,W,st,It,Pt,Nt,Lt.a,re,le.a,Oe,b.q,Me.a],pipes:[E.a,b.b,b.G,b.d,b.f,b.p,b.g],styles:["[_nghost-%COMP%]    {width:100%}[_nghost-%COMP%]     .back-arrow i:hover{cursor:pointer;text-shadow:1px 3px 1px rgba(0,0,0,.3)}[_nghost-%COMP%]     .main-cont{background-color:#146b3a!important;width:auto!important;transition:all .5s cubic-bezier(0,0,.2,1)!important;left:13rem;right:0;padding:3.05rem 4.5rem 7.5rem;margin-bottom:-4.75rem}[_nghost-%COMP%]     .main-cont .title{font-size:2rem;color:#fff}[_nghost-%COMP%]     .back-btn{color:#fff}[_nghost-%COMP%]     .back-btn:hover{cursor:pointer;text-shadow:1px 3px 1px rgba(0,0,0,.3)}[_nghost-%COMP%]     .badge.created, [_nghost-%COMP%]     .badge.draft, [_nghost-%COMP%]     .badge.on_going, [_nghost-%COMP%]     .badge.open, [_nghost-%COMP%]     .badge.pending{background-color:#ffc107;color:#212529}[_nghost-%COMP%]     .badge.assigned, [_nghost-%COMP%]     .badge.first_level_approved, [_nghost-%COMP%]     .badge.rationalized, [_nghost-%COMP%]     .badge.submitted{background-color:#2196f3;color:#fff}[_nghost-%COMP%]     .badge.cancelled, [_nghost-%COMP%]     .badge.rejected{background-color:#dc3545;color:#fff}[_nghost-%COMP%]     .badge.overdue{background-color:#343a40;color:#fff}[_nghost-%COMP%]     .badge.accepted, [_nghost-%COMP%]     .badge.approved, [_nghost-%COMP%]     .badge.completed, [_nghost-%COMP%]     .badge.final_approved, [_nghost-%COMP%]     .badge.finished, [_nghost-%COMP%]     .badge.sasdef_approved{background-color:#28a745;color:#fff}[_nghost-%COMP%]     #print{display:none}@media print{[_nghost-%COMP%]     #no-print{display:none!important}[_nghost-%COMP%]     #print{display:flex}[_nghost-%COMP%]     #print body, [_nghost-%COMP%]     #print h1, [_nghost-%COMP%]     #print h2, [_nghost-%COMP%]     #print h3, [_nghost-%COMP%]     #print h4, [_nghost-%COMP%]     #print html, [_nghost-%COMP%]     #print img, [_nghost-%COMP%]     #print p{margin:0}[_nghost-%COMP%]     #print h1{font-size:18pt;font-weight:500;margin-bottom:.5cm}[_nghost-%COMP%]     #print h2{font-size:16pt;font-weight:500}[_nghost-%COMP%]     #print p{font-size:12pt}[_nghost-%COMP%]     #print .items-group{border:1pt solid #000;border-radius:5pt;padding:3pt;margin:9pt 0}[_nghost-%COMP%]     #print .logotipo{width:6cm;height:4cm;margin:-.5cm}[_nghost-%COMP%]     #print .label{font-weight:500}[_nghost-%COMP%]     #print .address p, [_nghost-%COMP%]     #print .disclaimer{font-size:10pt}[_nghost-%COMP%]     #print .signature-field{padding-bottom:24pt;border-bottom:1pt solid #000}}"]}),t})()}}]);
//# sourceMappingURL=5-es2015.1cf121cd73c7387e085c.js.map